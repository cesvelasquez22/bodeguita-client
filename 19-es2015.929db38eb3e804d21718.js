(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{iTbr:function(t,e,a){"use strict";a.r(e),a.d(e,"SaleOrderModule",(function(){return Lt}));var r=a("ofXK"),o=a("tyNb"),n=a("3Pt+"),i=a("2yde"),c=a("+0xr"),d=a("XNiG"),l=a("itXk"),s=a("1G5W"),b=a("eIep"),u=function(t){return t.Proceso="En proceso",t.Entregada="Entregada",t.Anulada="Anulada",t}({}),m=a("fXoL"),f=a("xNEF"),h=a("AytR"),S=a("k5Ln"),p=a("tk/3");let g=(()=>{class t{constructor(t){this.http=t}getSalesOrders(){return this.http.get(h.a.API_URL+h.a.ordenesVentaPrefix+"/Lista")}getSaleOrderDetail(t){return this.http.get(`${h.a.API_URL+h.a.ordenesVentaPrefix}/OrdenVenta/${t}`)}createSaleOrder(t){return this.http.post(h.a.API_URL+h.a.ordenesVentaPrefix+"/AddOrdenVenta",t,{headers:S.a,responseType:"text"})}updateSaleOrder(t){return this.http.put(h.a.API_URL+h.a.ordenesVentaPrefix+"/UpdateOrdenVenta",t,{headers:S.a,responseType:"text"})}annulSaleOrder(t){return this.http.put(h.a.API_URL+h.a.ordenesVentaPrefix+"/AnularOrdenVenta",t,{headers:S.a,responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(m.Xb(p.b))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac}),t})();var O=a("K8I4"),T=a("K/TF"),F=a("XiUz"),v=a("ngNO"),w=a("Wp6s"),D=a("bTqV"),y=a("NFeN"),C=a("kmnG"),I=a("d3UM"),V=a("FKr1"),x=a("qFsG"),P=a("iadO"),k=a("FMnn"),M=a("/t3+");function B(t,e){if(1&t&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.lc("value",t.IdCliente),m.Bb(1),m.Hc(" ",t.Nombre," ")}}function L(t,e){1&t&&(m.Tb(0,"mat-error"),m.Fc(1," Los datos del cliente son requeridos "),m.Sb())}function A(t,e){if(1&t&&(m.Tb(0,"div"),m.Tb(1,"div"),m.Tb(2,"strong"),m.Fc(3,"Correo: "),m.Sb(),m.Fc(4),m.Sb(),m.Sb()),2&t){const t=m.fc();m.Bb(4),m.Hc("",t.saleOrderCustomer.Correo," ")}}function U(t,e){if(1&t&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.lc("value",t.value),m.Bb(1),m.Hc(" ",t.value," ")}}function N(t,e){1&t&&(m.Tb(0,"mat-error"),m.Fc(1," La forma de pago es requerida "),m.Sb())}function H(t,e){1&t&&(m.Tb(0,"mat-error"),m.Fc(1," La fecha expectativa de salida es requerida "),m.Sb())}function R(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",6),m.Tb(1,"mat-form-field"),m.Tb(2,"input",47),m.bc("dateInput",(function(e){return m.uc(t),m.fc().inputExpectOutDate(e)})),m.Sb(),m.Ob(3,"mat-datepicker-toggle",48),m.Ob(4,"mat-datepicker",null,49),m.Dc(6,H,2,0,"mat-error",16),m.Sb(),m.Sb()}if(2&t){const t=m.qc(5),e=m.fc();m.Bb(2),m.lc("matDatepicker",t),m.Bb(1),m.lc("for",t),m.Bb(3),m.lc("ngIf",e.saleOrderForm.get("FechaSalida").errors)}}function _(t,e){1&t&&(m.Tb(0,"th",50),m.Fc(1,"#"),m.Sb())}function $(t,e){if(1&t&&(m.Tb(0,"td",51),m.Fc(1),m.Sb()),2&t){const t=e.index;m.Bb(1),m.Hc(" ",t+1," ")}}function j(t,e){1&t&&(m.Tb(0,"th",50),m.Fc(1," Producto "),m.Sb())}function G(t,e){if(1&t&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.lc("value",t.IDProducto),m.Bb(1),m.Hc(" ",t.IDMarca+" "+t.IDDimension," ")}}function Q(t,e){if(1&t){const t=m.Ub();m.Tb(0,"td",52),m.Tb(1,"mat-form-field"),m.Tb(2,"mat-label"),m.Fc(3,"Producto"),m.Sb(),m.Tb(4,"mat-select",53),m.bc("selectionChange",(function(){m.uc(t);const a=e.index;return m.fc().calculateDetailList(a)})),m.Dc(5,G,2,2,"mat-option",15),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=e.index,a=m.fc();m.lc("formGroupName",t),m.Bb(5),m.lc("ngForOf",a.products)}}function z(t,e){1&t&&(m.Tb(0,"th",50),m.Fc(1," Unidad de medida "),m.Sb())}function E(t,e){if(1&t&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.lc("value",t.IdUnidadesMedidas),m.Bb(1),m.Hc(" ",t.Nombre," ")}}function q(t,e){if(1&t){const t=m.Ub();m.Tb(0,"td",52),m.Tb(1,"mat-form-field"),m.Tb(2,"mat-label"),m.Fc(3,"Unidad de medida"),m.Sb(),m.Tb(4,"mat-select",54),m.bc("selectionChange",(function(){m.uc(t);const a=e.index;return m.fc().calculateDetailList(a)})),m.Dc(5,E,2,2,"mat-option",15),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=e.index,a=m.fc();m.lc("formGroupName",t),m.Bb(5),m.lc("ngForOf",a.measureUnits)}}function K(t,e){1&t&&(m.Tb(0,"th",50),m.Fc(1," Precio de venta "),m.Sb())}function X(t,e){if(1&t&&(m.Tb(0,"td",52),m.Fc(1),m.gc(2,"number"),m.Sb()),2&t){const t=e.index,a=m.fc();m.lc("formGroupName",t),m.Bb(1),m.Hc(" L. ",m.ic(2,2,a.details[t].PrecioVenta?a.details[t].PrecioVenta:0,"0.2-2")," ")}}function J(t,e){1&t&&(m.Tb(0,"th",50),m.Fc(1," Cantidad "),m.Sb())}function W(t,e){if(1&t){const t=m.Ub();m.Tb(0,"mat-form-field"),m.Tb(1,"input",55),m.bc("keyup",(function(){m.uc(t);const e=m.fc().index;return m.fc().calculateDetailList(e)})),m.Sb(),m.Sb()}2&t&&(m.Bb(1),m.lc("decimal",!0))}function Y(t,e){if(1&t&&(m.Tb(0,"td",52),m.Fc(1),m.gc(2,"number"),m.Dc(3,W,2,1,"mat-form-field",16),m.Sb()),2&t){const t=e.$implicit,a=e.index,r=m.fc();m.lc("formGroupName",a),m.Bb(1),m.Hc(" ",1===r.viewModeSaleOrder?m.ic(2,3,t.Cantidad,"0.2-2"):""," "),m.Bb(2),m.lc("ngIf",2===r.viewModeSaleOrder)}}function Z(t,e){1&t&&(m.Tb(0,"th",50),m.Fc(1," Total unidad venta "),m.Sb())}function tt(t,e){if(1&t&&(m.Tb(0,"td",52),m.Fc(1),m.gc(2,"number"),m.Sb()),2&t){const t=e.index,a=m.fc();m.lc("formGroupName",t),m.Bb(1),m.Hc(" L. ",m.ic(2,2,a.details[t].TotalUnidadVenta?a.details[t].TotalUnidadVenta:0,"0.2-2")," ")}}function et(t,e){if(1&t&&(m.Tb(0,"th",50),m.Fc(1),m.Sb()),2&t){const t=m.fc();m.Bb(1),m.Hc(" ",2===t.viewModeSaleOrder?"Accion":""," ")}}function at(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",57),m.bc("click",(function(){m.uc(t);const e=m.fc().index;return m.fc().deleteProduct(e)})),m.Tb(1,"mat-icon"),m.Fc(2,"delete"),m.Sb(),m.Sb()}}function rt(t,e){if(1&t&&(m.Tb(0,"td",52),m.Dc(1,at,3,0,"button",56),m.Sb()),2&t){const t=e.index,a=m.fc();m.lc("formGroupName",t),m.Bb(1),m.lc("ngIf",2===a.viewModeSaleOrder)}}function ot(t,e){1&t&&m.Ob(0,"tr",58)}function nt(t,e){1&t&&m.Ob(0,"tr",59)}function it(t,e){if(1&t){const t=m.Ub();m.Tb(0,"mat-toolbar",60),m.Tb(1,"mat-toolbar-row",61),m.Tb(2,"button",62),m.bc("click",(function(){return m.uc(t),m.fc().addProduct()})),m.Tb(3,"mat-icon",63),m.Fc(4,"add"),m.Sb(),m.Sb(),m.Sb(),m.Sb()}}function ct(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",64),m.bc("click",(function(){return m.uc(t),m.fc().clear()})),m.Fc(1," Nuevo "),m.Sb()}}function dt(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",65),m.bc("click",(function(){return m.uc(t),m.fc().saveSaleOrder()})),m.Fc(1," Guardar "),m.Sb()}if(2&t){const t=m.fc();m.lc("disabled",t.saleOrderForm.invalid)}}function lt(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",66),m.bc("click",(function(){return m.uc(t),m.fc().annulSaleOrder()})),m.Tb(1,"mat-icon"),m.Fc(2,"cancel"),m.Sb(),m.Fc(3," Anular "),m.Sb()}if(2&t){const t=m.fc();m.lc("disabled",t.saleOrderForm.invalid)}}function st(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",65),m.bc("click",(function(){return m.uc(t),m.fc().saveSaleOrder()})),m.Fc(1),m.Sb()}if(2&t){const t=m.fc();m.lc("disabled",t.saleOrderForm.invalid),m.Bb(1),m.Hc(" Emitir orden a ",t.nextState," ")}}let bt=(()=>{class t{constructor(t,e,a,r,o,n){this.formBuilder=t,this.route=e,this.mainFacadeService=a,this.saleOrderService=r,this.izitoastAlertService=o,this.router=n,this.currentDate=new Date,this.paymentMethod=i.a,this.customers=[],this.products=[],this.measureUnits=[],this.displayedColumns=["Posicion","Idproducto","IdunidadMedida","Cantidad","PrecioVenta","TotalUnidadVenta","Actions"],this.dataSource=new c.l([]),this.details=[],this.states=Object.keys(u).map(t=>({label:t,key:u[t]})),this.unsubscribe$=new d.a,this.buildForm(),this.saleOrderId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getSaleOrderInfo(),this.onChanges()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}buildForm(){this.saleOrderForm=this.formBuilder.group({IdordenVenta:[0,[]],FechaSalida:[new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()),[n.v.required]],Idcliente:[null,[n.v.required]],Tipo:[null,[n.v.required]],SubTotal:[0,[]],Impuesto:[0,[]],Total:[0,[]],DetalleOrdenVenta:new n.d([]),IdestadoOrdenVenta:[0,[]]})}onChanges(){this.saleOrderForm.controls.Idcliente.valueChanges.pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t&&null!==t&&(this.saleOrderCustomer=this.customers.find(e=>e.IdCliente===t))})}getSaleOrderInfo(){this.clear(),this.loading=!0,this.saleOrderId?(this.viewModeSaleOrder=1,Object(l.a)(this.mainFacadeService.getCustomers(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits(),this.route.params.pipe(Object(b.a)(t=>this.saleOrderService.getSaleOrderDetail(t.id)))).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t[0]&&t[0].length>0&&(this.customers=t[0]),t[1]&&t[1].length>0&&(this.products=t[1]),t[2]&&t[2].length>0&&(this.measureUnits=t[2]),t[3]&&null!==t[3]&&this.setToForm(t[3]),this.loading=!1},t=>this.loading=!1)):(this.viewModeSaleOrder=2,Object(l.a)(this.mainFacadeService.getCustomers(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits()).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t[0]&&t[0].length>0&&(this.customers=t[0]),t[1]&&t[1].length>0&&(this.products=t[1]),t[2]&&t[2].length>0&&(this.measureUnits=t[2]),this.loading=!1},t=>this.loading=!1))}setToForm(t){this.saleOrderForm.controls.IdordenVenta.setValue(t.IdordenVenta),this.saleOrderForm.controls.Idcliente.setValue(t.Idcliente),this.saleOrderForm.controls.Tipo.setValue(t.Tipo),this.saleOrderForm.controls.FechaSalida.setValue(t.FechaSalida),this.saleOrderForm.controls.SubTotal.setValue(t.SubTotal),this.saleOrderForm.controls.Impuesto.setValue(t.Impuesto),this.saleOrderForm.controls.Total.setValue(t.Total),this.saleOrderForm.controls.IdestadoOrdenVenta.setValue(t.IdestadoOrdenVenta),t.DetalleOrdenVenta&&(t.DetalleOrdenVenta.forEach(t=>{this.saleOrderForm.controls.DetalleOrdenVenta.push(this.createProduct(t))}),this.details=this.saleOrderForm.get("DetalleOrdenVenta").value,this.dataSource=new c.l(this.details)),this.nextOrderState()}deleteProduct(t){this.saleOrderForm.get("DetalleOrdenVenta").removeAt(t),this.details=this.saleOrderForm.get("DetalleOrdenVenta").value,this.dataSource=new c.l(this.details)}addProduct(){this.saleOrderForm.get("DetalleOrdenVenta").push(this.createProduct()),this.details=this.saleOrderForm.get("DetalleOrdenVenta").value,this.dataSource=new c.l(this.details)}createProduct(t){if(t){const e=this.products.find(e=>e.IDProducto===t.Idproducto);return this.formBuilder.group({IdordenVenta:[t.IdordenVenta,[]],Idproducto:[t.Idproducto,[]],IdunidadMedida:[t.IdunidadMedida,[]],Cantidad:[t.Cantidad,[]],PrecioVenta:[e?e.PrecioVenta:0,[]],TotalUnidadVenta:[t.TotalUnidadVenta,[]]})}return this.formBuilder.group({IdordenVenta:[0,[]],Idproducto:[null,[]],IdunidadMedida:[null,[]],Cantidad:[null,[]],PrecioVenta:[null,[]],TotalUnidadVenta:[null,[]]})}clear(){this.saleOrderForm.controls.FechaSalida.setValue(null),this.saleOrderForm.controls.Idcliente.setValue(null),this.saleOrderForm.controls.Tipo.setValue(null),this.saleOrderForm.controls.IdestadoOrdenVenta.setValue(null),this.saleOrderForm.controls.SubTotal.setValue(0),this.saleOrderForm.controls.Impuesto.setValue(0),this.saleOrderForm.controls.Total.setValue(0),this.saleOrderForm.get("DetalleOrdenVenta").clear(),this.dataSource=new c.l([])}calculateDetailList(t){const e=Object.assign({},this.saleOrderForm.controls.DetalleOrdenVenta.controls[t].value);e&&e.Idproducto&&(this.productSelected=this.products.find(t=>t.IDProducto===e.Idproducto),this.saleOrderForm.controls.DetalleOrdenVenta.controls[t].controls.PrecioVenta.setValue(this.productSelected.PrecioVenta)),e&&e.Cantidad&&(e.Cantidad=1*e.Cantidad,this.saleOrderForm.controls.DetalleOrdenVenta.controls[t].controls.Cantidad.setValue(e.Cantidad),this.saleOrderForm.controls.DetalleOrdenVenta.controls[t].controls.TotalUnidadVenta.setValue(e.Cantidad*this.productSelected.PrecioVenta)),this.updateFooterSummary()}updateFooterSummary(){this.details=this.saleOrderForm.get("DetalleOrdenVenta").value;const t=this.details.map(t=>t&&t.TotalUnidadVenta?t.TotalUnidadVenta:0).reduce((t,e)=>t+e,0),e=this.details.map(t=>t&&t.TotalUnidadVenta?.15*t.TotalUnidadVenta:0).reduce((t,e)=>t+e,0),a=t+e;this.saleOrderForm.controls.SubTotal.setValue(t),this.saleOrderForm.controls.Impuesto.setValue(e),this.saleOrderForm.controls.Total.setValue(a)}inputExpectOutDate(t){this.saleOrderForm.get("FechaSalida").setValue(t.value._d)}saveSaleOrder(){this.loading=!0,this.saleOrderId?this.saleOrderService.updateSaleOrder(this.saleOrderForm.value).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.router.navigate(["/admin/orders/sales-orders"])},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar la orden de venta"),this.loading=!1}):this.saleOrderService.createSaleOrder(this.saleOrderForm.value).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.router.navigate(["/admin/orders/sales-orders"])},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando crear la orden de venta"),this.loading=!1})}annulSaleOrder(){this.saleOrderId&&this.saleOrderService.annulSaleOrder(this.saleOrderForm.value).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.router.navigate(["/admin/orders/sales-orders"])},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando anular la orden de venta"),this.loading=!1})}get IdestadoOrdenVenta(){return this.saleOrderForm.controls.IdestadoOrdenVenta.value}nextOrderState(){if(this.IdestadoOrdenVenta&&3!==this.IdestadoOrdenVenta)return this.nextState=this.states[this.IdestadoOrdenVenta].key,this.states[this.IdestadoOrdenVenta].label}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(n.f),m.Nb(o.a),m.Nb(f.a),m.Nb(g),m.Nb(O.a),m.Nb(o.g))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-sale-order-create"]],decls:131,vars:37,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxFlex","100",1,"m-36"],[3,"formGroup"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","center start","fxFlex","50"],["mat-mini-fab","","routerLink",".."],["src","assets/images/logos/fuse.svg","alt",""],["fxLayout","column","fxLayoutAlign","end end","fxFlex","50"],[1,"select-customer"],[1,"mat-subheading-2"],["formControlName","Idcliente"],["clienteSelect",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","50"],["fxLayout","row","fxFlex","33",1,"sale-order-features"],[2,"width","100%"],["formControlName","Tipo"],["fxLayout","row",4,"ngIf"],["fxLayout","column",1,"mx-12","mt-12"],["mat-table","","formArrayName","DetalleOrdenVenta",3,"dataSource"],["matColumnDef","Posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Idproducto"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","IdunidadMedida"],["matColumnDef","PrecioVenta"],["matColumnDef","Cantidad"],["matColumnDef","TotalUnidadVenta"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","background: white",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","end center",1,"summary-body"],["fxLayout","row",2,"width","50%"],["fxLayout","column","fxLayoutAlign","start end","fxFlex","50"],[1,"left-align"],[1,"right-align"],["fxLayout","row","fxLayoutAlign","end center",2,"padding","1%"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn","style","color: white",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","readonly","","formControlName","FechaSalida",3,"matDatepicker","dateInput"],["matSuffix","",3,"for"],["expectOutDate",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"formGroupName"],["formControlName","Idproducto",3,"selectionChange"],["formControlName","IdunidadMedida",3,"selectionChange"],["matInput","","type","text","formControlName","Cantidad","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal","keyup"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[2,"background","white"],[2,"padding","0%"],["mat-mini-fab","",1,"accent",3,"click"],[2,"color","white"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",2,"color","white",3,"disabled","click"]],template:function(t,e){1&t&&(m.Ob(0,"app-loading-overlay",0),m.Tb(1,"div",1),m.Ob(2,"app-title-header",2),m.Tb(3,"div",3),m.Tb(4,"div",4),m.Tb(5,"mat-card"),m.Tb(6,"form",5),m.Tb(7,"div",6),m.Tb(8,"div",7),m.Tb(9,"button",8),m.Tb(10,"mat-icon"),m.Fc(11,"arrow_back"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(12,"div",3),m.Tb(13,"div",7),m.Ob(14,"img",9),m.Sb(),m.Tb(15,"div",10),m.Tb(16,"div",11),m.Tb(17,"div",6),m.Tb(18,"div",7),m.Tb(19,"span",12),m.Tb(20,"strong"),m.Fc(21,"Informacion del cliente"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(22,"div",6),m.Tb(23,"mat-form-field"),m.Tb(24,"mat-label"),m.Fc(25,"Cliente"),m.Sb(),m.Tb(26,"mat-select",13,14),m.Dc(28,B,2,2,"mat-option",15),m.Sb(),m.Dc(29,L,2,0,"mat-error",16),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(30,"div",6),m.Tb(31,"div",17),m.Tb(32,"div"),m.Tb(33,"strong"),m.Fc(34,"RTN: "),m.Sb(),m.Fc(35,"05011955522252"),m.Sb(),m.Tb(36,"div"),m.Tb(37,"strong"),m.Fc(38,"Direccion: "),m.Sb(),m.Fc(39,"San Pedro Sula, Honduras "),m.Sb(),m.Tb(40,"div"),m.Tb(41,"strong"),m.Fc(42,"Email: "),m.Sb(),m.Fc(43,"bodeguitabendicion@gmail.com "),m.Sb(),m.Tb(44,"div"),m.Tb(45,"strong"),m.Fc(46,"Telefono: "),m.Sb(),m.Fc(47,"98989898"),m.Sb(),m.Sb(),m.Tb(48,"div",17),m.Dc(49,A,5,1,"div",16),m.Sb(),m.Sb(),m.Tb(50,"div",3),m.Tb(51,"div",18),m.Tb(52,"div",19),m.Tb(53,"span",12),m.Tb(54,"strong"),m.Fc(55,"Forma de pago"),m.Sb(),m.Sb(),m.Tb(56,"div",6),m.Tb(57,"mat-form-field"),m.Tb(58,"mat-label"),m.Fc(59,"Pago"),m.Sb(),m.Tb(60,"mat-select",20),m.Dc(61,U,2,2,"mat-option",15),m.gc(62,"keyvalue"),m.Sb(),m.Dc(63,N,2,0,"mat-error",16),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(64,"div",18),m.Tb(65,"div",19),m.Tb(66,"span",12),m.Tb(67,"strong"),m.Fc(68,"Fecha expectativa de salida"),m.Sb(),m.Fc(69),m.gc(70,"date"),m.Sb(),m.Dc(71,R,7,3,"div",21),m.Sb(),m.Sb(),m.Sb(),m.Tb(72,"div",22),m.Tb(73,"table",23),m.Rb(74,24),m.Dc(75,_,2,0,"th",25),m.Dc(76,$,2,1,"td",26),m.Qb(),m.Rb(77,27),m.Dc(78,j,2,0,"th",25),m.Dc(79,Q,6,2,"td",28),m.Qb(),m.Rb(80,29),m.Dc(81,z,2,0,"th",25),m.Dc(82,q,6,2,"td",28),m.Qb(),m.Rb(83,30),m.Dc(84,K,2,0,"th",25),m.Dc(85,X,3,5,"td",28),m.Qb(),m.Rb(86,31),m.Dc(87,J,2,0,"th",25),m.Dc(88,Y,4,6,"td",28),m.Qb(),m.Rb(89,32),m.Dc(90,Z,2,0,"th",25),m.Dc(91,tt,3,5,"td",28),m.Qb(),m.Rb(92,33),m.Dc(93,et,2,1,"th",25),m.Dc(94,rt,2,2,"td",28),m.Qb(),m.Dc(95,ot,1,0,"tr",34),m.Dc(96,nt,1,0,"tr",35),m.Sb(),m.Dc(97,it,5,0,"mat-toolbar",36),m.Sb(),m.Tb(98,"div",37),m.Tb(99,"div",38),m.Tb(100,"div",39),m.Tb(101,"div",40),m.Tb(102,"span",12),m.Tb(103,"strong"),m.Fc(104,"Subtotal"),m.Sb(),m.Sb(),m.Sb(),m.Tb(105,"div",40),m.Tb(106,"span",12),m.Tb(107,"strong"),m.Fc(108,"Impuesto"),m.Sb(),m.Sb(),m.Sb(),m.Tb(109,"div",40),m.Tb(110,"span",12),m.Tb(111,"strong"),m.Fc(112,"Total"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(113,"div",39),m.Tb(114,"div",41),m.Tb(115,"span",12),m.Fc(116),m.gc(117,"number"),m.Sb(),m.Sb(),m.Tb(118,"div",41),m.Tb(119,"span",12),m.Fc(120),m.gc(121,"number"),m.Sb(),m.Sb(),m.Tb(122,"div",41),m.Tb(123,"span",12),m.Fc(124),m.gc(125,"number"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(126,"mat-card-actions",42),m.Dc(127,ct,2,0,"button",43),m.Dc(128,dt,2,1,"button",44),m.Dc(129,lt,4,1,"button",45),m.Dc(130,st,2,2,"button",44),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.lc("isActive",e.loading),m.Bb(2),m.lc("icon","assistant")("section","\xd3rdenes de venta")("title","Detalle orden de venta"),m.Bb(4),m.lc("formGroup",e.saleOrderForm),m.Bb(22),m.lc("ngForOf",e.customers),m.Bb(1),m.lc("ngIf",e.saleOrderForm.get("Idcliente").errors),m.Bb(20),m.lc("ngIf",2===e.viewModeSaleOrder&&e.saleOrderCustomer),m.Bb(12),m.lc("ngForOf",m.hc(62,23,e.paymentMethod)),m.Bb(2),m.lc("ngIf",e.saleOrderForm.get("Tipo").errors),m.Bb(6),m.Hc(" ",1===e.viewModeSaleOrder&&e.saleOrderForm.get("FechaSalida").value?m.ic(70,25,e.saleOrderForm.get("FechaSalida").value,"dd/MM/yyyy"):""," "),m.Bb(2),m.lc("ngIf",2===e.viewModeSaleOrder),m.Bb(2),m.lc("dataSource",e.dataSource),m.Bb(22),m.lc("matHeaderRowDef",e.displayedColumns),m.Bb(1),m.lc("matRowDefColumns",e.displayedColumns),m.Bb(1),m.lc("ngIf",2===e.viewModeSaleOrder),m.Bb(19),m.Hc(" L. ",m.ic(117,28,e.saleOrderForm.get("SubTotal").value?e.saleOrderForm.get("SubTotal").value:0,"0.2-2")," "),m.Bb(4),m.Hc(" L. ",m.ic(121,31,e.saleOrderForm.get("Impuesto").value?e.saleOrderForm.get("Impuesto").value:0,"0.2-2")," "),m.Bb(4),m.Hc(" L. ",m.ic(125,34,e.saleOrderForm.get("Total").value?e.saleOrderForm.get("Total").value:0,"0.2-2")," "),m.Bb(3),m.lc("ngIf",2===e.viewModeSaleOrder),m.Bb(1),m.lc("ngIf",2===e.viewModeSaleOrder),m.Bb(1),m.lc("ngIf",1===e.viewModeSaleOrder&&2!==e.IdestadoOrdenVenta&&3!==e.IdestadoOrdenVenta),m.Bb(1),m.lc("ngIf",1===e.viewModeSaleOrder&&2!==e.IdestadoOrdenVenta&&3!==e.IdestadoOrdenVenta))},directives:[T.a,F.c,v.a,F.a,w.a,n.w,n.r,n.j,F.b,D.a,o.h,y.a,C.c,C.f,I.a,n.q,n.i,r.s,r.t,c.k,n.e,c.c,c.e,c.b,c.g,c.j,w.b,V.k,C.b,x.b,n.c,P.b,P.d,C.g,P.a,c.d,c.a,n.k,n.t,k.a,c.f,c.i,M.a,M.c],pipes:[r.l,r.f,r.g],styles:[".select-customer[_ngcontent-%COMP%]{width:100%;display:block}.select-customer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.sale-order-features[_ngcontent-%COMP%]{margin:1%}.sale-order-features[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:12px;width:98%;padding:0 2%}.summary-body[_ngcontent-%COMP%]{margin:1%}.mat-column-Posicion[_ngcontent-%COMP%]{width:5%!important}.mat-column-IDProducto[_ngcontent-%COMP%], .mat-column-Posicion[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-IDProducto[_ngcontent-%COMP%]{width:27%!important}.mat-column-IDUnidadMedida[_ngcontent-%COMP%]{width:20%!important}.mat-column-Cantidad[_ngcontent-%COMP%], .mat-column-IDUnidadMedida[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Cantidad[_ngcontent-%COMP%]{width:6%!important}.mat-column-PrecioVenta[_ngcontent-%COMP%], .mat-column-TotalUnidadVenta[_ngcontent-%COMP%]{width:16%!important}.mat-column-Actions[_ngcontent-%COMP%], .mat-column-PrecioVenta[_ngcontent-%COMP%], .mat-column-TotalUnidadVenta[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Actions[_ngcontent-%COMP%]{width:10%!important}"]}),t})();var ut=a("M9IT");function mt(t,e){1&t&&(m.Tb(0,"th",30),m.Fc(1,"#"),m.Sb())}function ft(t,e){if(1&t&&(m.Tb(0,"td",31),m.Fc(1),m.Sb()),2&t){const t=e.index;m.Bb(1),m.Hc(" ",t+1," ")}}function ht(t,e){1&t&&(m.Tb(0,"th",30),m.Fc(1,"Cliente"),m.Sb())}function St(t,e){if(1&t&&(m.Tb(0,"td",31),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Hc(" ",t.idCliente," ")}}function pt(t,e){1&t&&(m.Tb(0,"th",30),m.Fc(1,"Forma de pago"),m.Sb())}function gt(t,e){if(1&t&&(m.Tb(0,"td",31),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Hc(" ",t.tipo," ")}}function Ot(t,e){1&t&&(m.Tb(0,"th",30),m.Fc(1," Fecha de Emisi\xf3n "),m.Sb())}function Tt(t,e){if(1&t&&(m.Tb(0,"td",31),m.Fc(1),m.gc(2,"date"),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Hc(" ",m.ic(2,1,t.fechaCreacion,"dd/MM/yyyy")," ")}}function Ft(t,e){1&t&&(m.Tb(0,"th",30),m.Fc(1," Fecha de Venta "),m.Sb())}function vt(t,e){if(1&t&&(m.Tb(0,"td",31),m.Fc(1),m.gc(2,"date"),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Hc(" ",m.ic(2,1,t.fechaSalida,"dd/MM/yyyy")," ")}}function wt(t,e){1&t&&(m.Tb(0,"th",30),m.Fc(1,"Acciones"),m.Sb())}function Dt(t,e){if(1&t&&(m.Tb(0,"td",31),m.Tb(1,"button",32),m.Tb(2,"mat-icon"),m.Fc(3,"search"),m.Sb(),m.Sb(),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.lc("routerLink",t.idOrdenVenta)}}function yt(t,e){1&t&&(m.Tb(0,"tr",33),m.Tb(1,"td",34),m.Fc(2,"No se encontraron \xf3rdenes"),m.Sb(),m.Sb())}function Ct(t,e){1&t&&m.Ob(0,"tr",35)}function It(t,e){1&t&&m.Ob(0,"tr",36)}function Vt(t,e){if(1&t&&(m.Tb(0,"mat-option",37),m.Fc(1),m.Sb()),2&t){const t=e.$implicit;m.lc("value",t.key),m.Bb(1),m.Hc(" ",t.value," ")}}const xt=function(){return[10,20]},Pt=[{path:"",component:(()=>{class t{constructor(t){this.saleOrderService=t,this.displayedColumns=["posicion","fechaCreacion","fechaSalida","idCliente","tipo","actions"],this.dataSource=new c.l([]),this.filterBy=new n.g("Proceso"),this.status=u,this.unsubscribe$=new d.a}ngOnInit(){this.getSalesOrders(),this.onChangeStates()}getSalesOrders(){this.loading=!0,this.saleOrderService.getSalesOrders().pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t&&t.length>0&&(this.dataSource=new c.l(t),this.dataSource.paginator=this.paginator,this.dataSource.filter=this.filterBy.value),this.loading=!1},t=>this.loading=!1)}onChangeStates(){this.filterBy.valueChanges.pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t&&null!==t&&(this.dataSource.filter=t)})}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(g))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-sale-order-list"]],viewQuery:function(t,e){var a;1&t&&m.Ic(ut.a,!0),2&t&&m.pc(a=m.cc())&&(e.paginator=a.first)},decls:45,vars:13,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","","routerLink","create",1,"accent"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","idCliente"],["matColumnDef","tipo"],["matColumnDef","fechaCreacion"],["matColumnDef","fechaSalida"],["matColumnDef","actions"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"padding","0%"],["fxLayout","row","fxLayoutAlign","start","fxFlex","100",2,"background-color","white"],["fxLayout","row","fxFlex","","fxLayoutAlign","start center"],[1,"filter-by"],[2,"margin","0 10px"],["appearance",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"routerLink"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-header-row",""],["mat-row",""],[3,"value"]],template:function(t,e){1&t&&(m.Ob(0,"app-loading-overlay",0),m.Tb(1,"div",1),m.Ob(2,"app-title-header",2),m.Tb(3,"div",3),m.Tb(4,"div",4),m.Tb(5,"div",5),m.Tb(6,"button",6),m.Tb(7,"mat-icon"),m.Fc(8,"playlist_add"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(9,"div",7),m.Tb(10,"div",8),m.Tb(11,"table",9),m.Rb(12,10),m.Dc(13,mt,2,0,"th",11),m.Dc(14,ft,2,1,"td",12),m.Qb(),m.Rb(15,13),m.Dc(16,ht,2,0,"th",11),m.Dc(17,St,2,1,"td",12),m.Qb(),m.Rb(18,14),m.Dc(19,pt,2,0,"th",11),m.Dc(20,gt,2,1,"td",12),m.Qb(),m.Rb(21,15),m.Dc(22,Ot,2,0,"th",11),m.Dc(23,Tt,3,4,"td",12),m.Qb(),m.Rb(24,16),m.Dc(25,Ft,2,0,"th",11),m.Dc(26,vt,3,4,"td",12),m.Qb(),m.Rb(27,17),m.Dc(28,wt,2,0,"th",11),m.Dc(29,Dt,4,1,"td",12),m.Qb(),m.Dc(30,yt,3,0,"tr",18),m.Dc(31,Ct,1,0,"tr",19),m.Dc(32,It,1,0,"tr",20),m.Sb(),m.Tb(33,"mat-toolbar"),m.Tb(34,"mat-toolbar-row",21),m.Tb(35,"div",22),m.Tb(36,"div",23),m.Tb(37,"div",24),m.Tb(38,"mat-label",25),m.Fc(39,"Filtrar por:"),m.Sb(),m.Tb(40,"mat-form-field",26),m.Tb(41,"mat-select",27),m.Dc(42,Vt,2,2,"mat-option",28),m.gc(43,"keyvalue"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(44,"mat-paginator",29),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.lc("isActive",e.loading),m.Bb(2),m.lc("icon","assistant")("section","\xd3rdenes de Ventas")("title","Listado"),m.Bb(9),m.lc("dataSource",e.dataSource),m.Bb(20),m.lc("matHeaderRowDef",e.displayedColumns),m.Bb(1),m.lc("matRowDefColumns",e.displayedColumns),m.Bb(9),m.lc("formControl",e.filterBy),m.Bb(1),m.lc("ngForOf",m.hc(43,10,e.status)),m.Bb(2),m.lc("pageSizeOptions",m.mc(12,xt)))},directives:[T.a,F.c,v.a,F.b,D.a,o.h,y.a,F.a,c.k,c.c,c.e,c.b,c.h,c.g,c.j,M.a,M.c,C.f,C.c,I.a,n.q,n.h,r.s,ut.a,c.d,c.a,c.f,c.i,V.k],pipes:[r.l,r.f],styles:[""]}),t})()},{path:"create",component:bt},{path:":id",component:bt}];let kt=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[o.k.forChild(Pt)],o.k]}),t})();var Mt=a("YUcS"),Bt=a("PCNd");let Lt=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},providers:[g],imports:[[r.c,kt,Bt.a,Mt.a,n.u,k.b,c.m,ut.b,y.b,D.b,C.e,w.f,x.c,I.b,P.c,M.b]]}),t})()}}]);