!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{FMnn:function(e,i,a){"use strict";a.d(i,"a",(function(){return r})),a.d(i,"b",(function(){return c}));var o=a("fXoL"),r=function(){var e=function(){function e(n){t(this,e),this.el=n,this.hasDecimalPoint=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.min=-1/0,this.max=1/0,this.inputElement=n.nativeElement}return n(e,[{key:"ngOnChanges",value:function(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){var e=Number(this.min);this.min=isNaN(e)?-1/0:e}if(t.max){var n=Number(this.max);this.max=isNaN(n)?1/0:n}}},{key:"onKeyDown",value:function(t){if(!(this.navigationKeys.indexOf(t.key)>-1||("a"===t.key||"KeyA"===t.code)&&!0===t.ctrlKey||("c"===t.key||"KeyC"===t.code)&&!0===t.ctrlKey||("v"===t.key||"KeyV"===t.code)&&!0===t.ctrlKey||("x"===t.key||"KeyX"===t.code)&&!0===t.ctrlKey||("a"===t.key||"KeyA"===t.code)&&!0===t.metaKey||("c"===t.key||"KeyC"===t.code)&&!0===t.metaKey||("v"===t.key||"KeyV"===t.code)&&!0===t.metaKey||("x"===t.key||"KeyX"===t.code)&&!0===t.metaKey)){var e="";if(this.decimal&&t.key===this.decimalSeparator)return(e=this.forecastValue(t.key)).split(this.decimalSeparator).length>2?void t.preventDefault():void(this.hasDecimalPoint=e.indexOf(this.decimalSeparator)>-1);if(" "===t.key||isNaN(Number(t.key)))t.preventDefault();else if(e=e||this.forecastValue(t.key),!this.regex||this.regex.test(e)){var n=Number(e);(n>this.max||n<this.min)&&t.preventDefault()}else t.preventDefault()}}},{key:"onPaste",value:function(t){var e;window.clipboardData?e=window.clipboardData.getData("text"):t.clipboardData&&t.clipboardData.getData&&(e=t.clipboardData.getData("text/plain")),this.pasteData(e),t.preventDefault()}},{key:"onDrop",value:function(t){var e=t.dataTransfer.getData("text");this.inputElement.focus(),this.pasteData(e),t.preventDefault()}},{key:"pasteData",value:function(t){var e=this.sanitizeInput(t);if(!document.execCommand("insertText",!1,e))if(this.inputElement.setRangeText){var n=this.inputElement,i=n.selectionStart,a=n.selectionEnd;this.inputElement.setRangeText(e,i,a,"end"),void 0!==window.InstallTrigger&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,e);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator)>-1)}},{key:"insertAtCursor",value:function(t,e){var n=t.selectionStart,i=t.selectionEnd;t.value=t.value.substring(0,n)+e+t.value.substring(i,t.value.length);var a=n+e.length;t.focus(),t.setSelectionRange(a,a),this.triggerEvent(t,"input")}},{key:"triggerEvent",value:function(t,e){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(e,!1,!0),t.dispatchEvent(n)}}},{key:"sanitizeInput",value:function(t){var e="";if(this.decimal&&this.isValidDecimal(t)){var n=new RegExp("[^0-9".concat(this.decimalSeparator,"]"),"g");e=t.replace(n,"")}else e=t.replace(/[^0-9]/g,"");var i=this.inputElement.maxLength;if(i>0){var a=i-this.inputElement.value.length;e=a>0?e.substring(0,a):""}return e}},{key:"isValidDecimal",value:function(t){if(this.hasDecimalPoint){var e=this.getSelection();return e&&e.indexOf(this.decimalSeparator)>-1?t.split(this.decimalSeparator).length<=2:t.indexOf(this.decimalSeparator)<0}return t.split(this.decimalSeparator).length<=2}},{key:"getSelection",value:function(){return this.inputElement.value.substring(this.inputElement.selectionStart,this.inputElement.selectionEnd)}},{key:"forecastValue",value:function(t){var e=this.inputElement.selectionStart,n=this.inputElement.value,i=n.substring(e,this.inputElement.selectionEnd);return i?n.replace(i,t):n.substring(0,e)+t+n.substring(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Nb(o.l))},e.\u0275dir=o.Ib({type:e,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&o.bc("keydown",(function(t){return e.onKeyDown(t)}))("paste",(function(t){return e.onPaste(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",min:"min",max:"max",pattern:"pattern"},features:[o.zb]}),e}(),c=function(){var e=function e(){t(this,e)};return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[]]}),e}()},jWmv:function(e,i,a){"use strict";a.r(i),a.d(i,"WarehousingModule",(function(){return et}));var o,r=a("ofXK"),c=a("tyNb"),u=a("3Pt+"),s=a("0IaG"),l=a("XNiG"),d=a("fXoL"),f=a("k5Ln"),b=a("AytR"),h=a("2Vo4"),m=a("tk/3"),v=((o=function(){function e(n){t(this,e),this.http=n,this.newProductInventory=new h.a(null),this.newProductInventory$=this.newProductInventory.asObservable()}return n(e,[{key:"getProductInventory",value:function(t){return this.http.get("".concat(b.a.API_URL+b.a.inventarioPrefix,"/Inventario/").concat(t))}},{key:"createProductInventory",value:function(t){return this.http.post(b.a.API_URL+b.a.inventarioPrefix+"/AddInventario",t,{headers:f.a,responseType:"text"})}},{key:"updateProductInventory",value:function(t){return console.log(t),this.http.put("".concat(b.a.API_URL+b.a.inventarioPrefix,"/UpdateInventario/").concat(t.IdInventario),t,{headers:f.a,responseType:"text"})}},{key:"addProductInventory",value:function(t){this.newProductInventory.next(t)}}]),e}()).\u0275fac=function(t){return new(t||o)(d.Xb(m.b))},o.\u0275prov=d.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),p=a("xNEF"),y=a("kmnG"),g=a("d3UM"),S=a("qFsG"),I=a("FMnn"),w=a("XiUz"),k=a("bTqV"),D=a("FKr1");function x(t,e){if(1&t&&(d.Tb(0,"mat-option",10),d.Fc(1),d.Sb()),2&t){var n=e.$implicit;d.lc("value",n.IDProducto),d.Bb(1),d.Hc(" ",n.IDMarca+" "+n.IDDimension," ")}}function P(t,e){1&t&&(d.Tb(0,"mat-error"),d.Fc(1," El producto es requerido. "),d.Sb())}function C(t,e){1&t&&(d.Tb(0,"mat-error"),d.Fc(1," La cantidad es requerida "),d.Sb())}var E,T=((E=function(){function e(n,i,a,o,r){t(this,e),this.formBuilder=n,this.warehousingService=i,this.mainFacadeService=a,this.dialogRef=o,this.data=r,this.unsubscribe$=new l.a,this.form=this.formBuilder.group({IdInventario:[0,[u.v.required]],Idproducto:[0,[u.v.required]],Cantidad:[0,[u.v.required]],Estado:[!0,[u.v.required]],edit:[!(!this.data||!this.data.editProductInventory)]})}return n(e,[{key:"ngOnInit",value:function(){this.getProductInventoryInfo()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"getProductInventoryInfo",value:function(){var t=this;this.title="Nuevo",this.mainFacadeService.getProducts().subscribe((function(e){e&&e.length>0&&(t.products=e)})),!0===this.form.controls.edit.value&&(this.title="Editar",this.warehousingService.getProductInventory(this.data.editProductInventory.IdInventario).subscribe((function(e){e&&null!==e&&t.setWarehousingInfo(e)})))}},{key:"onSubmit",value:function(t){this.data&&this.data.editProductInventory&&this.onCancel(),this.warehousingService.addProductInventory(this.form.value),this.dialogRef.close(this.form.value),this.warehousingService.addProductInventory(null),this.clear()}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"setWarehousingInfo",value:function(t){this.form.controls.IdInventario.setValue(t.Idinventario),this.form.controls.Idproducto.setValue(t.Idproducto),this.form.controls.Cantidad.setValue(t.Cantidad),this.form.controls.Estado.setValue(t.Estado)}},{key:"clear",value:function(){this.form.reset(),this.form.controls.Idproducto.setValue(0),this.form.controls.Cantidad.setValue(0)}}]),e}()).\u0275fac=function(t){return new(t||E)(d.Nb(u.f),d.Nb(v),d.Nb(p.a),d.Nb(s.f),d.Nb(s.a))},E.\u0275cmp=d.Hb({type:E,selectors:[["app-warehousing-create"]],decls:20,vars:7,consts:[[1,"warehousing-dialog",3,"formGroup","ngSubmit"],["mat-dialog-title",""],["appearance","outline"],["formControlName","Idproducto"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","text","formControlName","Cantidad","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal"],["fxLayout","row","fxLayoutAlign","end center"],["mat-stroked-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(d.Tb(0,"form",0),d.bc("ngSubmit",(function(){return e.onSubmit(e.form)})),d.Tb(1,"h1",1),d.Fc(2),d.Sb(),d.Tb(3,"mat-dialog-content"),d.Tb(4,"mat-form-field",2),d.Tb(5,"mat-label"),d.Fc(6,"Producto"),d.Sb(),d.Tb(7,"mat-select",3),d.Dc(8,x,2,2,"mat-option",4),d.Sb(),d.Dc(9,P,2,0,"mat-error",5),d.Sb(),d.Tb(10,"mat-form-field",2),d.Tb(11,"mat-label"),d.Fc(12,"Cantidad"),d.Sb(),d.Ob(13,"input",6),d.Dc(14,C,2,0,"mat-error",5),d.Sb(),d.Sb(),d.Tb(15,"mat-dialog-actions",7),d.Tb(16,"button",8),d.bc("click",(function(){return e.dialogRef.close()})),d.Fc(17," Cancelar "),d.Sb(),d.Tb(18,"button",9),d.Fc(19," Guardar "),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.lc("formGroup",e.form),d.Bb(2),d.Hc("",e.title," producto de inventario"),d.Bb(6),d.lc("ngForOf",e.products),d.Bb(1),d.lc("ngIf",e.form.get("Idproducto").hasError("required")),d.Bb(4),d.lc("decimal",!0),d.Bb(1),d.lc("ngIf",e.form.get("Cantidad").hasError("required")),d.Bb(4),d.lc("disabled",e.form.invalid))},directives:[u.w,u.r,u.j,s.g,s.d,y.c,y.f,g.a,u.q,u.i,r.s,r.t,S.b,u.c,u.t,I.a,s.c,w.c,w.b,k.a,D.k,y.b],styles:[".warehousing-dialog[_ngcontent-%COMP%]{width:100%;display:block}.warehousing-dialog[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),E),F=a("M9IT"),N=a("+0xr"),A=a("1G5W"),O=a("K8I4"),L=a("K/TF"),K=a("ngNO"),R=a("NFeN");function B(t,e){1&t&&(d.Tb(0,"th",19),d.Fc(1,"No."),d.Sb())}function V(t,e){if(1&t&&(d.Tb(0,"td",20),d.Fc(1),d.Sb()),2&t){var n=e.index;d.Bb(1),d.Hc(" ",n+1," ")}}function H(t,e){1&t&&(d.Tb(0,"th",19),d.Fc(1,"Producto"),d.Sb())}function $(t,e){if(1&t&&(d.Tb(0,"td",20),d.Fc(1),d.Sb()),2&t){var n=e.$implicit;d.Bb(1),d.Hc(" ",n.IdProducto," ")}}function z(t,e){1&t&&(d.Tb(0,"th",19),d.Fc(1,"Cantidad"),d.Sb())}function q(t,e){if(1&t&&(d.Tb(0,"td",20),d.Fc(1),d.Sb()),2&t){var n=e.$implicit;d.Bb(1),d.Hc(" ",n.cantidad," ")}}function M(t,e){1&t&&(d.Tb(0,"th",19),d.Fc(1,"Acciones"),d.Sb())}function j(t,e){if(1&t){var n=d.Ub();d.Tb(0,"td",20),d.Tb(1,"button",21),d.bc("click",(function(){d.uc(n);var t=e.$implicit;return d.fc().productInventoryDialog(t,!0)})),d.Tb(2,"mat-icon"),d.Fc(3,"edit"),d.Sb(),d.Sb(),d.Sb()}}function G(t,e){1&t&&d.Ob(0,"tr",22)}function U(t,e){1&t&&d.Ob(0,"tr",23)}var X,_,W,Q=function(){return[10,20]},J=[{path:"",component:(X=function(){function e(n,i,a,o){t(this,e),this.warehousingService=n,this.mainFacadeService=i,this.createProductInventoryDialog=a,this.izitoastAlertService=o,this.displayedColumns=["#","idproducto","cantidad","actions"],this.dataSource=new N.l([]),this.unsubscribe$=new l.a}return n(e,[{key:"ngOnInit",value:function(){this.getInventoryList(),this.listenProductInventoryChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"getInventoryList",value:function(){var t=this;this.loading=!0,this.mainFacadeService.getInventoryList().subscribe((function(e){e&&e.length>0&&(t.dataSource=new N.l(e),t.dataSource.paginator=t.paginator),t.loading=!1}),(function(e){return t.loading=!1}))}},{key:"productInventoryDialog",value:function(t,e){this.createProductInventoryDialog.open(T,{data:{editProductInventory:e?t:null},width:"auto",disableClose:!1,autoFocus:!1})}},{key:"listenProductInventoryChanges",value:function(){var t=this;this.warehousingService.newProductInventory$.pipe(Object(A.a)(this.unsubscribe$)).subscribe((function(e){e&&null!==e&&(e.edit?t.updateProductInventory(e):t.addProductInventory(e))}))}},{key:"addProductInventory",value:function(t){var e=this;this.loading=!0,this.warehousingService.createProductInventory(t).subscribe((function(t){e.izitoastAlertService.CustomWarningAlert(t),e.loading=!1}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando agregar el producto en inventario"),e.loading=!1}))}},{key:"updateProductInventory",value:function(t){var e=this;this.loading=!0,this.warehousingService.updateProductInventory(t).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar el producto en inventario"),e.loading=!1}))}}]),e}(),X.\u0275fac=function(t){return new(t||X)(d.Nb(v),d.Nb(p.a),d.Nb(s.b),d.Nb(O.a))},X.\u0275cmp=d.Hb({type:X,selectors:[["app-warehousing-list"]],viewQuery:function(t,e){var n;1&t&&d.Ic(F.a,!0),2&t&&d.pc(n=d.cc())&&(e.paginator=n.first)},decls:27,vars:9,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","",1,"accent",3,"click"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","idproducto"],["matColumnDef","cantidad"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Ob(0,"app-loading-overlay",0),d.Tb(1,"div",1),d.Ob(2,"app-title-header",2),d.Tb(3,"div",3),d.Tb(4,"div",4),d.Tb(5,"div",5),d.Tb(6,"button",6),d.bc("click",(function(){return e.productInventoryDialog()})),d.Tb(7,"mat-icon"),d.Fc(8,"playlist_add"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(9,"div",7),d.Tb(10,"div",8),d.Tb(11,"table",9),d.Rb(12,10),d.Dc(13,B,2,0,"th",11),d.Dc(14,V,2,1,"td",12),d.Qb(),d.Rb(15,13),d.Dc(16,H,2,0,"th",11),d.Dc(17,$,2,1,"td",12),d.Qb(),d.Rb(18,14),d.Dc(19,z,2,0,"th",11),d.Dc(20,q,2,1,"td",12),d.Qb(),d.Rb(21,15),d.Dc(22,M,2,0,"th",11),d.Dc(23,j,4,0,"td",12),d.Qb(),d.Dc(24,G,1,0,"tr",16),d.Dc(25,U,1,0,"tr",17),d.Sb(),d.Ob(26,"mat-paginator",18),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.lc("isActive",e.loading),d.Bb(2),d.lc("icon","assistant")("section","Almac\xe9n de inventario")("title","Listado"),d.Bb(9),d.lc("dataSource",e.dataSource),d.Bb(13),d.lc("matHeaderRowDef",e.displayedColumns),d.Bb(1),d.lc("matRowDefColumns",e.displayedColumns),d.Bb(1),d.lc("pageSizeOptions",d.mc(8,Q)))},directives:[L.a,w.c,K.a,w.b,k.a,R.a,w.a,N.k,N.c,N.e,N.b,N.g,N.j,F.a,N.d,N.a,N.f,N.i],styles:[""]}),X)},{path:"create",component:T}],Y=((_=function e(){t(this,e)}).\u0275mod=d.Lb({type:_}),_.\u0275inj=d.Kb({factory:function(t){return new(t||_)},imports:[[c.k.forChild(J)],c.k]}),_),Z=a("PCNd"),tt=a("YUcS"),et=((W=function e(){t(this,e)}).\u0275mod=d.Lb({type:W}),W.\u0275inj=d.Kb({factory:function(t){return new(t||W)},imports:[[r.c,Y,Z.a,tt.a,m.c,u.u,I.b,N.m,F.b,R.b,k.b,s.e,y.e,S.c,g.b]]}),W)},k5Ln:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=new(n("tk/3").d)({"content-type":"application/json","Access-Control-Allow-Origin":"*"})}}])}();