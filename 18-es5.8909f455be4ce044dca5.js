!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Jvpd:function(t,a,o){"use strict";o.r(a),o.d(a,"PurchaseOrderModule",(function(){return Ve}));var n,c=o("ofXK"),i=o("tyNb"),d=o("3Pt+"),u=o("2yde"),s=o("XNiG"),l=o("itXk"),b=o("1G5W"),m=o("eIep"),p=o("+0xr"),f=function(e){return e.Compra="Adquisici\xf3n o compra",e.Pendiente="Pendiente",e.Espera="Espera de entrega",e.Entregada="Entregada",e.Anulada="Anulada",e}({}),h=o("fXoL"),v=o("xNEF"),g=o("k5Ln"),S=o("AytR"),O=o("tk/3"),T=((n=function(){function t(r){e(this,t),this.http=r}return r(t,[{key:"getPurchaseOrders",value:function(){return this.http.get(S.a.API_URL+S.a.ordenesCompraPrefix+"/Lista")}},{key:"getPurchaseOrderDetail",value:function(e){return this.http.get("".concat(S.a.API_URL+S.a.ordenesCompraPrefix,"/OrdenCompra/").concat(e))}},{key:"createPurchaseOrder",value:function(e){return this.http.post(S.a.API_URL+S.a.ordenesCompraPrefix+"/AddOrdenCompra",e,{headers:g.a,responseType:"text"})}},{key:"updatePurchaseOrder",value:function(e){return this.http.put(S.a.API_URL+S.a.ordenesCompraPrefix+"/UpdateOrdenCompra",e,{headers:g.a,responseType:"text"})}},{key:"annulPurchaseOrder",value:function(e){return this.http.put(S.a.API_URL+S.a.ordenesCompraPrefix+"/AnularOrdenCompra",e,{headers:g.a,responseType:"text"})}}]),t}()).\u0275fac=function(e){return new(e||n)(h.Xb(O.b))},n.\u0275prov=h.Jb({token:n,factory:n.\u0275fac}),n),F=o("K8I4"),C=o("K/TF"),y=o("XiUz"),w=o("ngNO"),D=o("Wp6s"),P=o("bTqV"),I=o("NFeN"),k=o("kmnG"),x=o("d3UM"),B=o("FKr1"),M=o("qFsG"),L=o("iadO"),A=o("FMnn"),U=o("/t3+");function N(e,t){if(1&e&&(h.Tb(0,"mat-option",46),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.lc("value",r.IdProveedor),h.Bb(1),h.Hc(" ",r.Nombre," ")}}function H(e,t){1&e&&(h.Tb(0,"mat-error"),h.Fc(1," Los datos del proveedor son requeridos "),h.Sb())}function R(e,t){if(1&e&&(h.Tb(0,"div"),h.Tb(1,"div"),h.Tb(2,"strong"),h.Fc(3,"Direcci\xf3n: "),h.Sb(),h.Fc(4),h.Sb(),h.Tb(5,"div"),h.Tb(6,"strong"),h.Fc(7,"Telefono: "),h.Sb(),h.Fc(8),h.Sb(),h.Sb()),2&e){var r=h.fc();h.Bb(4),h.Hc("",r.purchaseOrderProvider.Direccion," "),h.Bb(4),h.Hc("",r.purchaseOrderProvider.Telefono," ")}}function _(e,t){if(1&e&&(h.Tb(0,"mat-option",46),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.lc("value",r.value),h.Bb(1),h.Hc(" ",r.value," ")}}function E(e,t){1&e&&(h.Tb(0,"mat-error"),h.Fc(1," La forma de pago es requerida "),h.Sb())}function V(e,t){1&e&&(h.Tb(0,"mat-error"),h.Fc(1," La fecha expectativa es requerida "),h.Sb())}function $(e,t){if(1&e){var r=h.Ub();h.Tb(0,"div",6),h.Tb(1,"mat-form-field"),h.Tb(2,"input",47),h.bc("dateInput",(function(e){return h.uc(r),h.fc().inputExpectDate(e)})),h.Sb(),h.Ob(3,"mat-datepicker-toggle",48),h.Ob(4,"mat-datepicker",null,49),h.Dc(6,V,2,0,"mat-error",16),h.Sb(),h.Sb()}if(2&e){var a=h.qc(5),o=h.fc();h.Bb(2),h.lc("matDatepicker",a),h.Bb(1),h.lc("for",a),h.Bb(3),h.lc("ngIf",o.purchaseOrderForm.get("FechaEspectativa").errors)}}function j(e,t){1&e&&(h.Tb(0,"th",50),h.Fc(1,"#"),h.Sb())}function G(e,t){if(1&e&&(h.Tb(0,"td",51),h.Fc(1),h.Sb()),2&e){var r=t.index;h.Bb(1),h.Hc(" ",r+1," ")}}function Q(e,t){1&e&&(h.Tb(0,"th",50),h.Fc(1," Producto "),h.Sb())}function z(e,t){if(1&e&&(h.Tb(0,"mat-option",46),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.lc("value",r.IDProducto),h.Bb(1),h.Hc(" ",r.IDMarca+" "+r.IDDimension," ")}}function q(e,t){if(1&e){var r=h.Ub();h.Tb(0,"td",52),h.Tb(1,"mat-form-field"),h.Tb(2,"mat-label"),h.Fc(3,"Producto"),h.Sb(),h.Tb(4,"mat-select",53),h.bc("selectionChange",(function(){h.uc(r);var e=t.index;return h.fc().calculateDetailList(e)})),h.Dc(5,z,2,2,"mat-option",15),h.Sb(),h.Sb(),h.Sb()}if(2&e){var a=t.index,o=h.fc();h.lc("formGroupName",a),h.Bb(5),h.lc("ngForOf",o.products)}}function K(e,t){1&e&&(h.Tb(0,"th",50),h.Fc(1," Unidad de medida "),h.Sb())}function X(e,t){if(1&e&&(h.Tb(0,"mat-option",46),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.lc("value",r.IdUnidadesMedidas),h.Bb(1),h.Hc(" ",r.Nombre," ")}}function J(e,t){if(1&e){var r=h.Ub();h.Tb(0,"td",52),h.Tb(1,"mat-form-field"),h.Tb(2,"mat-label"),h.Fc(3,"Unidad de medida"),h.Sb(),h.Tb(4,"mat-select",54),h.bc("selectionChange",(function(){h.uc(r);var e=t.index;return h.fc().calculateDetailList(e)})),h.Dc(5,X,2,2,"mat-option",15),h.Sb(),h.Sb(),h.Sb()}if(2&e){var a=t.index,o=h.fc();h.lc("formGroupName",a),h.Bb(5),h.lc("ngForOf",o.measureUnits)}}function W(e,t){1&e&&(h.Tb(0,"th",50),h.Fc(1," Precio de compra "),h.Sb())}function Y(e,t){if(1&e&&(h.Tb(0,"td",52),h.Fc(1),h.gc(2,"number"),h.Sb()),2&e){var r=t.index,a=h.fc();h.lc("formGroupName",r),h.Bb(1),h.Hc(" L.",h.ic(2,2,a.details[r].PrecioCompra?a.details[r].PrecioCompra:0,"0.2-2")," ")}}function Z(e,t){1&e&&(h.Tb(0,"th",50),h.Fc(1," Cantidad "),h.Sb())}function ee(e,t){if(1&e){var r=h.Ub();h.Tb(0,"mat-form-field"),h.Tb(1,"input",55),h.bc("keyup",(function(){h.uc(r);var e=h.fc().index;return h.fc().calculateDetailList(e)})),h.Sb(),h.Sb()}2&e&&(h.Bb(1),h.lc("decimal",!0))}function te(e,t){if(1&e&&(h.Tb(0,"td",52),h.Fc(1),h.gc(2,"number"),h.Dc(3,ee,2,1,"mat-form-field",16),h.Sb()),2&e){var r=t.$implicit,a=t.index,o=h.fc();h.lc("formGroupName",a),h.Bb(1),h.Hc(" ",1===o.viewModePurchaseOrder?h.ic(2,3,r.Cantidad,"0.2-2"):""," "),h.Bb(2),h.lc("ngIf",2===o.viewModePurchaseOrder)}}function re(e,t){1&e&&(h.Tb(0,"th",50),h.Fc(1," Total unidad compra "),h.Sb())}function ae(e,t){if(1&e&&(h.Tb(0,"td",52),h.Fc(1),h.gc(2,"number"),h.Sb()),2&e){var r=t.index,a=h.fc();h.lc("formGroupName",r),h.Bb(1),h.Hc(" L. ",h.ic(2,2,a.details[r].TotalUnidadCompra?a.details[r].TotalUnidadCompra:0,"0.2-2")," ")}}function oe(e,t){if(1&e&&(h.Tb(0,"th",50),h.Fc(1),h.Sb()),2&e){var r=h.fc();h.Bb(1),h.Hc(" ",2===r.viewModePurchaseOrder?"Accion":""," ")}}function ne(e,t){if(1&e){var r=h.Ub();h.Tb(0,"button",57),h.bc("click",(function(){h.uc(r);var e=h.fc().index;return h.fc().deleteProduct(e)})),h.Tb(1,"mat-icon"),h.Fc(2,"delete"),h.Sb(),h.Sb()}}function ce(e,t){if(1&e&&(h.Tb(0,"td",52),h.Dc(1,ne,3,0,"button",56),h.Sb()),2&e){var r=t.index,a=h.fc();h.lc("formGroupName",r),h.Bb(1),h.lc("ngIf",2===a.viewModePurchaseOrder)}}function ie(e,t){1&e&&h.Ob(0,"tr",58)}function de(e,t){1&e&&h.Ob(0,"tr",59)}function ue(e,t){if(1&e){var r=h.Ub();h.Tb(0,"mat-toolbar",60),h.Tb(1,"mat-toolbar-row",61),h.Tb(2,"button",62),h.bc("click",(function(){return h.uc(r),h.fc().addProduct()})),h.Tb(3,"mat-icon",63),h.Fc(4,"add"),h.Sb(),h.Sb(),h.Sb(),h.Sb()}}function se(e,t){if(1&e){var r=h.Ub();h.Tb(0,"button",64),h.bc("click",(function(){return h.uc(r),h.fc().clear()})),h.Fc(1," Nuevo "),h.Sb()}}function le(e,t){if(1&e){var r=h.Ub();h.Tb(0,"button",65),h.bc("click",(function(){return h.uc(r),h.fc().savePurchaseOrder()})),h.Fc(1," Guardar "),h.Sb()}if(2&e){var a=h.fc();h.lc("disabled",a.purchaseOrderForm.invalid)}}function be(e,t){if(1&e){var r=h.Ub();h.Tb(0,"button",66),h.bc("click",(function(){return h.uc(r),h.fc().annulPurchaseOrder()})),h.Tb(1,"mat-icon"),h.Fc(2,"cancel"),h.Sb(),h.Fc(3," Anular "),h.Sb()}if(2&e){var a=h.fc();h.lc("disabled",a.purchaseOrderForm.invalid)}}function me(e,t){if(1&e){var r=h.Ub();h.Tb(0,"button",65),h.bc("click",(function(){return h.uc(r),h.fc().savePurchaseOrder()})),h.Fc(1),h.Sb()}if(2&e){var a=h.fc();h.lc("disabled",a.purchaseOrderForm.invalid),h.Bb(1),h.Hc(" Emitir orden a ",a.nextState," ")}}var pe,fe=((pe=function(){function t(r,a,o,n,c,i){e(this,t),this.formBuilder=r,this.route=a,this.mainFacadeService=o,this.purchaseOrderService=n,this.izitoastAlertService=c,this.router=i,this.currentDate=new Date,this.paymentMethod=u.a,this.providers=[],this.products=[],this.measureUnits=[],this.displayedColumns=["Posicion","Idproducto","IdunidadMedida","Cantidad","PrecioCompra","TotalUnidadCompra","Actions"],this.dataSource=new p.l([]),this.details=[],this.states=Object.keys(f).map((function(e){return{label:e,key:f[e]}})),this.unsubscribe$=new s.a,this.buildForm(),this.purchaseOrderId=this.route.snapshot.paramMap.get("id")}return r(t,[{key:"ngOnInit",value:function(){this.getPurchaseOrderInfo(),this.onChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"buildForm",value:function(){this.purchaseOrderForm=this.formBuilder.group({IdordenCompra:[0,[]],FechaEspectativa:[new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()),[d.v.required]],Idproveedor:[null,[d.v.required]],Tipo:[null,[d.v.required]],SubTotal:[0,[]],Impuesto:[0,[]],Total:[0,[]],DetalleOrdenCompra:new d.d([]),IdestadoOrdenCompra:[0,[]]})}},{key:"onChanges",value:function(){var e=this;this.purchaseOrderForm.controls.Idproveedor.valueChanges.pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){t&&null!==t&&(e.purchaseOrderProvider=e.providers.find((function(e){return e.IdProveedor===t})))}))}},{key:"getPurchaseOrderInfo",value:function(){var e=this;this.clear(),this.loading=!0,this.purchaseOrderId?(this.viewModePurchaseOrder=1,Object(l.a)(this.mainFacadeService.getProviders(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits(),this.route.params.pipe(Object(m.a)((function(t){return e.purchaseOrderService.getPurchaseOrderDetail(t.id)})))).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){t[0]&&t[0].length>0&&(e.providers=t[0]),t[1]&&t[1].length>0&&(e.products=t[1]),t[2]&&t[2].length>0&&(e.measureUnits=t[2]),t[3]&&null!==t[3]&&e.setToForm(t[3]),e.loading=!1}),(function(t){return e.loading=!1}))):(this.viewModePurchaseOrder=2,Object(l.a)(this.mainFacadeService.getProviders(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits()).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){t[0]&&t[0].length>0&&(e.providers=t[0]),t[1]&&t[1].length>0&&(e.products=t[1]),t[2]&&t[2].length>0&&(e.measureUnits=t[2]),e.loading=!1}),(function(t){return e.loading=!1})))}},{key:"setToForm",value:function(e){var t=this;this.purchaseOrderForm.controls.IdordenCompra.setValue(e.IdordenCompra),this.purchaseOrderForm.controls.Idproveedor.setValue(e.Idproveedor),this.purchaseOrderForm.controls.Tipo.setValue(e.Tipo),this.purchaseOrderForm.controls.FechaEspectativa.setValue(e.FechaEspectativa),this.purchaseOrderForm.controls.SubTotal.setValue(e.SubTotal),this.purchaseOrderForm.controls.Impuesto.setValue(e.Impuesto),this.purchaseOrderForm.controls.Total.setValue(e.Total),this.purchaseOrderForm.controls.IdestadoOrdenCompra.setValue(e.IdestadoOrdenCompra),e.DetalleOrdenCompra&&(e.DetalleOrdenCompra.forEach((function(e){t.purchaseOrderForm.controls.DetalleOrdenCompra.push(t.createProduct(e))})),this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value,this.dataSource=new p.l(this.details)),this.nextOrderState()}},{key:"deleteProduct",value:function(e){this.purchaseOrderForm.get("DetalleOrdenCompra").removeAt(e),this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value,this.dataSource=new p.l(this.details),this.updateFooterSummary()}},{key:"addProduct",value:function(){this.purchaseOrderForm.get("DetalleOrdenCompra").push(this.createProduct(null)),this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value,this.dataSource=new p.l(this.details)}},{key:"createProduct",value:function(e){if(e){var t=this.products.find((function(t){return t.IDProducto===e.Idproducto}));return this.formBuilder.group({IdordenCompra:[e.IdordenCompra,[]],Idproducto:[e.Idproducto,[]],IdunidadMedida:[e.IdunidadMedida,[]],Cantidad:[e.Cantidad,[]],PrecioCompra:[t?t.PrecioCompra:0,[]],TotalUnidadCompra:[e.TotalUnidadCompra,[]]})}return this.formBuilder.group({IdordenCompra:[0,[]],Idproducto:[null,[]],IdunidadMedida:[null,[]],Cantidad:[null,[]],PrecioCompra:[null,[]],TotalUnidadCompra:[null,[]]})}},{key:"clear",value:function(){this.purchaseOrderForm.controls.FechaEspectativa.setValue(null),this.purchaseOrderForm.controls.Idproveedor.setValue(null),this.purchaseOrderForm.controls.Tipo.setValue(null),this.purchaseOrderForm.controls.SubTotal.setValue(0),this.purchaseOrderForm.controls.Impuesto.setValue(0),this.purchaseOrderForm.controls.Total.setValue(0),this.purchaseOrderForm.get("DetalleOrdenCompra").clear(),this.dataSource=new p.l([])}},{key:"calculateDetailList",value:function(e){var t=Object.assign({},this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].value);t&&t.Idproducto&&(this.productSelected=this.products.find((function(e){return e.IDProducto===t.Idproducto})),this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].controls.PrecioCompra.setValue(this.productSelected.PrecioCompra)),t&&t.Cantidad&&(t.Cantidad=1*t.Cantidad,this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].controls.Cantidad.setValue(t.Cantidad),this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].controls.TotalUnidadCompra.setValue(t.Cantidad*this.productSelected.PrecioCompra)),this.updateFooterSummary()}},{key:"updateFooterSummary",value:function(){this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value;var e=this.details.map((function(e){return e&&e.TotalUnidadCompra?e.TotalUnidadCompra:0})).reduce((function(e,t){return e+t}),0),t=this.details.map((function(e){return e&&e.TotalUnidadCompra?.15*e.TotalUnidadCompra:0})).reduce((function(e,t){return e+t}),0),r=e+t;this.purchaseOrderForm.controls.SubTotal.setValue(e),this.purchaseOrderForm.controls.Impuesto.setValue(t),this.purchaseOrderForm.controls.Total.setValue(r)}},{key:"inputExpectDate",value:function(e){this.purchaseOrderForm.get("FechaEspectativa").setValue(e.value._d)}},{key:"savePurchaseOrder",value:function(){var e=this;this.loading=!0,this.purchaseOrderId?this.purchaseOrderService.updatePurchaseOrder(this.purchaseOrderForm.value).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1,e.router.navigate(["/admin/orders/purchase-orders"])}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar la orden de compra"),e.loading=!1})):this.purchaseOrderService.createPurchaseOrder(this.purchaseOrderForm.value).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1,e.router.navigate(["/admin/orders/purchase-orders"])}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando crear la orden de compra"),e.loading=!1}))}},{key:"annulPurchaseOrder",value:function(){var e=this;this.purchaseOrderId&&this.purchaseOrderService.annulPurchaseOrder(this.purchaseOrderForm.value).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1,e.router.navigate(["/admin/orders/purchase-orders"])}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando anular la orden de compra"),e.loading=!1}))}},{key:"nextOrderState",value:function(){if(this.IdestadoOrdenCompra&&5!==this.IdestadoOrdenCompra)return this.nextState=this.states[this.IdestadoOrdenCompra].key,this.states[this.IdestadoOrdenCompra].label}},{key:"IdestadoOrdenCompra",get:function(){return this.purchaseOrderForm.controls.IdestadoOrdenCompra.value}}]),t}()).\u0275fac=function(e){return new(e||pe)(h.Nb(d.f),h.Nb(i.a),h.Nb(v.a),h.Nb(T),h.Nb(F.a),h.Nb(i.g))},pe.\u0275cmp=h.Hb({type:pe,selectors:[["purchase-order-create"]],decls:131,vars:37,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxFlex","100",1,"m-36"],[3,"formGroup"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","center start","fxFlex","50"],["mat-mini-fab","","routerLink",".."],["src","assets/images/logos/fuse.svg","alt",""],["fxLayout","column","fxLayoutAlign","end end","fxFlex","50"],[1,"select-provider"],[1,"mat-subheading-2"],["formControlName","Idproveedor"],["providerSelect",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","50"],["fxLayout","row","fxFlex","33",1,"purchase-order-features"],[2,"width","100%"],["formControlName","Tipo"],["fxLayout","row",4,"ngIf"],["fxLayout","column",1,"mx-12","mt-12"],["mat-table","","formArrayName","DetalleOrdenCompra",3,"dataSource"],["matColumnDef","Posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Idproducto"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","IdunidadMedida"],["matColumnDef","PrecioCompra"],["matColumnDef","Cantidad"],["matColumnDef","TotalUnidadCompra"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","background: white",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","end center",1,"summary-body"],["fxLayout","row",2,"width","50%"],["fxLayout","column","fxLayoutAlign","start end","fxFlex","50"],[1,"left-align"],[1,"right-align"],["fxLayout","row","fxLayoutAlign","end center",2,"padding","1%"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn","style","color: white",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","readonly","","formControlName","FechaEspectativa",3,"matDatepicker","dateInput"],["matSuffix","",3,"for"],["expectDate",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"formGroupName"],["formControlName","Idproducto",3,"selectionChange"],["formControlName","IdunidadMedida",3,"selectionChange"],["matInput","","type","text","formControlName","Cantidad","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal","keyup"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[2,"background","white"],[2,"padding","0%"],["mat-mini-fab","",1,"accent",3,"click"],[2,"color","white"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",2,"color","white",3,"disabled","click"]],template:function(e,t){1&e&&(h.Ob(0,"app-loading-overlay",0),h.Tb(1,"div",1),h.Ob(2,"app-title-header",2),h.Tb(3,"div",3),h.Tb(4,"div",4),h.Tb(5,"mat-card"),h.Tb(6,"form",5),h.Tb(7,"div",6),h.Tb(8,"div",7),h.Tb(9,"button",8),h.Tb(10,"mat-icon"),h.Fc(11,"arrow_back"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(12,"div",3),h.Tb(13,"div",7),h.Ob(14,"img",9),h.Sb(),h.Tb(15,"div",10),h.Tb(16,"div",11),h.Tb(17,"div",6),h.Tb(18,"div",7),h.Tb(19,"span",12),h.Tb(20,"strong"),h.Fc(21,"Informacion del proveedor"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(22,"div",6),h.Tb(23,"mat-form-field"),h.Tb(24,"mat-label"),h.Fc(25,"Proveedor"),h.Sb(),h.Tb(26,"mat-select",13,14),h.Dc(28,N,2,2,"mat-option",15),h.Sb(),h.Dc(29,H,2,0,"mat-error",16),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(30,"div",6),h.Tb(31,"div",17),h.Tb(32,"div"),h.Tb(33,"strong"),h.Fc(34,"RTN: "),h.Sb(),h.Fc(35,"05011955522252"),h.Sb(),h.Tb(36,"div"),h.Tb(37,"strong"),h.Fc(38,"Direccion: "),h.Sb(),h.Fc(39,"San Pedro Sula, Honduras "),h.Sb(),h.Tb(40,"div"),h.Tb(41,"strong"),h.Fc(42,"Email: "),h.Sb(),h.Fc(43,"bodeguitabendicion@gmail.com "),h.Sb(),h.Tb(44,"div"),h.Tb(45,"strong"),h.Fc(46,"Telefono: "),h.Sb(),h.Fc(47,"98989898"),h.Sb(),h.Sb(),h.Tb(48,"div",17),h.Dc(49,R,9,2,"div",16),h.Sb(),h.Sb(),h.Tb(50,"div",3),h.Tb(51,"div",18),h.Tb(52,"div",19),h.Tb(53,"span",12),h.Tb(54,"strong"),h.Fc(55,"Forma de pago"),h.Sb(),h.Sb(),h.Tb(56,"div",6),h.Tb(57,"mat-form-field"),h.Tb(58,"mat-label"),h.Fc(59,"Pago"),h.Sb(),h.Tb(60,"mat-select",20),h.Dc(61,_,2,2,"mat-option",15),h.gc(62,"keyvalue"),h.Sb(),h.Dc(63,E,2,0,"mat-error",16),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(64,"div",18),h.Tb(65,"div",19),h.Tb(66,"span",12),h.Tb(67,"strong"),h.Fc(68,"Fecha expectativa de entrega: "),h.Sb(),h.Fc(69),h.gc(70,"date"),h.Sb(),h.Dc(71,$,7,3,"div",21),h.Sb(),h.Sb(),h.Sb(),h.Tb(72,"div",22),h.Tb(73,"table",23),h.Rb(74,24),h.Dc(75,j,2,0,"th",25),h.Dc(76,G,2,1,"td",26),h.Qb(),h.Rb(77,27),h.Dc(78,Q,2,0,"th",25),h.Dc(79,q,6,2,"td",28),h.Qb(),h.Rb(80,29),h.Dc(81,K,2,0,"th",25),h.Dc(82,J,6,2,"td",28),h.Qb(),h.Rb(83,30),h.Dc(84,W,2,0,"th",25),h.Dc(85,Y,3,5,"td",28),h.Qb(),h.Rb(86,31),h.Dc(87,Z,2,0,"th",25),h.Dc(88,te,4,6,"td",28),h.Qb(),h.Rb(89,32),h.Dc(90,re,2,0,"th",25),h.Dc(91,ae,3,5,"td",28),h.Qb(),h.Rb(92,33),h.Dc(93,oe,2,1,"th",25),h.Dc(94,ce,2,2,"td",28),h.Qb(),h.Dc(95,ie,1,0,"tr",34),h.Dc(96,de,1,0,"tr",35),h.Sb(),h.Dc(97,ue,5,0,"mat-toolbar",36),h.Sb(),h.Tb(98,"div",37),h.Tb(99,"div",38),h.Tb(100,"div",39),h.Tb(101,"div",40),h.Tb(102,"span",12),h.Tb(103,"strong"),h.Fc(104,"Subtotal"),h.Sb(),h.Sb(),h.Sb(),h.Tb(105,"div",40),h.Tb(106,"span",12),h.Tb(107,"strong"),h.Fc(108,"Impuesto"),h.Sb(),h.Sb(),h.Sb(),h.Tb(109,"div",40),h.Tb(110,"span",12),h.Tb(111,"strong"),h.Fc(112,"Total"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(113,"div",39),h.Tb(114,"div",41),h.Tb(115,"span",12),h.Fc(116),h.gc(117,"number"),h.Sb(),h.Sb(),h.Tb(118,"div",41),h.Tb(119,"span",12),h.Fc(120),h.gc(121,"number"),h.Sb(),h.Sb(),h.Tb(122,"div",41),h.Tb(123,"span",12),h.Fc(124),h.gc(125,"number"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(126,"mat-card-actions",42),h.Dc(127,se,2,0,"button",43),h.Dc(128,le,2,1,"button",44),h.Dc(129,be,4,1,"button",45),h.Dc(130,me,2,2,"button",44),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e&&(h.lc("isActive",t.loading),h.Bb(2),h.lc("icon","assistant")("section","\xd3rdenes de compra")("title","Detalle orden de compra"),h.Bb(4),h.lc("formGroup",t.purchaseOrderForm),h.Bb(22),h.lc("ngForOf",t.providers),h.Bb(1),h.lc("ngIf",t.purchaseOrderForm.get("Idproveedor").errors),h.Bb(20),h.lc("ngIf",2===t.viewModePurchaseOrder&&t.purchaseOrderProvider),h.Bb(12),h.lc("ngForOf",h.hc(62,23,t.paymentMethod)),h.Bb(2),h.lc("ngIf",t.purchaseOrderForm.get("Tipo").errors),h.Bb(6),h.Hc(" ",1===t.viewModePurchaseOrder&&t.purchaseOrderForm.get("FechaEspectativa").value?h.ic(70,25,t.purchaseOrderForm.get("FechaEspectativa").value,"dd/MM/yyyy"):""," "),h.Bb(2),h.lc("ngIf",2===t.viewModePurchaseOrder),h.Bb(2),h.lc("dataSource",t.dataSource),h.Bb(22),h.lc("matHeaderRowDef",t.displayedColumns),h.Bb(1),h.lc("matRowDefColumns",t.displayedColumns),h.Bb(1),h.lc("ngIf",2===t.viewModePurchaseOrder),h.Bb(19),h.Hc(" L. ",h.ic(117,28,t.purchaseOrderForm.get("SubTotal").value?t.purchaseOrderForm.get("SubTotal").value:0,"0.2-2")," "),h.Bb(4),h.Hc(" L. ",h.ic(121,31,t.purchaseOrderForm.get("Impuesto").value?t.purchaseOrderForm.get("Impuesto").value:0,"0.2-2")," "),h.Bb(4),h.Hc(" L. ",h.ic(125,34,t.purchaseOrderForm.get("Total").value?t.purchaseOrderForm.get("Total").value:0,"0.2-2")," "),h.Bb(3),h.lc("ngIf",2===t.viewModePurchaseOrder),h.Bb(1),h.lc("ngIf",2===t.viewModePurchaseOrder),h.Bb(1),h.lc("ngIf",1===t.viewModePurchaseOrder&&4!==t.IdestadoOrdenCompra&&5!==t.IdestadoOrdenCompra),h.Bb(1),h.lc("ngIf",1===t.viewModePurchaseOrder&&4!==t.IdestadoOrdenCompra&&5!==t.IdestadoOrdenCompra))},directives:[C.a,y.c,w.a,y.a,D.a,d.w,d.r,d.j,y.b,P.a,i.h,I.a,k.c,k.f,x.a,d.q,d.i,c.s,c.t,p.k,d.e,p.c,p.e,p.b,p.g,p.j,D.b,B.k,k.b,M.b,d.c,L.b,L.d,k.g,L.a,p.d,p.a,d.k,d.t,A.a,p.f,p.i,U.a,U.c],pipes:[c.l,c.f,c.g],styles:[".select-provider[_ngcontent-%COMP%]{width:100%;display:block}.select-provider[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.purchase-order-features[_ngcontent-%COMP%]{margin:1%}.purchase-order-features[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:12px;width:98%;padding:0 2%}.summary-body[_ngcontent-%COMP%]{margin:1%}.mat-column-Posicion[_ngcontent-%COMP%]{width:5%!important}.mat-column-IDProducto[_ngcontent-%COMP%], .mat-column-Posicion[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-IDProducto[_ngcontent-%COMP%]{width:27%!important}.mat-column-IDUnidadMedida[_ngcontent-%COMP%]{width:20%!important}.mat-column-Cantidad[_ngcontent-%COMP%], .mat-column-IDUnidadMedida[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Cantidad[_ngcontent-%COMP%]{width:6%!important}.mat-column-PrecioCompra[_ngcontent-%COMP%], .mat-column-TotalUnidadCompra[_ngcontent-%COMP%]{width:16%!important}.mat-column-Actions[_ngcontent-%COMP%], .mat-column-PrecioCompra[_ngcontent-%COMP%], .mat-column-TotalUnidadCompra[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Actions[_ngcontent-%COMP%]{width:10%!important}"]}),pe),he=o("M9IT");function ve(e,t){1&e&&(h.Tb(0,"th",30),h.Fc(1,"#"),h.Sb())}function ge(e,t){if(1&e&&(h.Tb(0,"td",31),h.Fc(1),h.Sb()),2&e){var r=t.index;h.Bb(1),h.Hc(" ",r+1," ")}}function Se(e,t){1&e&&(h.Tb(0,"th",30),h.Fc(1," Fecha de entrega "),h.Sb())}function Oe(e,t){if(1&e&&(h.Tb(0,"td",31),h.Fc(1),h.gc(2,"date"),h.Sb()),2&e){var r=t.$implicit;h.Bb(1),h.Hc(" ",h.ic(2,1,r.fechaEspectativa,"dd/MM/yyyy")," ")}}function Te(e,t){1&e&&(h.Tb(0,"th",30),h.Fc(1,"Proveedor"),h.Sb())}function Fe(e,t){if(1&e&&(h.Tb(0,"td",31),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.Bb(1),h.Hc(" ",r.idProveedor," ")}}function Ce(e,t){1&e&&(h.Tb(0,"th",30),h.Fc(1,"Forma de pago"),h.Sb())}function ye(e,t){if(1&e&&(h.Tb(0,"td",31),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.Bb(1),h.Hc(" ",r.tipo," ")}}function we(e,t){1&e&&(h.Tb(0,"th",30),h.Fc(1," Fecha de emisi\xf3n "),h.Sb())}function De(e,t){if(1&e&&(h.Tb(0,"td",31),h.Fc(1),h.gc(2,"date"),h.Sb()),2&e){var r=t.$implicit;h.Bb(1),h.Hc(" ",h.ic(2,1,r.fechaCreacion,"dd/MM/yyyy")," ")}}function Pe(e,t){1&e&&(h.Tb(0,"th",30),h.Fc(1,"Acciones"),h.Sb())}function Ie(e,t){if(1&e&&(h.Tb(0,"td",31),h.Tb(1,"button",32),h.Tb(2,"mat-icon"),h.Fc(3,"search"),h.Sb(),h.Sb(),h.Sb()),2&e){var r=t.$implicit;h.Bb(1),h.lc("routerLink",r.idOrdenCompra)}}function ke(e,t){1&e&&(h.Tb(0,"tr",33),h.Tb(1,"td",34),h.Fc(2,"No se encontraron \xf3rdenes"),h.Sb(),h.Sb())}function xe(e,t){1&e&&h.Ob(0,"tr",35)}function Be(e,t){1&e&&h.Ob(0,"tr",36)}function Me(e,t){if(1&e&&(h.Tb(0,"mat-option",37),h.Fc(1),h.Sb()),2&e){var r=t.$implicit;h.lc("value",r.key),h.Bb(1),h.Hc(" ",r.value," ")}}var Le,Ae,Ue,Ne=function(){return[10,20]},He=[{path:"",component:(Le=function(){function t(r){e(this,t),this.purchaseOrderService=r,this.displayedColumns=["posicion","fechaCreacion","fechaEspectativa","idProveedor","tipo","actions"],this.dataSource=new p.l([]),this.purchaseOrders=[],this.filterBy=new d.g("Compra"),this.status=f,this.unsubscribe$=new s.a}return r(t,[{key:"ngOnInit",value:function(){this.getPurchaseOrders(),this.onChangeStates()}},{key:"getPurchaseOrders",value:function(){var e=this;this.loading=!0,this.purchaseOrderService.getPurchaseOrders().pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){t&&t.length>0&&(e.purchaseOrders=t,e.dataSource=new p.l(e.purchaseOrders),e.dataSource.paginator=e.paginator,e.dataSource.filter=e.filterBy.value),e.loading=!1}),(function(t){return e.loading=!1}))}},{key:"onChangeStates",value:function(){var e=this;this.filterBy.valueChanges.pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){t&&null!==t&&(e.dataSource.filter=t)}))}}]),t}(),Le.\u0275fac=function(e){return new(e||Le)(h.Nb(T))},Le.\u0275cmp=h.Hb({type:Le,selectors:[["app-purchase-order-list"]],viewQuery:function(e,t){var r;1&e&&h.Ic(he.a,!0),2&e&&h.pc(r=h.cc())&&(t.paginator=r.first)},decls:45,vars:13,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","","routerLink","create",1,"accent"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fechaEspectativa"],["matColumnDef","idProveedor"],["matColumnDef","tipo"],["matColumnDef","fechaCreacion"],["matColumnDef","actions"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"padding","0%"],["fxLayout","row","fxLayoutAlign","start","fxFlex","100",2,"background-color","white"],["fxLayout","row","fxFlex","","fxLayoutAlign","start center"],[1,"filter-by"],[2,"margin","0 10px"],["appearance",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"routerLink"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-header-row",""],["mat-row",""],[3,"value"]],template:function(e,t){1&e&&(h.Ob(0,"app-loading-overlay",0),h.Tb(1,"div",1),h.Ob(2,"app-title-header",2),h.Tb(3,"div",3),h.Tb(4,"div",4),h.Tb(5,"div",5),h.Tb(6,"button",6),h.Tb(7,"mat-icon"),h.Fc(8,"playlist_add"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(9,"div",7),h.Tb(10,"div",8),h.Tb(11,"table",9),h.Rb(12,10),h.Dc(13,ve,2,0,"th",11),h.Dc(14,ge,2,1,"td",12),h.Qb(),h.Rb(15,13),h.Dc(16,Se,2,0,"th",11),h.Dc(17,Oe,3,4,"td",12),h.Qb(),h.Rb(18,14),h.Dc(19,Te,2,0,"th",11),h.Dc(20,Fe,2,1,"td",12),h.Qb(),h.Rb(21,15),h.Dc(22,Ce,2,0,"th",11),h.Dc(23,ye,2,1,"td",12),h.Qb(),h.Rb(24,16),h.Dc(25,we,2,0,"th",11),h.Dc(26,De,3,4,"td",12),h.Qb(),h.Rb(27,17),h.Dc(28,Pe,2,0,"th",11),h.Dc(29,Ie,4,1,"td",12),h.Qb(),h.Dc(30,ke,3,0,"tr",18),h.Dc(31,xe,1,0,"tr",19),h.Dc(32,Be,1,0,"tr",20),h.Sb(),h.Tb(33,"mat-toolbar"),h.Tb(34,"mat-toolbar-row",21),h.Tb(35,"div",22),h.Tb(36,"div",23),h.Tb(37,"div",24),h.Tb(38,"mat-label",25),h.Fc(39,"Filtrar por:"),h.Sb(),h.Tb(40,"mat-form-field",26),h.Tb(41,"mat-select",27),h.Dc(42,Me,2,2,"mat-option",28),h.gc(43,"keyvalue"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Ob(44,"mat-paginator",29),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e&&(h.lc("isActive",t.loading),h.Bb(2),h.lc("icon","assistant")("section","\xd3rdenes de compra")("title","Listado"),h.Bb(9),h.lc("dataSource",t.dataSource),h.Bb(20),h.lc("matHeaderRowDef",t.displayedColumns),h.Bb(1),h.lc("matRowDefColumns",t.displayedColumns),h.Bb(9),h.lc("formControl",t.filterBy),h.Bb(1),h.lc("ngForOf",h.hc(43,10,t.status)),h.Bb(2),h.lc("pageSizeOptions",h.mc(12,Ne)))},directives:[C.a,y.c,w.a,y.b,P.a,i.h,I.a,y.a,p.k,p.c,p.e,p.b,p.h,p.g,p.j,U.a,U.c,k.f,k.c,x.a,d.q,d.h,c.s,he.a,p.d,p.a,p.f,p.i,B.k],pipes:[c.l,c.f],styles:[""]}),Le)},{path:"create",component:fe},{path:":id",component:fe}],Re=((Ae=function t(){e(this,t)}).\u0275mod=h.Lb({type:Ae}),Ae.\u0275inj=h.Kb({factory:function(e){return new(e||Ae)},imports:[[i.k.forChild(He)],i.k]}),Ae),_e=o("YUcS"),Ee=o("PCNd"),Ve=((Ue=function t(){e(this,t)}).\u0275mod=h.Lb({type:Ue}),Ue.\u0275inj=h.Kb({factory:function(e){return new(e||Ue)},providers:[T],imports:[[c.c,Re,Ee.a,_e.a,d.u,A.b,p.m,he.b,I.b,P.b,k.e,D.f,M.c,x.b,L.c,U.b]]}),Ue)}}])}();