(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{FMnn:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r}));var o=i("fXoL");let a=(()=>{class t{constructor(t){this.el=t,this.hasDecimalPoint=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.min=-1/0,this.max=1/0,this.inputElement=t.nativeElement}ngOnChanges(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){const t=Number(this.min);this.min=isNaN(t)?-1/0:t}if(t.max){const t=Number(this.max);this.max=isNaN(t)?1/0:t}}onKeyDown(t){if(this.navigationKeys.indexOf(t.key)>-1||("a"===t.key||"KeyA"===t.code)&&!0===t.ctrlKey||("c"===t.key||"KeyC"===t.code)&&!0===t.ctrlKey||("v"===t.key||"KeyV"===t.code)&&!0===t.ctrlKey||("x"===t.key||"KeyX"===t.code)&&!0===t.ctrlKey||("a"===t.key||"KeyA"===t.code)&&!0===t.metaKey||("c"===t.key||"KeyC"===t.code)&&!0===t.metaKey||("v"===t.key||"KeyV"===t.code)&&!0===t.metaKey||("x"===t.key||"KeyX"===t.code)&&!0===t.metaKey)return;let e="";if(this.decimal&&t.key===this.decimalSeparator)return e=this.forecastValue(t.key),e.split(this.decimalSeparator).length>2?void t.preventDefault():void(this.hasDecimalPoint=e.indexOf(this.decimalSeparator)>-1);if(" "===t.key||isNaN(Number(t.key)))return void t.preventDefault();if(e=e||this.forecastValue(t.key),this.regex&&!this.regex.test(e))return void t.preventDefault();const i=Number(e);(i>this.max||i<this.min)&&t.preventDefault()}onPaste(t){let e;window.clipboardData?e=window.clipboardData.getData("text"):t.clipboardData&&t.clipboardData.getData&&(e=t.clipboardData.getData("text/plain")),this.pasteData(e),t.preventDefault()}onDrop(t){const e=t.dataTransfer.getData("text");this.inputElement.focus(),this.pasteData(e),t.preventDefault()}pasteData(t){const e=this.sanitizeInput(t);if(!document.execCommand("insertText",!1,e))if(this.inputElement.setRangeText){const{selectionStart:t,selectionEnd:i}=this.inputElement;this.inputElement.setRangeText(e,t,i,"end"),void 0!==window.InstallTrigger&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,e);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator)>-1)}insertAtCursor(t,e){const i=t.selectionStart,o=t.selectionEnd;t.value=t.value.substring(0,i)+e+t.value.substring(o,t.value.length);const a=i+e.length;t.focus(),t.setSelectionRange(a,a),this.triggerEvent(t,"input")}triggerEvent(t,e){if("createEvent"in document){const i=document.createEvent("HTMLEvents");i.initEvent(e,!1,!0),t.dispatchEvent(i)}}sanitizeInput(t){let e="";if(this.decimal&&this.isValidDecimal(t)){const i=new RegExp(`[^0-9${this.decimalSeparator}]`,"g");e=t.replace(i,"")}else e=t.replace(/[^0-9]/g,"");const i=this.inputElement.maxLength;if(i>0){const t=i-this.inputElement.value.length;e=t>0?e.substring(0,t):""}return e}isValidDecimal(t){if(this.hasDecimalPoint){const e=this.getSelection();return e&&e.indexOf(this.decimalSeparator)>-1?t.split(this.decimalSeparator).length<=2:t.indexOf(this.decimalSeparator)<0}return t.split(this.decimalSeparator).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart,this.inputElement.selectionEnd)}forecastValue(t){const e=this.inputElement.selectionStart,i=this.inputElement.value,o=i.substring(e,this.inputElement.selectionEnd);return o?i.replace(o,t):i.substring(0,e)+t+i.substring(e)}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(o.l))},t.\u0275dir=o.Ib({type:t,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&o.bc("keydown",(function(t){return e.onKeyDown(t)}))("paste",(function(t){return e.onPaste(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",min:"min",max:"max",pattern:"pattern"},features:[o.zb]}),t})(),r=(()=>{class t{}return t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({factory:function(e){return new(e||t)},imports:[[]]}),t})()},JUZz:function(t,e,i){"use strict";i.r(e),i.d(e,"ProductModule",(function(){return ot}));var o=i("ofXK"),a=i("tyNb"),r=i("3Pt+"),n=i("XNiG"),c=i("itXk"),s=i("1G5W"),u=i("fXoL"),l=i("AytR"),d=i("k5Ln"),m=i("tk/3");let b=(()=>{class t{constructor(t){this.http=t}getProduct(t){return this.http.get(`${l.a.API_URL+l.a.productoPrefix}/Producto/${t}`)}createProduct(t){return this.http.post(l.a.API_URL+l.a.productoPrefix+"/AddProducto",t,{headers:d.a,responseType:"text"})}updateProduct(t){return this.http.put(`${l.a.API_URL+l.a.productoPrefix}/UpdateProducto/${t.IDProducto}`,t,{headers:d.a,responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(u.Xb(m.b))},t.\u0275prov=u.Jb({token:t,factory:t.\u0275fac}),t})();var p=i("xNEF"),h=i("K8I4"),f=i("K/TF"),g=i("XiUz"),S=i("ngNO"),v=i("Wp6s"),y=i("kmnG"),D=i("d3UM"),F=i("qFsG"),T=i("FMnn"),x=i("NFeN"),I=i("bTqV"),P=i("FKr1");function w(t,e){if(1&t&&(u.Tb(0,"mat-option",19),u.Fc(1),u.Sb()),2&t){const t=e.$implicit;u.lc("value",t.IdMarca),u.Bb(1),u.Gc(t.Nombre)}}function C(t,e){1&t&&(u.Tb(0,"mat-error"),u.Fc(1," La marca es requerida "),u.Sb())}function E(t,e){if(1&t&&(u.Tb(0,"mat-option",19),u.Fc(1),u.Sb()),2&t){const t=e.$implicit;u.lc("value",t.IdCateogira),u.Bb(1),u.Gc(t.Nombre)}}function L(t,e){1&t&&(u.Tb(0,"mat-error"),u.Fc(1," La categor\xeda es requerida "),u.Sb())}function k(t,e){if(1&t&&(u.Tb(0,"mat-option",19),u.Fc(1),u.Sb()),2&t){const t=e.$implicit;u.lc("value",t.IdDimension),u.Bb(1),u.Gc(t.Nombre)}}function N(t,e){1&t&&(u.Tb(0,"mat-error"),u.Fc(1," La dimension es requerida "),u.Sb())}let O=(()=>{class t{constructor(t,e,i,o,a,r){this.formBuilder=t,this.route=e,this.router=i,this.productService=o,this.mainFacadeService=a,this.izitoastAlertService=r,this.brands=[],this.categories=[],this.dimensions=[],this.unsubscribe$=new n.a,this.buildForm(),this.productId=this.route.snapshot.paramMap.get("id")}buildForm(){this.productForm=this.formBuilder.group({IDProducto:[0,[r.v.required]],Idmarca:[null,[r.v.required]],Idcategoria:[null,[r.v.required]],Iddimension:[null,[r.v.required]],Estado:[!0,[r.v.required]],PrecioCompra:[null,[]],PrecioVenta:[null,[]]})}ngOnInit(){this.getSelectData(),this.getProductInfo()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSubmit(t){this.loading=!0,this.productId?this.productService.updateProduct(this.productForm.value).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.router.navigate(["/admin/inventory/products"])},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar el producto"),this.loading=!1}):this.productService.createProduct(this.productForm.value).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.router.navigate(["/admin/inventory/products"])},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando crear el producto"),this.loading=!1})}clear(){this.productForm.get("Idmarca").setValue(0),this.productForm.get("Idcategoria").setValue(0),this.productForm.get("Iddimension").setValue(0),this.productForm.get("PrecioCompra").setValue(0),this.productForm.get("PrecioVenta").setValue(0)}getSelectData(){this.loading=!0,this.productInfo$=Object(c.a)(this.mainFacadeService.getBrands(),this.mainFacadeService.getCategories(),this.mainFacadeService.getDimensions()),this.productInfo$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{t[0]&&t[0].length>0&&(this.brands=t[0]),t[1]&&t[1].length>0&&(this.categories=t[1]),t[2]&&t[2].length>0&&(this.dimensions=t[2]),this.loading=!1},t=>this.loading=!1)}getProductInfo(){this.clear(),this.loading=!0,this.productId&&this.productService.getProduct(this.productId).subscribe(t=>{t&&null!==t&&this.setToProductForm(t),this.loading=!1},t=>this.loading=!1)}setToProductForm(t){this.productForm.controls.IDProducto.setValue(t.Idproducto),this.productForm.controls.Idmarca.setValue(t.Idmarca),this.productForm.controls.Idcategoria.setValue(t.Idcategoria),this.productForm.controls.Iddimension.setValue(t.Iddimension),this.productForm.controls.Estado.setValue(t.Estado),this.productForm.controls.PrecioCompra.setValue(t.PrecioCompra),this.productForm.controls.PrecioVenta.setValue(t.PrecioVenta)}}return t.\u0275fac=function(e){return new(e||t)(u.Nb(r.f),u.Nb(a.a),u.Nb(a.g),u.Nb(b),u.Nb(p.a),u.Nb(h.a))},t.\u0275cmp=u.Hb({type:t,selectors:[["app-product-create"]],decls:44,vars:14,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxFlex","40",1,"m-36"],[3,"formGroup"],["appearance","outline"],["formControlName","Idmarca"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","Idcategoria"],["formControlName","Iddimension"],["appearance","outline",1,""],["matInput","","type","text","formControlName","PrecioCompra","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal"],["matSuffix",""],["matInput","","type","text","formControlName","PrecioVenta","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal"],["fxLayout","row","fxLayoutAlign","end center"],["mat-stroked-button","","color","primary","routerLink",".."],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(u.Ob(0,"app-loading-overlay",0),u.Tb(1,"div",1),u.Ob(2,"app-title-header",2),u.Tb(3,"div",3),u.Tb(4,"div",4),u.Tb(5,"mat-card"),u.Tb(6,"mat-card-title"),u.Fc(7," Datos del producto "),u.Sb(),u.Tb(8,"form",5),u.Tb(9,"mat-form-field",6),u.Tb(10,"mat-label"),u.Fc(11,"Marca"),u.Sb(),u.Tb(12,"mat-select",7),u.Dc(13,w,2,2,"mat-option",8),u.Sb(),u.Dc(14,C,2,0,"mat-error",9),u.Sb(),u.Tb(15,"mat-form-field",6),u.Tb(16,"mat-label"),u.Fc(17,"Categor\xeda"),u.Sb(),u.Tb(18,"mat-select",10),u.Dc(19,E,2,2,"mat-option",8),u.Sb(),u.Dc(20,L,2,0,"mat-error",9),u.Sb(),u.Tb(21,"mat-form-field",6),u.Tb(22,"mat-label"),u.Fc(23,"Dimensi\xf3n"),u.Sb(),u.Tb(24,"mat-select",11),u.Dc(25,k,2,2,"mat-option",8),u.Sb(),u.Dc(26,N,2,0,"mat-error",9),u.Sb(),u.Tb(27,"mat-form-field",12),u.Tb(28,"mat-label"),u.Fc(29,"Precio de compra"),u.Sb(),u.Ob(30,"input",13),u.Tb(31,"mat-icon",14),u.Fc(32,"attach_money"),u.Sb(),u.Sb(),u.Tb(33,"mat-form-field",12),u.Tb(34,"mat-label"),u.Fc(35,"Precio de venta"),u.Sb(),u.Ob(36,"input",15),u.Tb(37,"mat-icon",14),u.Fc(38,"attach_money"),u.Sb(),u.Sb(),u.Tb(39,"mat-card-actions",16),u.Tb(40,"button",17),u.Fc(41," Cancelar "),u.Sb(),u.Tb(42,"button",18),u.bc("click",(function(){return e.onSubmit(e.productForm.value)})),u.Fc(43," Guardar "),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb()),2&t&&(u.lc("isActive",e.loading),u.Bb(2),u.lc("icon","assistant")("section","Productos")("title","Nuevo producto"),u.Bb(6),u.lc("formGroup",e.productForm),u.Bb(5),u.lc("ngForOf",e.brands),u.Bb(1),u.lc("ngIf",e.productForm.get("Idmarca").hasError("required")),u.Bb(5),u.lc("ngForOf",e.categories),u.Bb(1),u.lc("ngIf",e.productForm.get("Idcategoria").hasError("required")),u.Bb(5),u.lc("ngForOf",e.dimensions),u.Bb(1),u.lc("ngIf",e.productForm.get("Iddimension").hasError("required")),u.Bb(4),u.lc("decimal",!0),u.Bb(6),u.lc("decimal",!0),u.Bb(6),u.lc("disabled",e.productForm.invalid))},directives:[f.a,g.c,S.a,g.a,v.a,v.h,r.w,r.r,r.j,y.c,y.f,D.a,r.q,r.i,o.s,o.t,F.b,r.c,r.t,T.a,x.a,y.g,v.b,g.b,I.a,a.h,P.k,y.b],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}"]}),t})();var B=i("M9IT"),A=i("+0xr");function V(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1,"No."),u.Sb())}function K(t,e){if(1&t&&(u.Tb(0,"td",23),u.Fc(1),u.Sb()),2&t){const t=e.index;u.Bb(1),u.Hc(" ",t+1," ")}}function $(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1,"Categoria"),u.Sb())}function R(t,e){if(1&t&&(u.Tb(0,"td",23),u.Fc(1),u.Sb()),2&t){const t=e.$implicit;u.Bb(1),u.Hc(" ",t.IDCategoria," ")}}function H(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1,"Marca"),u.Sb())}function q(t,e){if(1&t&&(u.Tb(0,"td",23),u.Fc(1),u.Sb()),2&t){const t=e.$implicit;u.Bb(1),u.Hc(" ",t.IDMarca," ")}}function z(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1,"Dimension"),u.Sb())}function M(t,e){if(1&t&&(u.Tb(0,"td",23),u.Fc(1),u.Sb()),2&t){const t=e.$implicit;u.Bb(1),u.Hc(" ",t.IDDimension," ")}}function G(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1," Precio de compra "),u.Sb())}function X(t,e){if(1&t&&(u.Tb(0,"td",23),u.Fc(1),u.gc(2,"currency"),u.Sb()),2&t){const t=e.$implicit;u.Bb(1),u.Hc(" ",u.ic(2,1,t.PrecioCompra,"L. ")," ")}}function j(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1," Precio de venta "),u.Sb())}function Q(t,e){if(1&t&&(u.Tb(0,"td",23),u.Fc(1),u.gc(2,"currency"),u.Sb()),2&t){const t=e.$implicit;u.Bb(1),u.Hc(" ",u.ic(2,1,t.PrecioVenta,"L. ")," ")}}function U(t,e){1&t&&(u.Tb(0,"th",22),u.Fc(1,"Acciones"),u.Sb())}function _(t,e){if(1&t&&(u.Tb(0,"td",23),u.Tb(1,"button",24),u.Tb(2,"mat-icon"),u.Fc(3,"edit"),u.Sb(),u.Sb(),u.Sb()),2&t){const t=e.$implicit;u.Bb(1),u.lc("routerLink",t.IDProducto)}}function J(t,e){1&t&&u.Ob(0,"tr",25)}function W(t,e){1&t&&u.Ob(0,"tr",26)}const Y=function(){return[10,20]},Z=[{path:"",component:(()=>{class t{constructor(t){this.mainFacadeService=t,this.displayedColumns=["#","IDMarca","IDDimension","IDCategoria","PrecioCompra","PrecioVenta","actions"],this.dataSource=new A.l([]),this.unsubscribe$=new n.a}ngOnInit(){this.getProducts()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}getProducts(){this.loading=!0,this.mainFacadeService.getProducts().subscribe(t=>{t&&t.length>0&&(this.dataSource=new A.l(t),this.dataSource.paginator=this.paginator),this.loading=!1},t=>this.loading=!1)}}return t.\u0275fac=function(e){return new(e||t)(u.Nb(p.a))},t.\u0275cmp=u.Hb({type:t,selectors:[["app-product-list"]],viewQuery:function(t,e){var i;1&t&&u.Ic(B.a,!0),2&t&&u.pc(i=u.cc())&&(e.paginator=i.first)},decls:36,vars:9,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","","routerLink","create",1,"accent"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","IDCategoria"],["matColumnDef","IDMarca"],["matColumnDef","IDDimension"],["matColumnDef","PrecioCompra"],["matColumnDef","PrecioVenta"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.Ob(0,"app-loading-overlay",0),u.Tb(1,"div",1),u.Ob(2,"app-title-header",2),u.Tb(3,"div",3),u.Tb(4,"div",4),u.Tb(5,"div",5),u.Tb(6,"button",6),u.Tb(7,"mat-icon"),u.Fc(8,"playlist_add"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(9,"div",7),u.Tb(10,"div",8),u.Tb(11,"table",9),u.Rb(12,10),u.Dc(13,V,2,0,"th",11),u.Dc(14,K,2,1,"td",12),u.Qb(),u.Rb(15,13),u.Dc(16,$,2,0,"th",11),u.Dc(17,R,2,1,"td",12),u.Qb(),u.Rb(18,14),u.Dc(19,H,2,0,"th",11),u.Dc(20,q,2,1,"td",12),u.Qb(),u.Rb(21,15),u.Dc(22,z,2,0,"th",11),u.Dc(23,M,2,1,"td",12),u.Qb(),u.Rb(24,16),u.Dc(25,G,2,0,"th",11),u.Dc(26,X,3,4,"td",12),u.Qb(),u.Rb(27,17),u.Dc(28,j,2,0,"th",11),u.Dc(29,Q,3,4,"td",12),u.Qb(),u.Rb(30,18),u.Dc(31,U,2,0,"th",11),u.Dc(32,_,4,1,"td",12),u.Qb(),u.Dc(33,J,1,0,"tr",19),u.Dc(34,W,1,0,"tr",20),u.Sb(),u.Ob(35,"mat-paginator",21),u.Sb(),u.Sb(),u.Sb(),u.Sb()),2&t&&(u.lc("isActive",e.loading),u.Bb(2),u.lc("icon","assistant")("section","Productos")("title","Listado"),u.Bb(9),u.lc("dataSource",e.dataSource),u.Bb(22),u.lc("matHeaderRowDef",e.displayedColumns),u.Bb(1),u.lc("matRowDefColumns",e.displayedColumns),u.Bb(1),u.lc("pageSizeOptions",u.mc(8,Y)))},directives:[f.a,g.c,S.a,g.b,I.a,a.h,x.a,g.a,A.k,A.c,A.e,A.b,A.g,A.j,B.a,A.d,A.a,A.f,A.i],pipes:[o.d],styles:[""]}),t})()},{path:"create",component:O},{path:":id",component:O}];let tt=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},imports:[[a.k.forChild(Z)],a.k]}),t})();var et=i("PCNd"),it=i("YUcS");let ot=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},providers:[b],imports:[[o.c,tt,et.a,it.a,r.u,T.b,A.m,B.b,x.b,I.b,y.e,F.c,v.f,D.b]]}),t})()},k5Ln:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));const o=new(i("tk/3").d)({"content-type":"application/json","Access-Control-Allow-Origin":"*"})}}]);