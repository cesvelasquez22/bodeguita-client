!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{OB9l:function(t,o,i){"use strict";i.r(o),i.d(o,"UsersModule",(function(){return ce}));var n,a=i("ofXK"),c=i("tyNb"),u=i("M9IT"),s=i("+0xr"),l=i("fXoL"),b=i("k5Ln"),m=i("AytR"),d=i("tk/3"),f=((n=function(){function t(r){e(this,t),this.http=r}return r(t,[{key:"getUsers",value:function(){return this.http.get(m.a.API_URL+m.a.usuarioPrefix+"/UsuarioList")}},{key:"getUser",value:function(e){return this.http.get("".concat(m.a.API_URL+m.a.usuarioPrefix,"/Usuario/").concat(e))}},{key:"createUser",value:function(e){return this.http.post(m.a.API_URL+m.a.usuarioPrefix+"/AddUsuario",e,{headers:b.a,responseType:"text"})}},{key:"updateUser",value:function(e){return this.http.put("".concat(m.a.API_URL+m.a.usuarioPrefix,"/UpdateUsuario/").concat(e.Idusuario),e,{headers:b.a,responseType:"text"})}}]),t}()).\u0275fac=function(e){return new(e||n)(l.Xb(d.b))},n.\u0275prov=l.Jb({token:n,factory:n.\u0275fac}),n),p=i("K/TF"),h=i("XiUz"),v=i("ngNO"),g=i("bTqV"),S=i("NFeN");function F(e,t){1&e&&(l.Tb(0,"th",21),l.Fc(1,"No."),l.Sb())}function y(e,t){if(1&e&&(l.Tb(0,"td",22),l.Fc(1),l.Sb()),2&e){var r=t.index;l.Bb(1),l.Hc(" ",r+1," ")}}function T(e,t){1&e&&(l.Tb(0,"th",21),l.Fc(1,"Nombre completo"),l.Sb())}function D(e,t){if(1&e&&(l.Tb(0,"td",22),l.Fc(1),l.Sb()),2&e){var r=t.$implicit;l.Bb(1),l.Hc(" ",r.Nombre," ")}}function w(e,t){1&e&&(l.Tb(0,"th",21),l.Fc(1,"Usuario"),l.Sb())}function N(e,t){if(1&e&&(l.Tb(0,"td",22),l.Fc(1),l.Sb()),2&e){var r=t.$implicit;l.Bb(1),l.Hc(" ",r.UserName," ")}}function C(e,t){1&e&&(l.Tb(0,"th",21),l.Fc(1,"Correo Electr\xf3nico"),l.Sb())}function I(e,t){if(1&e&&(l.Tb(0,"td",22),l.Fc(1),l.Sb()),2&e){var r=t.$implicit;l.Bb(1),l.Hc(" ",r.Correo," ")}}function U(e,t){1&e&&(l.Tb(0,"th",21),l.Fc(1," Rol "),l.Sb())}function k(e,t){if(1&e&&(l.Tb(0,"td",22),l.Fc(1),l.Sb()),2&e){var r=t.$implicit;l.Bb(1),l.Hc(" ",r.Idrole," ")}}function x(e,t){1&e&&(l.Tb(0,"th",21),l.Fc(1,"Acciones"),l.Sb())}function L(e,t){if(1&e&&(l.Tb(0,"td",22),l.Tb(1,"button",23),l.Tb(2,"mat-icon"),l.Fc(3,"edit"),l.Sb(),l.Sb(),l.Sb()),2&e){var r=t.$implicit;l.Bb(1),l.lc("routerLink",r.Idusuario)}}function A(e,t){1&e&&l.Ob(0,"tr",24)}function B(e,t){1&e&&l.Ob(0,"tr",25)}var O,R=function(){return[10,20]},q=((O=function(){function t(r){e(this,t),this.userService=r,this.displayedColumns=["Posicion","Nombre","UserName","Correo","Idrole","actions"],this.dataSource=new s.l([])}return r(t,[{key:"ngOnInit",value:function(){this.getUsers()}},{key:"getUsers",value:function(){var e=this;this.loading=!0,this.userService.getUsers().subscribe((function(t){t&&t.length>0&&(e.dataSource=new s.l(t),e.dataSource.paginator=e.paginator),e.loading=!1}),(function(t){return e.loading=!1}))}}]),t}()).\u0275fac=function(e){return new(e||O)(l.Nb(f))},O.\u0275cmp=l.Hb({type:O,selectors:[["app-user-list"]],viewQuery:function(e,t){var r;1&e&&l.Ic(u.a,!0),2&e&&l.pc(r=l.cc())&&(t.paginator=r.first)},decls:33,vars:9,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","","routerLink","create",1,"accent"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","Posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["matColumnDef","UserName"],["matColumnDef","Correo"],["matColumnDef","Idrole"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ob(0,"app-loading-overlay",0),l.Tb(1,"div",1),l.Ob(2,"app-title-header",2),l.Tb(3,"div",3),l.Tb(4,"div",4),l.Tb(5,"div",5),l.Tb(6,"button",6),l.Tb(7,"mat-icon"),l.Fc(8,"playlist_add"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(9,"div",7),l.Tb(10,"div",8),l.Tb(11,"table",9),l.Rb(12,10),l.Dc(13,F,2,0,"th",11),l.Dc(14,y,2,1,"td",12),l.Qb(),l.Rb(15,13),l.Dc(16,T,2,0,"th",11),l.Dc(17,D,2,1,"td",12),l.Qb(),l.Rb(18,14),l.Dc(19,w,2,0,"th",11),l.Dc(20,N,2,1,"td",12),l.Qb(),l.Rb(21,15),l.Dc(22,C,2,0,"th",11),l.Dc(23,I,2,1,"td",12),l.Qb(),l.Rb(24,16),l.Dc(25,U,2,0,"th",11),l.Dc(26,k,2,1,"td",12),l.Qb(),l.Rb(27,17),l.Dc(28,x,2,0,"th",11),l.Dc(29,L,4,1,"td",12),l.Qb(),l.Dc(30,A,1,0,"tr",18),l.Dc(31,B,1,0,"tr",19),l.Sb(),l.Ob(32,"mat-paginator",20),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.lc("isActive",t.loading),l.Bb(2),l.lc("icon","assistant")("section","Usuarios")("title","Listado"),l.Bb(9),l.lc("dataSource",t.dataSource),l.Bb(19),l.lc("matHeaderRowDef",t.displayedColumns),l.Bb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Bb(1),l.lc("pageSizeOptions",l.mc(8,R)))},directives:[p.a,h.c,v.a,h.b,g.a,c.h,S.a,h.a,s.k,s.c,s.e,s.b,s.g,s.j,u.a,s.d,s.a,s.f,s.i],styles:[""]}),O),E=i("3Pt+"),P=i("XNiG"),H=i("1G5W"),z=i("xNEF"),V=i("K8I4"),G=i("Wp6s"),$=i("kmnG"),_=i("qFsG"),j=i("d3UM"),Q=i("FKr1");function K(e,t){1&e&&(l.Tb(0,"mat-error"),l.Fc(1," El nombre completo es requerido "),l.Sb())}function M(e,t){1&e&&(l.Tb(0,"mat-error"),l.Fc(1," El correo es requerido "),l.Sb())}function X(e,t){1&e&&(l.Tb(0,"mat-error"),l.Fc(1," Debe ingresar una direcci\xf3n de correo v\xe1lida "),l.Sb())}function J(e,t){1&e&&(l.Tb(0,"mat-error"),l.Fc(1," El nombre del usuario es requerido "),l.Sb())}function W(e,t){if(1&e&&(l.Tb(0,"mat-option",18),l.Fc(1),l.Sb()),2&e){var r=t.$implicit;l.lc("value",r.IdRole),l.Bb(1),l.Gc(r.Nombre)}}function Y(e,t){1&e&&(l.Tb(0,"mat-error"),l.Fc(1," El rol es requerido "),l.Sb())}var Z,ee,te,re=((Z=function(){function t(r,o,i,n,a,c){e(this,t),this.formBuilder=r,this.mainFacadeService=o,this.userService=i,this.router=n,this.route=a,this.izitoastAlertService=c,this.currentDate=new Date,this.roles=[],this.unsubscribe$=new P.a,this.buildForm(),this.userId=this.route.snapshot.paramMap.get("id")}return r(t,[{key:"buildForm",value:function(){this.userForm=this.formBuilder.group({Idusuario:[0,[]],Nombre:[null,[E.v.required]],Correo:[null,[E.v.required,E.v.email]],UserName:[null,[E.v.required]],Idrole:[null,[E.v.required]],FechaCreacion:[new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()),[]],Estado:[!0,[E.v.required]]})}},{key:"ngOnInit",value:function(){this.getRoles(),this.getUserInfo()}},{key:"getRoles",value:function(){var e=this;this.loading=!0,this.mainFacadeService.getRoles().pipe(Object(H.a)(this.unsubscribe$)).subscribe((function(t){t&&t.length>0&&(e.roles=t),e.loading=!1}),(function(t){return e.loading=!0}))}},{key:"onSubmit",value:function(e){var t=this;this.loading=!0;var r=this.userForm.value;this.userId?this.userService.updateUser(r).subscribe((function(e){t.izitoastAlertService.CustomSuccessAlert(e),t.loading=!1,t.router.navigate(["/admin/admin-users/users"])}),(function(e){t.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar el usuario"),t.loading=!1})):this.userService.createUser(r).subscribe((function(e){t.izitoastAlertService.CustomSuccessAlert(e),t.loading=!1,t.router.navigate(["/admin/admin-users/users"])}),(function(e){t.izitoastAlertService.CustomErrorAlert("Hubo un error intentando crear el usuario"),t.loading=!1}))}},{key:"clear",value:function(){this.userForm.get("Nombre").setValue(null),this.userForm.get("Correo").setValue(null),this.userForm.get("UserName").setValue(null),this.userForm.get("Idrole").setValue(null)}},{key:"getUserInfo",value:function(){var e=this;this.clear(),this.loading=!0,this.userId&&this.userService.getUser(this.userId).subscribe((function(t){t&&null!==t&&e.setToUserForm(t),e.loading=!1}),(function(t){return e.loading=!1}))}},{key:"setToUserForm",value:function(e){this.userForm.controls.Idusuario.setValue(e.Idusuario),this.userForm.controls.Nombre.setValue(e.Nombre),this.userForm.controls.Correo.setValue(e.Correo),this.userForm.controls.UserName.setValue(e.UserName),this.userForm.controls.Idrole.setValue(e.Idrole)}}]),t}()).\u0275fac=function(e){return new(e||Z)(l.Nb(E.f),l.Nb(z.a),l.Nb(f),l.Nb(c.g),l.Nb(c.a),l.Nb(V.a))},Z.\u0275cmp=l.Hb({type:Z,selectors:[["app-user-create"]],decls:42,vars:12,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxFlex","40",1,"m-36"],[3,"formGroup"],["appearance","outline",1,""],["matInput","","type","text","formControlName","Nombre"],["matSuffix",""],[4,"ngIf"],["matInput","","type","text","formControlName","Correo"],["matInput","","type","text","formControlName","UserName"],["appearance","outline"],["formControlName","Idrole"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-stroked-button","","color","primary","routerLink",".."],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(l.Ob(0,"app-loading-overlay",0),l.Tb(1,"div",1),l.Ob(2,"app-title-header",2),l.Tb(3,"div",3),l.Tb(4,"div",4),l.Tb(5,"mat-card"),l.Tb(6,"mat-card-title"),l.Fc(7," Datos generales "),l.Sb(),l.Tb(8,"form",5),l.Tb(9,"mat-form-field",6),l.Tb(10,"mat-label"),l.Fc(11,"Nombre completo"),l.Sb(),l.Ob(12,"input",7),l.Tb(13,"mat-icon",8),l.Fc(14,"person_outline"),l.Sb(),l.Dc(15,K,2,0,"mat-error",9),l.Sb(),l.Tb(16,"mat-form-field",6),l.Tb(17,"mat-label"),l.Fc(18,"Correo electronico"),l.Sb(),l.Ob(19,"input",10),l.Tb(20,"mat-icon",8),l.Fc(21,"email"),l.Sb(),l.Dc(22,M,2,0,"mat-error",9),l.Dc(23,X,2,0,"mat-error",9),l.Sb(),l.Tb(24,"mat-form-field",6),l.Tb(25,"mat-label"),l.Fc(26,"Usuario"),l.Sb(),l.Ob(27,"input",11),l.Tb(28,"mat-icon",8),l.Fc(29,"vpn_key"),l.Sb(),l.Dc(30,J,2,0,"mat-error",9),l.Sb(),l.Tb(31,"mat-form-field",12),l.Tb(32,"mat-label"),l.Fc(33,"Rol"),l.Sb(),l.Tb(34,"mat-select",13),l.Dc(35,W,2,2,"mat-option",14),l.Sb(),l.Dc(36,Y,2,0,"mat-error",9),l.Sb(),l.Tb(37,"mat-card-actions",15),l.Tb(38,"button",16),l.Fc(39," Cancelar "),l.Sb(),l.Tb(40,"button",17),l.bc("click",(function(){return t.onSubmit(t.userForm.value)})),l.Fc(41," Guardar "),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.lc("isActive",t.loading),l.Bb(2),l.lc("icon","assistant")("section","Productos")("title","Nuevo producto"),l.Bb(6),l.lc("formGroup",t.userForm),l.Bb(7),l.lc("ngIf",t.userForm.get("Nombre").hasError("required")),l.Bb(7),l.lc("ngIf",t.userForm.get("Correo").hasError("required")),l.Bb(1),l.lc("ngIf",t.userForm.get("Correo").hasError("email")),l.Bb(7),l.lc("ngIf",t.userForm.get("UserName").hasError("required")),l.Bb(5),l.lc("ngForOf",t.roles),l.Bb(1),l.lc("ngIf",t.userForm.get("Idrole").hasError("required")),l.Bb(4),l.lc("disabled",t.userForm.invalid))},directives:[p.a,h.c,v.a,h.a,G.a,G.h,E.w,E.r,E.j,$.c,$.f,_.b,E.c,E.q,E.i,S.a,$.g,a.t,j.a,a.s,G.b,h.b,g.a,c.h,$.b,Q.k],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}"]}),Z),oe=[{path:"",component:q},{path:"create",component:re},{path:":id",component:re}],ie=((ee=function t(){e(this,t)}).\u0275mod=l.Lb({type:ee}),ee.\u0275inj=l.Kb({factory:function(e){return new(e||ee)},imports:[[c.k.forChild(oe)],c.k]}),ee),ne=i("PCNd"),ae=i("YUcS"),ce=((te=function t(){e(this,t)}).\u0275mod=l.Lb({type:te}),te.\u0275inj=l.Kb({factory:function(e){return new(e||te)},providers:[f],imports:[[a.c,ie,ne.a,ae.a,E.u,s.m,u.b,S.b,g.b,$.e,_.c,j.b,G.f]]}),te)},k5Ln:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var o=new(r("tk/3").d)({"content-type":"application/json","Access-Control-Allow-Origin":"*"})}}])}();