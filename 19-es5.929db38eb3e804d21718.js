!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{iTbr:function(t,r,n){"use strict";n.r(r),n.d(r,"SaleOrderModule",(function(){return $e}));var o,i=n("ofXK"),c=n("tyNb"),d=n("3Pt+"),l=n("2yde"),s=n("+0xr"),u=n("XNiG"),b=n("itXk"),m=n("1G5W"),f=n("eIep"),h=function(e){return e.Proceso="En proceso",e.Entregada="Entregada",e.Anulada="Anulada",e}({}),p=n("fXoL"),S=n("xNEF"),v=n("AytR"),g=n("k5Ln"),O=n("tk/3"),T=((o=function(){function t(a){e(this,t),this.http=a}return a(t,[{key:"getSalesOrders",value:function(){return this.http.get(v.a.API_URL+v.a.ordenesVentaPrefix+"/Lista")}},{key:"getSaleOrderDetail",value:function(e){return this.http.get("".concat(v.a.API_URL+v.a.ordenesVentaPrefix,"/OrdenVenta/").concat(e))}},{key:"createSaleOrder",value:function(e){return this.http.post(v.a.API_URL+v.a.ordenesVentaPrefix+"/AddOrdenVenta",e,{headers:g.a,responseType:"text"})}},{key:"updateSaleOrder",value:function(e){return this.http.put(v.a.API_URL+v.a.ordenesVentaPrefix+"/UpdateOrdenVenta",e,{headers:g.a,responseType:"text"})}},{key:"annulSaleOrder",value:function(e){return this.http.put(v.a.API_URL+v.a.ordenesVentaPrefix+"/AnularOrdenVenta",e,{headers:g.a,responseType:"text"})}}]),t}()).\u0275fac=function(e){return new(e||o)(p.Xb(O.b))},o.\u0275prov=p.Jb({token:o,factory:o.\u0275fac}),o),F=n("K8I4"),w=n("K/TF"),y=n("XiUz"),D=n("ngNO"),C=n("Wp6s"),I=n("bTqV"),V=n("NFeN"),k=n("kmnG"),x=n("d3UM"),P=n("FKr1"),M=n("qFsG"),B=n("iadO"),L=n("FMnn"),A=n("/t3+");function U(e,t){if(1&e&&(p.Tb(0,"mat-option",46),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.lc("value",a.IdCliente),p.Bb(1),p.Hc(" ",a.Nombre," ")}}function N(e,t){1&e&&(p.Tb(0,"mat-error"),p.Fc(1," Los datos del cliente son requeridos "),p.Sb())}function H(e,t){if(1&e&&(p.Tb(0,"div"),p.Tb(1,"div"),p.Tb(2,"strong"),p.Fc(3,"Correo: "),p.Sb(),p.Fc(4),p.Sb(),p.Sb()),2&e){var a=p.fc();p.Bb(4),p.Hc("",a.saleOrderCustomer.Correo," ")}}function R(e,t){if(1&e&&(p.Tb(0,"mat-option",46),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.lc("value",a.value),p.Bb(1),p.Hc(" ",a.value," ")}}function _(e,t){1&e&&(p.Tb(0,"mat-error"),p.Fc(1," La forma de pago es requerida "),p.Sb())}function $(e,t){1&e&&(p.Tb(0,"mat-error"),p.Fc(1," La fecha expectativa de salida es requerida "),p.Sb())}function j(e,t){if(1&e){var a=p.Ub();p.Tb(0,"div",6),p.Tb(1,"mat-form-field"),p.Tb(2,"input",47),p.bc("dateInput",(function(e){return p.uc(a),p.fc().inputExpectOutDate(e)})),p.Sb(),p.Ob(3,"mat-datepicker-toggle",48),p.Ob(4,"mat-datepicker",null,49),p.Dc(6,$,2,0,"mat-error",16),p.Sb(),p.Sb()}if(2&e){var r=p.qc(5),n=p.fc();p.Bb(2),p.lc("matDatepicker",r),p.Bb(1),p.lc("for",r),p.Bb(3),p.lc("ngIf",n.saleOrderForm.get("FechaSalida").errors)}}function G(e,t){1&e&&(p.Tb(0,"th",50),p.Fc(1,"#"),p.Sb())}function E(e,t){if(1&e&&(p.Tb(0,"td",51),p.Fc(1),p.Sb()),2&e){var a=t.index;p.Bb(1),p.Hc(" ",a+1," ")}}function Q(e,t){1&e&&(p.Tb(0,"th",50),p.Fc(1," Producto "),p.Sb())}function z(e,t){if(1&e&&(p.Tb(0,"mat-option",46),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.lc("value",a.IDProducto),p.Bb(1),p.Hc(" ",a.IDMarca+" "+a.IDDimension," ")}}function q(e,t){if(1&e){var a=p.Ub();p.Tb(0,"td",52),p.Tb(1,"mat-form-field"),p.Tb(2,"mat-label"),p.Fc(3,"Producto"),p.Sb(),p.Tb(4,"mat-select",53),p.bc("selectionChange",(function(){p.uc(a);var e=t.index;return p.fc().calculateDetailList(e)})),p.Dc(5,z,2,2,"mat-option",15),p.Sb(),p.Sb(),p.Sb()}if(2&e){var r=t.index,n=p.fc();p.lc("formGroupName",r),p.Bb(5),p.lc("ngForOf",n.products)}}function K(e,t){1&e&&(p.Tb(0,"th",50),p.Fc(1," Unidad de medida "),p.Sb())}function X(e,t){if(1&e&&(p.Tb(0,"mat-option",46),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.lc("value",a.IdUnidadesMedidas),p.Bb(1),p.Hc(" ",a.Nombre," ")}}function J(e,t){if(1&e){var a=p.Ub();p.Tb(0,"td",52),p.Tb(1,"mat-form-field"),p.Tb(2,"mat-label"),p.Fc(3,"Unidad de medida"),p.Sb(),p.Tb(4,"mat-select",54),p.bc("selectionChange",(function(){p.uc(a);var e=t.index;return p.fc().calculateDetailList(e)})),p.Dc(5,X,2,2,"mat-option",15),p.Sb(),p.Sb(),p.Sb()}if(2&e){var r=t.index,n=p.fc();p.lc("formGroupName",r),p.Bb(5),p.lc("ngForOf",n.measureUnits)}}function W(e,t){1&e&&(p.Tb(0,"th",50),p.Fc(1," Precio de venta "),p.Sb())}function Y(e,t){if(1&e&&(p.Tb(0,"td",52),p.Fc(1),p.gc(2,"number"),p.Sb()),2&e){var a=t.index,r=p.fc();p.lc("formGroupName",a),p.Bb(1),p.Hc(" L. ",p.ic(2,2,r.details[a].PrecioVenta?r.details[a].PrecioVenta:0,"0.2-2")," ")}}function Z(e,t){1&e&&(p.Tb(0,"th",50),p.Fc(1," Cantidad "),p.Sb())}function ee(e,t){if(1&e){var a=p.Ub();p.Tb(0,"mat-form-field"),p.Tb(1,"input",55),p.bc("keyup",(function(){p.uc(a);var e=p.fc().index;return p.fc().calculateDetailList(e)})),p.Sb(),p.Sb()}2&e&&(p.Bb(1),p.lc("decimal",!0))}function te(e,t){if(1&e&&(p.Tb(0,"td",52),p.Fc(1),p.gc(2,"number"),p.Dc(3,ee,2,1,"mat-form-field",16),p.Sb()),2&e){var a=t.$implicit,r=t.index,n=p.fc();p.lc("formGroupName",r),p.Bb(1),p.Hc(" ",1===n.viewModeSaleOrder?p.ic(2,3,a.Cantidad,"0.2-2"):""," "),p.Bb(2),p.lc("ngIf",2===n.viewModeSaleOrder)}}function ae(e,t){1&e&&(p.Tb(0,"th",50),p.Fc(1," Total unidad venta "),p.Sb())}function re(e,t){if(1&e&&(p.Tb(0,"td",52),p.Fc(1),p.gc(2,"number"),p.Sb()),2&e){var a=t.index,r=p.fc();p.lc("formGroupName",a),p.Bb(1),p.Hc(" L. ",p.ic(2,2,r.details[a].TotalUnidadVenta?r.details[a].TotalUnidadVenta:0,"0.2-2")," ")}}function ne(e,t){if(1&e&&(p.Tb(0,"th",50),p.Fc(1),p.Sb()),2&e){var a=p.fc();p.Bb(1),p.Hc(" ",2===a.viewModeSaleOrder?"Accion":""," ")}}function oe(e,t){if(1&e){var a=p.Ub();p.Tb(0,"button",57),p.bc("click",(function(){p.uc(a);var e=p.fc().index;return p.fc().deleteProduct(e)})),p.Tb(1,"mat-icon"),p.Fc(2,"delete"),p.Sb(),p.Sb()}}function ie(e,t){if(1&e&&(p.Tb(0,"td",52),p.Dc(1,oe,3,0,"button",56),p.Sb()),2&e){var a=t.index,r=p.fc();p.lc("formGroupName",a),p.Bb(1),p.lc("ngIf",2===r.viewModeSaleOrder)}}function ce(e,t){1&e&&p.Ob(0,"tr",58)}function de(e,t){1&e&&p.Ob(0,"tr",59)}function le(e,t){if(1&e){var a=p.Ub();p.Tb(0,"mat-toolbar",60),p.Tb(1,"mat-toolbar-row",61),p.Tb(2,"button",62),p.bc("click",(function(){return p.uc(a),p.fc().addProduct()})),p.Tb(3,"mat-icon",63),p.Fc(4,"add"),p.Sb(),p.Sb(),p.Sb(),p.Sb()}}function se(e,t){if(1&e){var a=p.Ub();p.Tb(0,"button",64),p.bc("click",(function(){return p.uc(a),p.fc().clear()})),p.Fc(1," Nuevo "),p.Sb()}}function ue(e,t){if(1&e){var a=p.Ub();p.Tb(0,"button",65),p.bc("click",(function(){return p.uc(a),p.fc().saveSaleOrder()})),p.Fc(1," Guardar "),p.Sb()}if(2&e){var r=p.fc();p.lc("disabled",r.saleOrderForm.invalid)}}function be(e,t){if(1&e){var a=p.Ub();p.Tb(0,"button",66),p.bc("click",(function(){return p.uc(a),p.fc().annulSaleOrder()})),p.Tb(1,"mat-icon"),p.Fc(2,"cancel"),p.Sb(),p.Fc(3," Anular "),p.Sb()}if(2&e){var r=p.fc();p.lc("disabled",r.saleOrderForm.invalid)}}function me(e,t){if(1&e){var a=p.Ub();p.Tb(0,"button",65),p.bc("click",(function(){return p.uc(a),p.fc().saveSaleOrder()})),p.Fc(1),p.Sb()}if(2&e){var r=p.fc();p.lc("disabled",r.saleOrderForm.invalid),p.Bb(1),p.Hc(" Emitir orden a ",r.nextState," ")}}var fe,he=((fe=function(){function t(a,r,n,o,i,c){e(this,t),this.formBuilder=a,this.route=r,this.mainFacadeService=n,this.saleOrderService=o,this.izitoastAlertService=i,this.router=c,this.currentDate=new Date,this.paymentMethod=l.a,this.customers=[],this.products=[],this.measureUnits=[],this.displayedColumns=["Posicion","Idproducto","IdunidadMedida","Cantidad","PrecioVenta","TotalUnidadVenta","Actions"],this.dataSource=new s.l([]),this.details=[],this.states=Object.keys(h).map((function(e){return{label:e,key:h[e]}})),this.unsubscribe$=new u.a,this.buildForm(),this.saleOrderId=this.route.snapshot.paramMap.get("id")}return a(t,[{key:"ngOnInit",value:function(){this.getSaleOrderInfo(),this.onChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"buildForm",value:function(){this.saleOrderForm=this.formBuilder.group({IdordenVenta:[0,[]],FechaSalida:[new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()),[d.v.required]],Idcliente:[null,[d.v.required]],Tipo:[null,[d.v.required]],SubTotal:[0,[]],Impuesto:[0,[]],Total:[0,[]],DetalleOrdenVenta:new d.d([]),IdestadoOrdenVenta:[0,[]]})}},{key:"onChanges",value:function(){var e=this;this.saleOrderForm.controls.Idcliente.valueChanges.pipe(Object(m.a)(this.unsubscribe$)).subscribe((function(t){t&&null!==t&&(e.saleOrderCustomer=e.customers.find((function(e){return e.IdCliente===t})))}))}},{key:"getSaleOrderInfo",value:function(){var e=this;this.clear(),this.loading=!0,this.saleOrderId?(this.viewModeSaleOrder=1,Object(b.a)(this.mainFacadeService.getCustomers(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits(),this.route.params.pipe(Object(f.a)((function(t){return e.saleOrderService.getSaleOrderDetail(t.id)})))).pipe(Object(m.a)(this.unsubscribe$)).subscribe((function(t){t[0]&&t[0].length>0&&(e.customers=t[0]),t[1]&&t[1].length>0&&(e.products=t[1]),t[2]&&t[2].length>0&&(e.measureUnits=t[2]),t[3]&&null!==t[3]&&e.setToForm(t[3]),e.loading=!1}),(function(t){return e.loading=!1}))):(this.viewModeSaleOrder=2,Object(b.a)(this.mainFacadeService.getCustomers(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits()).pipe(Object(m.a)(this.unsubscribe$)).subscribe((function(t){t[0]&&t[0].length>0&&(e.customers=t[0]),t[1]&&t[1].length>0&&(e.products=t[1]),t[2]&&t[2].length>0&&(e.measureUnits=t[2]),e.loading=!1}),(function(t){return e.loading=!1})))}},{key:"setToForm",value:function(e){var t=this;this.saleOrderForm.controls.IdordenVenta.setValue(e.IdordenVenta),this.saleOrderForm.controls.Idcliente.setValue(e.Idcliente),this.saleOrderForm.controls.Tipo.setValue(e.Tipo),this.saleOrderForm.controls.FechaSalida.setValue(e.FechaSalida),this.saleOrderForm.controls.SubTotal.setValue(e.SubTotal),this.saleOrderForm.controls.Impuesto.setValue(e.Impuesto),this.saleOrderForm.controls.Total.setValue(e.Total),this.saleOrderForm.controls.IdestadoOrdenVenta.setValue(e.IdestadoOrdenVenta),e.DetalleOrdenVenta&&(e.DetalleOrdenVenta.forEach((function(e){t.saleOrderForm.controls.DetalleOrdenVenta.push(t.createProduct(e))})),this.details=this.saleOrderForm.get("DetalleOrdenVenta").value,this.dataSource=new s.l(this.details)),this.nextOrderState()}},{key:"deleteProduct",value:function(e){this.saleOrderForm.get("DetalleOrdenVenta").removeAt(e),this.details=this.saleOrderForm.get("DetalleOrdenVenta").value,this.dataSource=new s.l(this.details)}},{key:"addProduct",value:function(){this.saleOrderForm.get("DetalleOrdenVenta").push(this.createProduct()),this.details=this.saleOrderForm.get("DetalleOrdenVenta").value,this.dataSource=new s.l(this.details)}},{key:"createProduct",value:function(e){if(e){var t=this.products.find((function(t){return t.IDProducto===e.Idproducto}));return this.formBuilder.group({IdordenVenta:[e.IdordenVenta,[]],Idproducto:[e.Idproducto,[]],IdunidadMedida:[e.IdunidadMedida,[]],Cantidad:[e.Cantidad,[]],PrecioVenta:[t?t.PrecioVenta:0,[]],TotalUnidadVenta:[e.TotalUnidadVenta,[]]})}return this.formBuilder.group({IdordenVenta:[0,[]],Idproducto:[null,[]],IdunidadMedida:[null,[]],Cantidad:[null,[]],PrecioVenta:[null,[]],TotalUnidadVenta:[null,[]]})}},{key:"clear",value:function(){this.saleOrderForm.controls.FechaSalida.setValue(null),this.saleOrderForm.controls.Idcliente.setValue(null),this.saleOrderForm.controls.Tipo.setValue(null),this.saleOrderForm.controls.IdestadoOrdenVenta.setValue(null),this.saleOrderForm.controls.SubTotal.setValue(0),this.saleOrderForm.controls.Impuesto.setValue(0),this.saleOrderForm.controls.Total.setValue(0),this.saleOrderForm.get("DetalleOrdenVenta").clear(),this.dataSource=new s.l([])}},{key:"calculateDetailList",value:function(e){var t=Object.assign({},this.saleOrderForm.controls.DetalleOrdenVenta.controls[e].value);t&&t.Idproducto&&(this.productSelected=this.products.find((function(e){return e.IDProducto===t.Idproducto})),this.saleOrderForm.controls.DetalleOrdenVenta.controls[e].controls.PrecioVenta.setValue(this.productSelected.PrecioVenta)),t&&t.Cantidad&&(t.Cantidad=1*t.Cantidad,this.saleOrderForm.controls.DetalleOrdenVenta.controls[e].controls.Cantidad.setValue(t.Cantidad),this.saleOrderForm.controls.DetalleOrdenVenta.controls[e].controls.TotalUnidadVenta.setValue(t.Cantidad*this.productSelected.PrecioVenta)),this.updateFooterSummary()}},{key:"updateFooterSummary",value:function(){this.details=this.saleOrderForm.get("DetalleOrdenVenta").value;var e=this.details.map((function(e){return e&&e.TotalUnidadVenta?e.TotalUnidadVenta:0})).reduce((function(e,t){return e+t}),0),t=this.details.map((function(e){return e&&e.TotalUnidadVenta?.15*e.TotalUnidadVenta:0})).reduce((function(e,t){return e+t}),0),a=e+t;this.saleOrderForm.controls.SubTotal.setValue(e),this.saleOrderForm.controls.Impuesto.setValue(t),this.saleOrderForm.controls.Total.setValue(a)}},{key:"inputExpectOutDate",value:function(e){this.saleOrderForm.get("FechaSalida").setValue(e.value._d)}},{key:"saveSaleOrder",value:function(){var e=this;this.loading=!0,this.saleOrderId?this.saleOrderService.updateSaleOrder(this.saleOrderForm.value).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1,e.router.navigate(["/admin/orders/sales-orders"])}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar la orden de venta"),e.loading=!1})):this.saleOrderService.createSaleOrder(this.saleOrderForm.value).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1,e.router.navigate(["/admin/orders/sales-orders"])}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando crear la orden de venta"),e.loading=!1}))}},{key:"annulSaleOrder",value:function(){var e=this;this.saleOrderId&&this.saleOrderService.annulSaleOrder(this.saleOrderForm.value).subscribe((function(t){e.izitoastAlertService.CustomSuccessAlert(t),e.loading=!1,e.router.navigate(["/admin/orders/sales-orders"])}),(function(t){e.izitoastAlertService.CustomErrorAlert("Hubo un error intentando anular la orden de venta"),e.loading=!1}))}},{key:"nextOrderState",value:function(){if(this.IdestadoOrdenVenta&&3!==this.IdestadoOrdenVenta)return this.nextState=this.states[this.IdestadoOrdenVenta].key,this.states[this.IdestadoOrdenVenta].label}},{key:"IdestadoOrdenVenta",get:function(){return this.saleOrderForm.controls.IdestadoOrdenVenta.value}}]),t}()).\u0275fac=function(e){return new(e||fe)(p.Nb(d.f),p.Nb(c.a),p.Nb(S.a),p.Nb(T),p.Nb(F.a),p.Nb(c.g))},fe.\u0275cmp=p.Hb({type:fe,selectors:[["app-sale-order-create"]],decls:131,vars:37,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxFlex","100",1,"m-36"],[3,"formGroup"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","center start","fxFlex","50"],["mat-mini-fab","","routerLink",".."],["src","assets/images/logos/fuse.svg","alt",""],["fxLayout","column","fxLayoutAlign","end end","fxFlex","50"],[1,"select-customer"],[1,"mat-subheading-2"],["formControlName","Idcliente"],["clienteSelect",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","50"],["fxLayout","row","fxFlex","33",1,"sale-order-features"],[2,"width","100%"],["formControlName","Tipo"],["fxLayout","row",4,"ngIf"],["fxLayout","column",1,"mx-12","mt-12"],["mat-table","","formArrayName","DetalleOrdenVenta",3,"dataSource"],["matColumnDef","Posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Idproducto"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","IdunidadMedida"],["matColumnDef","PrecioVenta"],["matColumnDef","Cantidad"],["matColumnDef","TotalUnidadVenta"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","background: white",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","end center",1,"summary-body"],["fxLayout","row",2,"width","50%"],["fxLayout","column","fxLayoutAlign","start end","fxFlex","50"],[1,"left-align"],[1,"right-align"],["fxLayout","row","fxLayoutAlign","end center",2,"padding","1%"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn","style","color: white",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","readonly","","formControlName","FechaSalida",3,"matDatepicker","dateInput"],["matSuffix","",3,"for"],["expectOutDate",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"formGroupName"],["formControlName","Idproducto",3,"selectionChange"],["formControlName","IdunidadMedida",3,"selectionChange"],["matInput","","type","text","formControlName","Cantidad","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal","keyup"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[2,"background","white"],[2,"padding","0%"],["mat-mini-fab","",1,"accent",3,"click"],[2,"color","white"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",2,"color","white",3,"disabled","click"]],template:function(e,t){1&e&&(p.Ob(0,"app-loading-overlay",0),p.Tb(1,"div",1),p.Ob(2,"app-title-header",2),p.Tb(3,"div",3),p.Tb(4,"div",4),p.Tb(5,"mat-card"),p.Tb(6,"form",5),p.Tb(7,"div",6),p.Tb(8,"div",7),p.Tb(9,"button",8),p.Tb(10,"mat-icon"),p.Fc(11,"arrow_back"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(12,"div",3),p.Tb(13,"div",7),p.Ob(14,"img",9),p.Sb(),p.Tb(15,"div",10),p.Tb(16,"div",11),p.Tb(17,"div",6),p.Tb(18,"div",7),p.Tb(19,"span",12),p.Tb(20,"strong"),p.Fc(21,"Informacion del cliente"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(22,"div",6),p.Tb(23,"mat-form-field"),p.Tb(24,"mat-label"),p.Fc(25,"Cliente"),p.Sb(),p.Tb(26,"mat-select",13,14),p.Dc(28,U,2,2,"mat-option",15),p.Sb(),p.Dc(29,N,2,0,"mat-error",16),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(30,"div",6),p.Tb(31,"div",17),p.Tb(32,"div"),p.Tb(33,"strong"),p.Fc(34,"RTN: "),p.Sb(),p.Fc(35,"05011955522252"),p.Sb(),p.Tb(36,"div"),p.Tb(37,"strong"),p.Fc(38,"Direccion: "),p.Sb(),p.Fc(39,"San Pedro Sula, Honduras "),p.Sb(),p.Tb(40,"div"),p.Tb(41,"strong"),p.Fc(42,"Email: "),p.Sb(),p.Fc(43,"bodeguitabendicion@gmail.com "),p.Sb(),p.Tb(44,"div"),p.Tb(45,"strong"),p.Fc(46,"Telefono: "),p.Sb(),p.Fc(47,"98989898"),p.Sb(),p.Sb(),p.Tb(48,"div",17),p.Dc(49,H,5,1,"div",16),p.Sb(),p.Sb(),p.Tb(50,"div",3),p.Tb(51,"div",18),p.Tb(52,"div",19),p.Tb(53,"span",12),p.Tb(54,"strong"),p.Fc(55,"Forma de pago"),p.Sb(),p.Sb(),p.Tb(56,"div",6),p.Tb(57,"mat-form-field"),p.Tb(58,"mat-label"),p.Fc(59,"Pago"),p.Sb(),p.Tb(60,"mat-select",20),p.Dc(61,R,2,2,"mat-option",15),p.gc(62,"keyvalue"),p.Sb(),p.Dc(63,_,2,0,"mat-error",16),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(64,"div",18),p.Tb(65,"div",19),p.Tb(66,"span",12),p.Tb(67,"strong"),p.Fc(68,"Fecha expectativa de salida"),p.Sb(),p.Fc(69),p.gc(70,"date"),p.Sb(),p.Dc(71,j,7,3,"div",21),p.Sb(),p.Sb(),p.Sb(),p.Tb(72,"div",22),p.Tb(73,"table",23),p.Rb(74,24),p.Dc(75,G,2,0,"th",25),p.Dc(76,E,2,1,"td",26),p.Qb(),p.Rb(77,27),p.Dc(78,Q,2,0,"th",25),p.Dc(79,q,6,2,"td",28),p.Qb(),p.Rb(80,29),p.Dc(81,K,2,0,"th",25),p.Dc(82,J,6,2,"td",28),p.Qb(),p.Rb(83,30),p.Dc(84,W,2,0,"th",25),p.Dc(85,Y,3,5,"td",28),p.Qb(),p.Rb(86,31),p.Dc(87,Z,2,0,"th",25),p.Dc(88,te,4,6,"td",28),p.Qb(),p.Rb(89,32),p.Dc(90,ae,2,0,"th",25),p.Dc(91,re,3,5,"td",28),p.Qb(),p.Rb(92,33),p.Dc(93,ne,2,1,"th",25),p.Dc(94,ie,2,2,"td",28),p.Qb(),p.Dc(95,ce,1,0,"tr",34),p.Dc(96,de,1,0,"tr",35),p.Sb(),p.Dc(97,le,5,0,"mat-toolbar",36),p.Sb(),p.Tb(98,"div",37),p.Tb(99,"div",38),p.Tb(100,"div",39),p.Tb(101,"div",40),p.Tb(102,"span",12),p.Tb(103,"strong"),p.Fc(104,"Subtotal"),p.Sb(),p.Sb(),p.Sb(),p.Tb(105,"div",40),p.Tb(106,"span",12),p.Tb(107,"strong"),p.Fc(108,"Impuesto"),p.Sb(),p.Sb(),p.Sb(),p.Tb(109,"div",40),p.Tb(110,"span",12),p.Tb(111,"strong"),p.Fc(112,"Total"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(113,"div",39),p.Tb(114,"div",41),p.Tb(115,"span",12),p.Fc(116),p.gc(117,"number"),p.Sb(),p.Sb(),p.Tb(118,"div",41),p.Tb(119,"span",12),p.Fc(120),p.gc(121,"number"),p.Sb(),p.Sb(),p.Tb(122,"div",41),p.Tb(123,"span",12),p.Fc(124),p.gc(125,"number"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(126,"mat-card-actions",42),p.Dc(127,se,2,0,"button",43),p.Dc(128,ue,2,1,"button",44),p.Dc(129,be,4,1,"button",45),p.Dc(130,me,2,2,"button",44),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&e&&(p.lc("isActive",t.loading),p.Bb(2),p.lc("icon","assistant")("section","\xd3rdenes de venta")("title","Detalle orden de venta"),p.Bb(4),p.lc("formGroup",t.saleOrderForm),p.Bb(22),p.lc("ngForOf",t.customers),p.Bb(1),p.lc("ngIf",t.saleOrderForm.get("Idcliente").errors),p.Bb(20),p.lc("ngIf",2===t.viewModeSaleOrder&&t.saleOrderCustomer),p.Bb(12),p.lc("ngForOf",p.hc(62,23,t.paymentMethod)),p.Bb(2),p.lc("ngIf",t.saleOrderForm.get("Tipo").errors),p.Bb(6),p.Hc(" ",1===t.viewModeSaleOrder&&t.saleOrderForm.get("FechaSalida").value?p.ic(70,25,t.saleOrderForm.get("FechaSalida").value,"dd/MM/yyyy"):""," "),p.Bb(2),p.lc("ngIf",2===t.viewModeSaleOrder),p.Bb(2),p.lc("dataSource",t.dataSource),p.Bb(22),p.lc("matHeaderRowDef",t.displayedColumns),p.Bb(1),p.lc("matRowDefColumns",t.displayedColumns),p.Bb(1),p.lc("ngIf",2===t.viewModeSaleOrder),p.Bb(19),p.Hc(" L. ",p.ic(117,28,t.saleOrderForm.get("SubTotal").value?t.saleOrderForm.get("SubTotal").value:0,"0.2-2")," "),p.Bb(4),p.Hc(" L. ",p.ic(121,31,t.saleOrderForm.get("Impuesto").value?t.saleOrderForm.get("Impuesto").value:0,"0.2-2")," "),p.Bb(4),p.Hc(" L. ",p.ic(125,34,t.saleOrderForm.get("Total").value?t.saleOrderForm.get("Total").value:0,"0.2-2")," "),p.Bb(3),p.lc("ngIf",2===t.viewModeSaleOrder),p.Bb(1),p.lc("ngIf",2===t.viewModeSaleOrder),p.Bb(1),p.lc("ngIf",1===t.viewModeSaleOrder&&2!==t.IdestadoOrdenVenta&&3!==t.IdestadoOrdenVenta),p.Bb(1),p.lc("ngIf",1===t.viewModeSaleOrder&&2!==t.IdestadoOrdenVenta&&3!==t.IdestadoOrdenVenta))},directives:[w.a,y.c,D.a,y.a,C.a,d.w,d.r,d.j,y.b,I.a,c.h,V.a,k.c,k.f,x.a,d.q,d.i,i.s,i.t,s.k,d.e,s.c,s.e,s.b,s.g,s.j,C.b,P.k,k.b,M.b,d.c,B.b,B.d,k.g,B.a,s.d,s.a,d.k,d.t,L.a,s.f,s.i,A.a,A.c],pipes:[i.l,i.f,i.g],styles:[".select-customer[_ngcontent-%COMP%]{width:100%;display:block}.select-customer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.sale-order-features[_ngcontent-%COMP%]{margin:1%}.sale-order-features[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:12px;width:98%;padding:0 2%}.summary-body[_ngcontent-%COMP%]{margin:1%}.mat-column-Posicion[_ngcontent-%COMP%]{width:5%!important}.mat-column-IDProducto[_ngcontent-%COMP%], .mat-column-Posicion[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-IDProducto[_ngcontent-%COMP%]{width:27%!important}.mat-column-IDUnidadMedida[_ngcontent-%COMP%]{width:20%!important}.mat-column-Cantidad[_ngcontent-%COMP%], .mat-column-IDUnidadMedida[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Cantidad[_ngcontent-%COMP%]{width:6%!important}.mat-column-PrecioVenta[_ngcontent-%COMP%], .mat-column-TotalUnidadVenta[_ngcontent-%COMP%]{width:16%!important}.mat-column-Actions[_ngcontent-%COMP%], .mat-column-PrecioVenta[_ngcontent-%COMP%], .mat-column-TotalUnidadVenta[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Actions[_ngcontent-%COMP%]{width:10%!important}"]}),fe),pe=n("M9IT");function Se(e,t){1&e&&(p.Tb(0,"th",30),p.Fc(1,"#"),p.Sb())}function ve(e,t){if(1&e&&(p.Tb(0,"td",31),p.Fc(1),p.Sb()),2&e){var a=t.index;p.Bb(1),p.Hc(" ",a+1," ")}}function ge(e,t){1&e&&(p.Tb(0,"th",30),p.Fc(1,"Cliente"),p.Sb())}function Oe(e,t){if(1&e&&(p.Tb(0,"td",31),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.Bb(1),p.Hc(" ",a.idCliente," ")}}function Te(e,t){1&e&&(p.Tb(0,"th",30),p.Fc(1,"Forma de pago"),p.Sb())}function Fe(e,t){if(1&e&&(p.Tb(0,"td",31),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.Bb(1),p.Hc(" ",a.tipo," ")}}function we(e,t){1&e&&(p.Tb(0,"th",30),p.Fc(1," Fecha de Emisi\xf3n "),p.Sb())}function ye(e,t){if(1&e&&(p.Tb(0,"td",31),p.Fc(1),p.gc(2,"date"),p.Sb()),2&e){var a=t.$implicit;p.Bb(1),p.Hc(" ",p.ic(2,1,a.fechaCreacion,"dd/MM/yyyy")," ")}}function De(e,t){1&e&&(p.Tb(0,"th",30),p.Fc(1," Fecha de Venta "),p.Sb())}function Ce(e,t){if(1&e&&(p.Tb(0,"td",31),p.Fc(1),p.gc(2,"date"),p.Sb()),2&e){var a=t.$implicit;p.Bb(1),p.Hc(" ",p.ic(2,1,a.fechaSalida,"dd/MM/yyyy")," ")}}function Ie(e,t){1&e&&(p.Tb(0,"th",30),p.Fc(1,"Acciones"),p.Sb())}function Ve(e,t){if(1&e&&(p.Tb(0,"td",31),p.Tb(1,"button",32),p.Tb(2,"mat-icon"),p.Fc(3,"search"),p.Sb(),p.Sb(),p.Sb()),2&e){var a=t.$implicit;p.Bb(1),p.lc("routerLink",a.idOrdenVenta)}}function ke(e,t){1&e&&(p.Tb(0,"tr",33),p.Tb(1,"td",34),p.Fc(2,"No se encontraron \xf3rdenes"),p.Sb(),p.Sb())}function xe(e,t){1&e&&p.Ob(0,"tr",35)}function Pe(e,t){1&e&&p.Ob(0,"tr",36)}function Me(e,t){if(1&e&&(p.Tb(0,"mat-option",37),p.Fc(1),p.Sb()),2&e){var a=t.$implicit;p.lc("value",a.key),p.Bb(1),p.Hc(" ",a.value," ")}}var Be,Le,Ae,Ue=function(){return[10,20]},Ne=[{path:"",component:(Be=function(){function t(a){e(this,t),this.saleOrderService=a,this.displayedColumns=["posicion","fechaCreacion","fechaSalida","idCliente","tipo","actions"],this.dataSource=new s.l([]),this.filterBy=new d.g("Proceso"),this.status=h,this.unsubscribe$=new u.a}return a(t,[{key:"ngOnInit",value:function(){this.getSalesOrders(),this.onChangeStates()}},{key:"getSalesOrders",value:function(){var e=this;this.loading=!0,this.saleOrderService.getSalesOrders().pipe(Object(m.a)(this.unsubscribe$)).subscribe((function(t){t&&t.length>0&&(e.dataSource=new s.l(t),e.dataSource.paginator=e.paginator,e.dataSource.filter=e.filterBy.value),e.loading=!1}),(function(t){return e.loading=!1}))}},{key:"onChangeStates",value:function(){var e=this;this.filterBy.valueChanges.pipe(Object(m.a)(this.unsubscribe$)).subscribe((function(t){t&&null!==t&&(e.dataSource.filter=t)}))}}]),t}(),Be.\u0275fac=function(e){return new(e||Be)(p.Nb(T))},Be.\u0275cmp=p.Hb({type:Be,selectors:[["app-sale-order-list"]],viewQuery:function(e,t){var a;1&e&&p.Ic(pe.a,!0),2&e&&p.pc(a=p.cc())&&(t.paginator=a.first)},decls:45,vars:13,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","","routerLink","create",1,"accent"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","idCliente"],["matColumnDef","tipo"],["matColumnDef","fechaCreacion"],["matColumnDef","fechaSalida"],["matColumnDef","actions"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"padding","0%"],["fxLayout","row","fxLayoutAlign","start","fxFlex","100",2,"background-color","white"],["fxLayout","row","fxFlex","","fxLayoutAlign","start center"],[1,"filter-by"],[2,"margin","0 10px"],["appearance",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"routerLink"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-header-row",""],["mat-row",""],[3,"value"]],template:function(e,t){1&e&&(p.Ob(0,"app-loading-overlay",0),p.Tb(1,"div",1),p.Ob(2,"app-title-header",2),p.Tb(3,"div",3),p.Tb(4,"div",4),p.Tb(5,"div",5),p.Tb(6,"button",6),p.Tb(7,"mat-icon"),p.Fc(8,"playlist_add"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(9,"div",7),p.Tb(10,"div",8),p.Tb(11,"table",9),p.Rb(12,10),p.Dc(13,Se,2,0,"th",11),p.Dc(14,ve,2,1,"td",12),p.Qb(),p.Rb(15,13),p.Dc(16,ge,2,0,"th",11),p.Dc(17,Oe,2,1,"td",12),p.Qb(),p.Rb(18,14),p.Dc(19,Te,2,0,"th",11),p.Dc(20,Fe,2,1,"td",12),p.Qb(),p.Rb(21,15),p.Dc(22,we,2,0,"th",11),p.Dc(23,ye,3,4,"td",12),p.Qb(),p.Rb(24,16),p.Dc(25,De,2,0,"th",11),p.Dc(26,Ce,3,4,"td",12),p.Qb(),p.Rb(27,17),p.Dc(28,Ie,2,0,"th",11),p.Dc(29,Ve,4,1,"td",12),p.Qb(),p.Dc(30,ke,3,0,"tr",18),p.Dc(31,xe,1,0,"tr",19),p.Dc(32,Pe,1,0,"tr",20),p.Sb(),p.Tb(33,"mat-toolbar"),p.Tb(34,"mat-toolbar-row",21),p.Tb(35,"div",22),p.Tb(36,"div",23),p.Tb(37,"div",24),p.Tb(38,"mat-label",25),p.Fc(39,"Filtrar por:"),p.Sb(),p.Tb(40,"mat-form-field",26),p.Tb(41,"mat-select",27),p.Dc(42,Me,2,2,"mat-option",28),p.gc(43,"keyvalue"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Ob(44,"mat-paginator",29),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&e&&(p.lc("isActive",t.loading),p.Bb(2),p.lc("icon","assistant")("section","\xd3rdenes de Ventas")("title","Listado"),p.Bb(9),p.lc("dataSource",t.dataSource),p.Bb(20),p.lc("matHeaderRowDef",t.displayedColumns),p.Bb(1),p.lc("matRowDefColumns",t.displayedColumns),p.Bb(9),p.lc("formControl",t.filterBy),p.Bb(1),p.lc("ngForOf",p.hc(43,10,t.status)),p.Bb(2),p.lc("pageSizeOptions",p.mc(12,Ue)))},directives:[w.a,y.c,D.a,y.b,I.a,c.h,V.a,y.a,s.k,s.c,s.e,s.b,s.h,s.g,s.j,A.a,A.c,k.f,k.c,x.a,d.q,d.h,i.s,pe.a,s.d,s.a,s.f,s.i,P.k],pipes:[i.l,i.f],styles:[""]}),Be)},{path:"create",component:he},{path:":id",component:he}],He=((Le=function t(){e(this,t)}).\u0275mod=p.Lb({type:Le}),Le.\u0275inj=p.Kb({factory:function(e){return new(e||Le)},imports:[[c.k.forChild(Ne)],c.k]}),Le),Re=n("YUcS"),_e=n("PCNd"),$e=((Ae=function t(){e(this,t)}).\u0275mod=p.Lb({type:Ae}),Ae.\u0275inj=p.Kb({factory:function(e){return new(e||Ae)},providers:[T],imports:[[i.c,He,_e.a,Re.a,d.u,L.b,s.m,pe.b,V.b,I.b,k.e,C.f,M.c,x.b,B.c,A.b]]}),Ae)}}])}();