(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"8syz":function(t,e,o){"use strict";o.r(e),o.d(e,"RolesModule",(function(){return K}));var i=o("ofXK"),r=o("tyNb"),a=o("M9IT"),n=o("+0xr"),c=o("XNiG"),l=o("1G5W"),s=o("0IaG"),b=o("fXoL"),u=o("3Pt+"),d=o("2Vo4");let m=(()=>{class t{constructor(){this.newRole=new d.a(null),this.newRole$=this.newRole.asObservable()}addRole(t){this.newRole.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=o("kmnG"),f=o("qFsG"),p=o("XiUz"),g=o("bTqV");function R(t,e){1&t&&(b.Tb(0,"mat-error"),b.Fc(1," Completa este campo "),b.Sb())}let S=(()=>{class t{constructor(t,e,o,i){this.formBuilder=t,this.createRoleService=e,this.dialogRef=o,this.data=i,this.roleForm=this.formBuilder.group({IdRole:[0,[]],Nombre:[null,[]],Descripcion:[null,[]],edit:[!(!this.data||!this.data.editRole)]})}ngOnInit(){this.title="Nuevo",this.data&&!0===this.roleForm.controls.edit.value&&(this.setToForm(this.data.editRole),this.title="Editar")}onSubmit(t){this.data&&this.data.editRole&&this.onCancel(),this.createRoleService.addRole(this.roleForm.value),this.dialogRef.close(""+this.roleForm.value),this.createRoleService.addRole(null),this.clear()}setToForm(t){this.roleForm.controls.IdRole.setValue(t.IdRole),this.roleForm.controls.Nombre.setValue(t.Nombre),this.roleForm.controls.Descripcion.setValue(t.Descripcion)}clear(){this.roleForm.reset(),this.roleForm.controls.Nombre.setValue(null),this.roleForm.controls.Descripcion.setValue(null)}onCancel(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(u.f),b.Nb(m),b.Nb(s.f),b.Nb(s.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-role-create"]],decls:18,vars:4,consts:[[1,"role-dialog",3,"formGroup","ngSubmit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","formControlName","Nombre"],["matInput","","formControlName","Descripcion","maxlength","500"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-stroked-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","primary",3,"disabled"]],template:function(t,e){1&t&&(b.Tb(0,"form",0),b.bc("ngSubmit",(function(){return e.onSubmit(e.roleForm)})),b.Tb(1,"h1",1),b.Fc(2),b.Sb(),b.Tb(3,"mat-dialog-content"),b.Tb(4,"mat-form-field",2),b.Tb(5,"mat-label"),b.Fc(6,"Rol"),b.Sb(),b.Ob(7,"input",3),b.Sb(),b.Tb(8,"mat-form-field",2),b.Tb(9,"mat-label"),b.Fc(10,"Descripci\xf3n del rol"),b.Sb(),b.Ob(11,"textarea",4),b.Dc(12,R,2,0,"mat-error",5),b.Sb(),b.Sb(),b.Tb(13,"mat-dialog-actions",6),b.Tb(14,"button",7),b.bc("click",(function(){return e.dialogRef.close()})),b.Fc(15," Cancelar "),b.Sb(),b.Tb(16,"button",8),b.Fc(17," Guardar "),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.lc("formGroup",e.roleForm),b.Bb(2),b.Hc("",e.title," rol"),b.Bb(10),b.lc("ngIf",e.roleForm.get("Descripcion").hasError("required")),b.Bb(4),b.lc("disabled",e.roleForm.invalid))},directives:[u.w,u.r,u.j,s.g,s.d,h.c,h.f,f.b,u.c,u.q,u.i,u.m,i.t,s.c,p.c,p.b,g.a,h.b],styles:[".role-dialog[_ngcontent-%COMP%]{width:100%;display:block}.role-dialog[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var v=o("xNEF"),w=o("k5Ln"),F=o("AytR"),D=o("tk/3");let y=(()=>{class t{constructor(t){this.http=t}getRole(t){return this.http.get(`${F.a.API_URL+F.a.rolesPrefix}/Role/${t}`)}createRole(t){return this.http.post(F.a.API_URL+F.a.rolesPrefix+"/AddRole",t,{headers:w.a,responseType:"text"})}updateRole(t){return this.http.put(`${F.a.API_URL+F.a.rolesPrefix}/UpdateRole/${t.IdRole}`,t,{headers:w.a,responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(b.Xb(D.b))},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=o("K8I4"),C=o("K/TF"),N=o("ngNO"),x=o("NFeN");function A(t,e){1&t&&(b.Tb(0,"th",19),b.Fc(1,"No."),b.Sb())}function k(t,e){if(1&t&&(b.Tb(0,"td",20),b.Fc(1),b.Sb()),2&t){const t=e.index;b.Bb(1),b.Hc(" ",t+1," ")}}function L(t,e){1&t&&(b.Tb(0,"th",19),b.Fc(1,"Rol"),b.Sb())}function I(t,e){if(1&t&&(b.Tb(0,"td",20),b.Fc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Hc(" ",t.Nombre," ")}}function O(t,e){1&t&&(b.Tb(0,"th",19),b.Fc(1,"Descripci\xf3n del rol"),b.Sb())}function B(t,e){if(1&t&&(b.Tb(0,"td",20),b.Fc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Hc(" ",t.Descripcion," ")}}function P(t,e){1&t&&(b.Tb(0,"th",19),b.Fc(1,"Acciones"),b.Sb())}function $(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",20),b.Tb(1,"button",21),b.bc("click",(function(){b.uc(t);const o=e.$implicit;return b.fc().roleDialog(o,!0)})),b.Tb(2,"mat-icon"),b.Fc(3,"edit"),b.Sb(),b.Sb(),b.Sb()}}function z(t,e){1&t&&b.Ob(0,"tr",22)}function H(t,e){1&t&&b.Ob(0,"tr",23)}const G=function(){return[10,20]},U=[{path:"",component:(()=>{class t{constructor(t,e,o,i,r){this.mainFacadeService=t,this.createRoleDialog=e,this.createRoleService=o,this.roleService=i,this.izitoastAlertService=r,this.displayedColumns=["Posicion","Nombre","Descripcion","actions"],this.dataSource=new n.l([]),this.unsubscribe$=new c.a}ngOnInit(){this.getRoles(),this.listenRoleChanges()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}getRoles(){this.loading=!0,this.mainFacadeService.getRoles().subscribe(t=>{t&&t.length>0&&(this.dataSource=new n.l(t),this.dataSource.paginator=this.paginator),this.loading=!1},t=>this.loading=!1)}roleDialog(t,e){this.createRoleDialog.open(S,{data:{editRole:e?t:null},width:"auto",disableClose:!1,autoFocus:!1})}listenRoleChanges(){this.createRoleService.newRole$.pipe(Object(l.a)(this.unsubscribe$)).subscribe(t=>{console.log(t),t&&null!==t&&(t.edit?this.updateRole(t):this.addRole(t))})}addRole(t){this.loading=!0,this.roleService.createRole(t).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.getRoles()},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando agregar el rol de usuario"),this.loading=!1})}updateRole(t){this.loading=!0,this.roleService.updateRole(t).subscribe(t=>{this.izitoastAlertService.CustomSuccessAlert(t),this.loading=!1,this.getRoles()},t=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar el rol de usuario"),this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(v.a),b.Nb(s.b),b.Nb(m),b.Nb(y),b.Nb(T.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-role-list"]],viewQuery:function(t,e){var o;1&t&&b.Ic(a.a,!0),2&t&&b.pc(o=b.cc())&&(e.paginator=o.first)},decls:27,vars:9,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","",1,"accent",3,"click"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","Posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["matColumnDef","Descripcion"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Ob(0,"app-loading-overlay",0),b.Tb(1,"div",1),b.Ob(2,"app-title-header",2),b.Tb(3,"div",3),b.Tb(4,"div",4),b.Tb(5,"div",5),b.Tb(6,"button",6),b.bc("click",(function(){return e.roleDialog()})),b.Tb(7,"mat-icon"),b.Fc(8,"playlist_add"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(9,"div",7),b.Tb(10,"div",8),b.Tb(11,"table",9),b.Rb(12,10),b.Dc(13,A,2,0,"th",11),b.Dc(14,k,2,1,"td",12),b.Qb(),b.Rb(15,13),b.Dc(16,L,2,0,"th",11),b.Dc(17,I,2,1,"td",12),b.Qb(),b.Rb(18,14),b.Dc(19,O,2,0,"th",11),b.Dc(20,B,2,1,"td",12),b.Qb(),b.Rb(21,15),b.Dc(22,P,2,0,"th",11),b.Dc(23,$,4,0,"td",12),b.Qb(),b.Dc(24,z,1,0,"tr",16),b.Dc(25,H,1,0,"tr",17),b.Sb(),b.Ob(26,"mat-paginator",18),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.lc("isActive",e.loading),b.Bb(2),b.lc("icon","assistant")("section","Roles de usuario")("title","Listado"),b.Bb(9),b.lc("dataSource",e.dataSource),b.Bb(13),b.lc("matHeaderRowDef",e.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",e.displayedColumns),b.Bb(1),b.lc("pageSizeOptions",b.mc(8,G)))},directives:[C.a,p.c,N.a,p.b,g.a,x.a,p.a,n.k,n.c,n.e,n.b,n.g,n.j,a.a,n.d,n.a,n.f,n.i],styles:[""]}),t})()},{path:"create",component:S}];let V=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[r.k.forChild(U)],r.k]}),t})();var _=o("PCNd"),j=o("YUcS"),M=o("d3UM"),E=o("Wp6s");let K=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[i.c,V,_.a,j.a,u.u,n.m,a.b,x.b,g.b,h.e,f.c,M.b,E.f,s.e]]}),t})()},k5Ln:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));const i=new(o("tk/3").d)({"content-type":"application/json","Access-Control-Allow-Origin":"*"})}}]);