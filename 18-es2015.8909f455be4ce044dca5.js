(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Jvpd:function(e,t,r){"use strict";r.r(t),r.d(t,"PurchaseOrderModule",(function(){return Ae}));var a=r("ofXK"),o=r("tyNb"),c=r("3Pt+"),i=r("2yde"),n=r("XNiG"),d=r("itXk"),s=r("1G5W"),u=r("eIep"),l=r("+0xr"),b=function(e){return e.Compra="Adquisici\xf3n o compra",e.Pendiente="Pendiente",e.Espera="Espera de entrega",e.Entregada="Entregada",e.Anulada="Anulada",e}({}),m=r("fXoL"),p=r("xNEF"),h=r("k5Ln"),f=r("AytR"),g=r("tk/3");let S=(()=>{class e{constructor(e){this.http=e}getPurchaseOrders(){return this.http.get(f.a.API_URL+f.a.ordenesCompraPrefix+"/Lista")}getPurchaseOrderDetail(e){return this.http.get(`${f.a.API_URL+f.a.ordenesCompraPrefix}/OrdenCompra/${e}`)}createPurchaseOrder(e){return this.http.post(f.a.API_URL+f.a.ordenesCompraPrefix+"/AddOrdenCompra",e,{headers:h.a,responseType:"text"})}updatePurchaseOrder(e){return this.http.put(f.a.API_URL+f.a.ordenesCompraPrefix+"/UpdateOrdenCompra",e,{headers:h.a,responseType:"text"})}annulPurchaseOrder(e){return this.http.put(f.a.API_URL+f.a.ordenesCompraPrefix+"/AnularOrdenCompra",e,{headers:h.a,responseType:"text"})}}return e.\u0275fac=function(t){return new(t||e)(m.Xb(g.b))},e.\u0275prov=m.Jb({token:e,factory:e.\u0275fac}),e})();var v=r("K8I4"),O=r("K/TF"),T=r("XiUz"),F=r("ngNO"),C=r("Wp6s"),w=r("bTqV"),D=r("NFeN"),P=r("kmnG"),y=r("d3UM"),I=r("FKr1"),x=r("qFsG"),k=r("iadO"),B=r("FMnn"),M=r("/t3+");function L(e,t){if(1&e&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.lc("value",e.IdProveedor),m.Bb(1),m.Hc(" ",e.Nombre," ")}}function A(e,t){1&e&&(m.Tb(0,"mat-error"),m.Fc(1," Los datos del proveedor son requeridos "),m.Sb())}function U(e,t){if(1&e&&(m.Tb(0,"div"),m.Tb(1,"div"),m.Tb(2,"strong"),m.Fc(3,"Direcci\xf3n: "),m.Sb(),m.Fc(4),m.Sb(),m.Tb(5,"div"),m.Tb(6,"strong"),m.Fc(7,"Telefono: "),m.Sb(),m.Fc(8),m.Sb(),m.Sb()),2&e){const e=m.fc();m.Bb(4),m.Hc("",e.purchaseOrderProvider.Direccion," "),m.Bb(4),m.Hc("",e.purchaseOrderProvider.Telefono," ")}}function N(e,t){if(1&e&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.lc("value",e.value),m.Bb(1),m.Hc(" ",e.value," ")}}function H(e,t){1&e&&(m.Tb(0,"mat-error"),m.Fc(1," La forma de pago es requerida "),m.Sb())}function R(e,t){1&e&&(m.Tb(0,"mat-error"),m.Fc(1," La fecha expectativa es requerida "),m.Sb())}function _(e,t){if(1&e){const e=m.Ub();m.Tb(0,"div",6),m.Tb(1,"mat-form-field"),m.Tb(2,"input",47),m.bc("dateInput",(function(t){return m.uc(e),m.fc().inputExpectDate(t)})),m.Sb(),m.Ob(3,"mat-datepicker-toggle",48),m.Ob(4,"mat-datepicker",null,49),m.Dc(6,R,2,0,"mat-error",16),m.Sb(),m.Sb()}if(2&e){const e=m.qc(5),t=m.fc();m.Bb(2),m.lc("matDatepicker",e),m.Bb(1),m.lc("for",e),m.Bb(3),m.lc("ngIf",t.purchaseOrderForm.get("FechaEspectativa").errors)}}function E(e,t){1&e&&(m.Tb(0,"th",50),m.Fc(1,"#"),m.Sb())}function $(e,t){if(1&e&&(m.Tb(0,"td",51),m.Fc(1),m.Sb()),2&e){const e=t.index;m.Bb(1),m.Hc(" ",e+1," ")}}function V(e,t){1&e&&(m.Tb(0,"th",50),m.Fc(1," Producto "),m.Sb())}function j(e,t){if(1&e&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.lc("value",e.IDProducto),m.Bb(1),m.Hc(" ",e.IDMarca+" "+e.IDDimension," ")}}function G(e,t){if(1&e){const e=m.Ub();m.Tb(0,"td",52),m.Tb(1,"mat-form-field"),m.Tb(2,"mat-label"),m.Fc(3,"Producto"),m.Sb(),m.Tb(4,"mat-select",53),m.bc("selectionChange",(function(){m.uc(e);const r=t.index;return m.fc().calculateDetailList(r)})),m.Dc(5,j,2,2,"mat-option",15),m.Sb(),m.Sb(),m.Sb()}if(2&e){const e=t.index,r=m.fc();m.lc("formGroupName",e),m.Bb(5),m.lc("ngForOf",r.products)}}function Q(e,t){1&e&&(m.Tb(0,"th",50),m.Fc(1," Unidad de medida "),m.Sb())}function z(e,t){if(1&e&&(m.Tb(0,"mat-option",46),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.lc("value",e.IdUnidadesMedidas),m.Bb(1),m.Hc(" ",e.Nombre," ")}}function q(e,t){if(1&e){const e=m.Ub();m.Tb(0,"td",52),m.Tb(1,"mat-form-field"),m.Tb(2,"mat-label"),m.Fc(3,"Unidad de medida"),m.Sb(),m.Tb(4,"mat-select",54),m.bc("selectionChange",(function(){m.uc(e);const r=t.index;return m.fc().calculateDetailList(r)})),m.Dc(5,z,2,2,"mat-option",15),m.Sb(),m.Sb(),m.Sb()}if(2&e){const e=t.index,r=m.fc();m.lc("formGroupName",e),m.Bb(5),m.lc("ngForOf",r.measureUnits)}}function K(e,t){1&e&&(m.Tb(0,"th",50),m.Fc(1," Precio de compra "),m.Sb())}function X(e,t){if(1&e&&(m.Tb(0,"td",52),m.Fc(1),m.gc(2,"number"),m.Sb()),2&e){const e=t.index,r=m.fc();m.lc("formGroupName",e),m.Bb(1),m.Hc(" L.",m.ic(2,2,r.details[e].PrecioCompra?r.details[e].PrecioCompra:0,"0.2-2")," ")}}function J(e,t){1&e&&(m.Tb(0,"th",50),m.Fc(1," Cantidad "),m.Sb())}function W(e,t){if(1&e){const e=m.Ub();m.Tb(0,"mat-form-field"),m.Tb(1,"input",55),m.bc("keyup",(function(){m.uc(e);const t=m.fc().index;return m.fc().calculateDetailList(t)})),m.Sb(),m.Sb()}2&e&&(m.Bb(1),m.lc("decimal",!0))}function Y(e,t){if(1&e&&(m.Tb(0,"td",52),m.Fc(1),m.gc(2,"number"),m.Dc(3,W,2,1,"mat-form-field",16),m.Sb()),2&e){const e=t.$implicit,r=t.index,a=m.fc();m.lc("formGroupName",r),m.Bb(1),m.Hc(" ",1===a.viewModePurchaseOrder?m.ic(2,3,e.Cantidad,"0.2-2"):""," "),m.Bb(2),m.lc("ngIf",2===a.viewModePurchaseOrder)}}function Z(e,t){1&e&&(m.Tb(0,"th",50),m.Fc(1," Total unidad compra "),m.Sb())}function ee(e,t){if(1&e&&(m.Tb(0,"td",52),m.Fc(1),m.gc(2,"number"),m.Sb()),2&e){const e=t.index,r=m.fc();m.lc("formGroupName",e),m.Bb(1),m.Hc(" L. ",m.ic(2,2,r.details[e].TotalUnidadCompra?r.details[e].TotalUnidadCompra:0,"0.2-2")," ")}}function te(e,t){if(1&e&&(m.Tb(0,"th",50),m.Fc(1),m.Sb()),2&e){const e=m.fc();m.Bb(1),m.Hc(" ",2===e.viewModePurchaseOrder?"Accion":""," ")}}function re(e,t){if(1&e){const e=m.Ub();m.Tb(0,"button",57),m.bc("click",(function(){m.uc(e);const t=m.fc().index;return m.fc().deleteProduct(t)})),m.Tb(1,"mat-icon"),m.Fc(2,"delete"),m.Sb(),m.Sb()}}function ae(e,t){if(1&e&&(m.Tb(0,"td",52),m.Dc(1,re,3,0,"button",56),m.Sb()),2&e){const e=t.index,r=m.fc();m.lc("formGroupName",e),m.Bb(1),m.lc("ngIf",2===r.viewModePurchaseOrder)}}function oe(e,t){1&e&&m.Ob(0,"tr",58)}function ce(e,t){1&e&&m.Ob(0,"tr",59)}function ie(e,t){if(1&e){const e=m.Ub();m.Tb(0,"mat-toolbar",60),m.Tb(1,"mat-toolbar-row",61),m.Tb(2,"button",62),m.bc("click",(function(){return m.uc(e),m.fc().addProduct()})),m.Tb(3,"mat-icon",63),m.Fc(4,"add"),m.Sb(),m.Sb(),m.Sb(),m.Sb()}}function ne(e,t){if(1&e){const e=m.Ub();m.Tb(0,"button",64),m.bc("click",(function(){return m.uc(e),m.fc().clear()})),m.Fc(1," Nuevo "),m.Sb()}}function de(e,t){if(1&e){const e=m.Ub();m.Tb(0,"button",65),m.bc("click",(function(){return m.uc(e),m.fc().savePurchaseOrder()})),m.Fc(1," Guardar "),m.Sb()}if(2&e){const e=m.fc();m.lc("disabled",e.purchaseOrderForm.invalid)}}function se(e,t){if(1&e){const e=m.Ub();m.Tb(0,"button",66),m.bc("click",(function(){return m.uc(e),m.fc().annulPurchaseOrder()})),m.Tb(1,"mat-icon"),m.Fc(2,"cancel"),m.Sb(),m.Fc(3," Anular "),m.Sb()}if(2&e){const e=m.fc();m.lc("disabled",e.purchaseOrderForm.invalid)}}function ue(e,t){if(1&e){const e=m.Ub();m.Tb(0,"button",65),m.bc("click",(function(){return m.uc(e),m.fc().savePurchaseOrder()})),m.Fc(1),m.Sb()}if(2&e){const e=m.fc();m.lc("disabled",e.purchaseOrderForm.invalid),m.Bb(1),m.Hc(" Emitir orden a ",e.nextState," ")}}let le=(()=>{class e{constructor(e,t,r,a,o,c){this.formBuilder=e,this.route=t,this.mainFacadeService=r,this.purchaseOrderService=a,this.izitoastAlertService=o,this.router=c,this.currentDate=new Date,this.paymentMethod=i.a,this.providers=[],this.products=[],this.measureUnits=[],this.displayedColumns=["Posicion","Idproducto","IdunidadMedida","Cantidad","PrecioCompra","TotalUnidadCompra","Actions"],this.dataSource=new l.l([]),this.details=[],this.states=Object.keys(b).map(e=>({label:e,key:b[e]})),this.unsubscribe$=new n.a,this.buildForm(),this.purchaseOrderId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getPurchaseOrderInfo(),this.onChanges()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}buildForm(){this.purchaseOrderForm=this.formBuilder.group({IdordenCompra:[0,[]],FechaEspectativa:[new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()),[c.v.required]],Idproveedor:[null,[c.v.required]],Tipo:[null,[c.v.required]],SubTotal:[0,[]],Impuesto:[0,[]],Total:[0,[]],DetalleOrdenCompra:new c.d([]),IdestadoOrdenCompra:[0,[]]})}onChanges(){this.purchaseOrderForm.controls.Idproveedor.valueChanges.pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e&&null!==e&&(this.purchaseOrderProvider=this.providers.find(t=>t.IdProveedor===e))})}getPurchaseOrderInfo(){this.clear(),this.loading=!0,this.purchaseOrderId?(this.viewModePurchaseOrder=1,Object(d.a)(this.mainFacadeService.getProviders(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits(),this.route.params.pipe(Object(u.a)(e=>this.purchaseOrderService.getPurchaseOrderDetail(e.id)))).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e[0]&&e[0].length>0&&(this.providers=e[0]),e[1]&&e[1].length>0&&(this.products=e[1]),e[2]&&e[2].length>0&&(this.measureUnits=e[2]),e[3]&&null!==e[3]&&this.setToForm(e[3]),this.loading=!1},e=>this.loading=!1)):(this.viewModePurchaseOrder=2,Object(d.a)(this.mainFacadeService.getProviders(),this.mainFacadeService.getProducts(),this.mainFacadeService.getMeasureUnits()).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e[0]&&e[0].length>0&&(this.providers=e[0]),e[1]&&e[1].length>0&&(this.products=e[1]),e[2]&&e[2].length>0&&(this.measureUnits=e[2]),this.loading=!1},e=>this.loading=!1))}setToForm(e){this.purchaseOrderForm.controls.IdordenCompra.setValue(e.IdordenCompra),this.purchaseOrderForm.controls.Idproveedor.setValue(e.Idproveedor),this.purchaseOrderForm.controls.Tipo.setValue(e.Tipo),this.purchaseOrderForm.controls.FechaEspectativa.setValue(e.FechaEspectativa),this.purchaseOrderForm.controls.SubTotal.setValue(e.SubTotal),this.purchaseOrderForm.controls.Impuesto.setValue(e.Impuesto),this.purchaseOrderForm.controls.Total.setValue(e.Total),this.purchaseOrderForm.controls.IdestadoOrdenCompra.setValue(e.IdestadoOrdenCompra),e.DetalleOrdenCompra&&(e.DetalleOrdenCompra.forEach(e=>{this.purchaseOrderForm.controls.DetalleOrdenCompra.push(this.createProduct(e))}),this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value,this.dataSource=new l.l(this.details)),this.nextOrderState()}deleteProduct(e){this.purchaseOrderForm.get("DetalleOrdenCompra").removeAt(e),this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value,this.dataSource=new l.l(this.details),this.updateFooterSummary()}addProduct(){this.purchaseOrderForm.get("DetalleOrdenCompra").push(this.createProduct(null)),this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value,this.dataSource=new l.l(this.details)}createProduct(e){if(e){const t=this.products.find(t=>t.IDProducto===e.Idproducto);return this.formBuilder.group({IdordenCompra:[e.IdordenCompra,[]],Idproducto:[e.Idproducto,[]],IdunidadMedida:[e.IdunidadMedida,[]],Cantidad:[e.Cantidad,[]],PrecioCompra:[t?t.PrecioCompra:0,[]],TotalUnidadCompra:[e.TotalUnidadCompra,[]]})}return this.formBuilder.group({IdordenCompra:[0,[]],Idproducto:[null,[]],IdunidadMedida:[null,[]],Cantidad:[null,[]],PrecioCompra:[null,[]],TotalUnidadCompra:[null,[]]})}clear(){this.purchaseOrderForm.controls.FechaEspectativa.setValue(null),this.purchaseOrderForm.controls.Idproveedor.setValue(null),this.purchaseOrderForm.controls.Tipo.setValue(null),this.purchaseOrderForm.controls.SubTotal.setValue(0),this.purchaseOrderForm.controls.Impuesto.setValue(0),this.purchaseOrderForm.controls.Total.setValue(0),this.purchaseOrderForm.get("DetalleOrdenCompra").clear(),this.dataSource=new l.l([])}calculateDetailList(e){const t=Object.assign({},this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].value);t&&t.Idproducto&&(this.productSelected=this.products.find(e=>e.IDProducto===t.Idproducto),this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].controls.PrecioCompra.setValue(this.productSelected.PrecioCompra)),t&&t.Cantidad&&(t.Cantidad=1*t.Cantidad,this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].controls.Cantidad.setValue(t.Cantidad),this.purchaseOrderForm.controls.DetalleOrdenCompra.controls[e].controls.TotalUnidadCompra.setValue(t.Cantidad*this.productSelected.PrecioCompra)),this.updateFooterSummary()}updateFooterSummary(){this.details=this.purchaseOrderForm.get("DetalleOrdenCompra").value;const e=this.details.map(e=>e&&e.TotalUnidadCompra?e.TotalUnidadCompra:0).reduce((e,t)=>e+t,0),t=this.details.map(e=>e&&e.TotalUnidadCompra?.15*e.TotalUnidadCompra:0).reduce((e,t)=>e+t,0),r=e+t;this.purchaseOrderForm.controls.SubTotal.setValue(e),this.purchaseOrderForm.controls.Impuesto.setValue(t),this.purchaseOrderForm.controls.Total.setValue(r)}inputExpectDate(e){this.purchaseOrderForm.get("FechaEspectativa").setValue(e.value._d)}savePurchaseOrder(){this.loading=!0,this.purchaseOrderId?this.purchaseOrderService.updatePurchaseOrder(this.purchaseOrderForm.value).subscribe(e=>{this.izitoastAlertService.CustomSuccessAlert(e),this.loading=!1,this.router.navigate(["/admin/orders/purchase-orders"])},e=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando actualizar la orden de compra"),this.loading=!1}):this.purchaseOrderService.createPurchaseOrder(this.purchaseOrderForm.value).subscribe(e=>{this.izitoastAlertService.CustomSuccessAlert(e),this.loading=!1,this.router.navigate(["/admin/orders/purchase-orders"])},e=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando crear la orden de compra"),this.loading=!1})}annulPurchaseOrder(){this.purchaseOrderId&&this.purchaseOrderService.annulPurchaseOrder(this.purchaseOrderForm.value).subscribe(e=>{this.izitoastAlertService.CustomSuccessAlert(e),this.loading=!1,this.router.navigate(["/admin/orders/purchase-orders"])},e=>{this.izitoastAlertService.CustomErrorAlert("Hubo un error intentando anular la orden de compra"),this.loading=!1})}get IdestadoOrdenCompra(){return this.purchaseOrderForm.controls.IdestadoOrdenCompra.value}nextOrderState(){if(this.IdestadoOrdenCompra&&5!==this.IdestadoOrdenCompra)return this.nextState=this.states[this.IdestadoOrdenCompra].key,this.states[this.IdestadoOrdenCompra].label}}return e.\u0275fac=function(t){return new(t||e)(m.Nb(c.f),m.Nb(o.a),m.Nb(p.a),m.Nb(S),m.Nb(v.a),m.Nb(o.g))},e.\u0275cmp=m.Hb({type:e,selectors:[["purchase-order-create"]],decls:131,vars:37,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxFlex","100",1,"m-36"],[3,"formGroup"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","center start","fxFlex","50"],["mat-mini-fab","","routerLink",".."],["src","assets/images/logos/fuse.svg","alt",""],["fxLayout","column","fxLayoutAlign","end end","fxFlex","50"],[1,"select-provider"],[1,"mat-subheading-2"],["formControlName","Idproveedor"],["providerSelect",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","50"],["fxLayout","row","fxFlex","33",1,"purchase-order-features"],[2,"width","100%"],["formControlName","Tipo"],["fxLayout","row",4,"ngIf"],["fxLayout","column",1,"mx-12","mt-12"],["mat-table","","formArrayName","DetalleOrdenCompra",3,"dataSource"],["matColumnDef","Posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Idproducto"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","IdunidadMedida"],["matColumnDef","PrecioCompra"],["matColumnDef","Cantidad"],["matColumnDef","TotalUnidadCompra"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","background: white",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","end center",1,"summary-body"],["fxLayout","row",2,"width","50%"],["fxLayout","column","fxLayoutAlign","start end","fxFlex","50"],[1,"left-align"],[1,"right-align"],["fxLayout","row","fxLayoutAlign","end center",2,"padding","1%"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn","style","color: white",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","readonly","","formControlName","FechaEspectativa",3,"matDatepicker","dateInput"],["matSuffix","",3,"for"],["expectDate",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"formGroupName"],["formControlName","Idproducto",3,"selectionChange"],["formControlName","IdunidadMedida",3,"selectionChange"],["matInput","","type","text","formControlName","Cantidad","pattern","^\\d+(\\.\\d{1,2})?$","digitOnly","",3,"decimal","keyup"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[2,"background","white"],[2,"padding","0%"],["mat-mini-fab","",1,"accent",3,"click"],[2,"color","white"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",2,"color","white",3,"disabled","click"]],template:function(e,t){1&e&&(m.Ob(0,"app-loading-overlay",0),m.Tb(1,"div",1),m.Ob(2,"app-title-header",2),m.Tb(3,"div",3),m.Tb(4,"div",4),m.Tb(5,"mat-card"),m.Tb(6,"form",5),m.Tb(7,"div",6),m.Tb(8,"div",7),m.Tb(9,"button",8),m.Tb(10,"mat-icon"),m.Fc(11,"arrow_back"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(12,"div",3),m.Tb(13,"div",7),m.Ob(14,"img",9),m.Sb(),m.Tb(15,"div",10),m.Tb(16,"div",11),m.Tb(17,"div",6),m.Tb(18,"div",7),m.Tb(19,"span",12),m.Tb(20,"strong"),m.Fc(21,"Informacion del proveedor"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(22,"div",6),m.Tb(23,"mat-form-field"),m.Tb(24,"mat-label"),m.Fc(25,"Proveedor"),m.Sb(),m.Tb(26,"mat-select",13,14),m.Dc(28,L,2,2,"mat-option",15),m.Sb(),m.Dc(29,A,2,0,"mat-error",16),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(30,"div",6),m.Tb(31,"div",17),m.Tb(32,"div"),m.Tb(33,"strong"),m.Fc(34,"RTN: "),m.Sb(),m.Fc(35,"05011955522252"),m.Sb(),m.Tb(36,"div"),m.Tb(37,"strong"),m.Fc(38,"Direccion: "),m.Sb(),m.Fc(39,"San Pedro Sula, Honduras "),m.Sb(),m.Tb(40,"div"),m.Tb(41,"strong"),m.Fc(42,"Email: "),m.Sb(),m.Fc(43,"bodeguitabendicion@gmail.com "),m.Sb(),m.Tb(44,"div"),m.Tb(45,"strong"),m.Fc(46,"Telefono: "),m.Sb(),m.Fc(47,"98989898"),m.Sb(),m.Sb(),m.Tb(48,"div",17),m.Dc(49,U,9,2,"div",16),m.Sb(),m.Sb(),m.Tb(50,"div",3),m.Tb(51,"div",18),m.Tb(52,"div",19),m.Tb(53,"span",12),m.Tb(54,"strong"),m.Fc(55,"Forma de pago"),m.Sb(),m.Sb(),m.Tb(56,"div",6),m.Tb(57,"mat-form-field"),m.Tb(58,"mat-label"),m.Fc(59,"Pago"),m.Sb(),m.Tb(60,"mat-select",20),m.Dc(61,N,2,2,"mat-option",15),m.gc(62,"keyvalue"),m.Sb(),m.Dc(63,H,2,0,"mat-error",16),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(64,"div",18),m.Tb(65,"div",19),m.Tb(66,"span",12),m.Tb(67,"strong"),m.Fc(68,"Fecha expectativa de entrega: "),m.Sb(),m.Fc(69),m.gc(70,"date"),m.Sb(),m.Dc(71,_,7,3,"div",21),m.Sb(),m.Sb(),m.Sb(),m.Tb(72,"div",22),m.Tb(73,"table",23),m.Rb(74,24),m.Dc(75,E,2,0,"th",25),m.Dc(76,$,2,1,"td",26),m.Qb(),m.Rb(77,27),m.Dc(78,V,2,0,"th",25),m.Dc(79,G,6,2,"td",28),m.Qb(),m.Rb(80,29),m.Dc(81,Q,2,0,"th",25),m.Dc(82,q,6,2,"td",28),m.Qb(),m.Rb(83,30),m.Dc(84,K,2,0,"th",25),m.Dc(85,X,3,5,"td",28),m.Qb(),m.Rb(86,31),m.Dc(87,J,2,0,"th",25),m.Dc(88,Y,4,6,"td",28),m.Qb(),m.Rb(89,32),m.Dc(90,Z,2,0,"th",25),m.Dc(91,ee,3,5,"td",28),m.Qb(),m.Rb(92,33),m.Dc(93,te,2,1,"th",25),m.Dc(94,ae,2,2,"td",28),m.Qb(),m.Dc(95,oe,1,0,"tr",34),m.Dc(96,ce,1,0,"tr",35),m.Sb(),m.Dc(97,ie,5,0,"mat-toolbar",36),m.Sb(),m.Tb(98,"div",37),m.Tb(99,"div",38),m.Tb(100,"div",39),m.Tb(101,"div",40),m.Tb(102,"span",12),m.Tb(103,"strong"),m.Fc(104,"Subtotal"),m.Sb(),m.Sb(),m.Sb(),m.Tb(105,"div",40),m.Tb(106,"span",12),m.Tb(107,"strong"),m.Fc(108,"Impuesto"),m.Sb(),m.Sb(),m.Sb(),m.Tb(109,"div",40),m.Tb(110,"span",12),m.Tb(111,"strong"),m.Fc(112,"Total"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(113,"div",39),m.Tb(114,"div",41),m.Tb(115,"span",12),m.Fc(116),m.gc(117,"number"),m.Sb(),m.Sb(),m.Tb(118,"div",41),m.Tb(119,"span",12),m.Fc(120),m.gc(121,"number"),m.Sb(),m.Sb(),m.Tb(122,"div",41),m.Tb(123,"span",12),m.Fc(124),m.gc(125,"number"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(126,"mat-card-actions",42),m.Dc(127,ne,2,0,"button",43),m.Dc(128,de,2,1,"button",44),m.Dc(129,se,4,1,"button",45),m.Dc(130,ue,2,2,"button",44),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&e&&(m.lc("isActive",t.loading),m.Bb(2),m.lc("icon","assistant")("section","\xd3rdenes de compra")("title","Detalle orden de compra"),m.Bb(4),m.lc("formGroup",t.purchaseOrderForm),m.Bb(22),m.lc("ngForOf",t.providers),m.Bb(1),m.lc("ngIf",t.purchaseOrderForm.get("Idproveedor").errors),m.Bb(20),m.lc("ngIf",2===t.viewModePurchaseOrder&&t.purchaseOrderProvider),m.Bb(12),m.lc("ngForOf",m.hc(62,23,t.paymentMethod)),m.Bb(2),m.lc("ngIf",t.purchaseOrderForm.get("Tipo").errors),m.Bb(6),m.Hc(" ",1===t.viewModePurchaseOrder&&t.purchaseOrderForm.get("FechaEspectativa").value?m.ic(70,25,t.purchaseOrderForm.get("FechaEspectativa").value,"dd/MM/yyyy"):""," "),m.Bb(2),m.lc("ngIf",2===t.viewModePurchaseOrder),m.Bb(2),m.lc("dataSource",t.dataSource),m.Bb(22),m.lc("matHeaderRowDef",t.displayedColumns),m.Bb(1),m.lc("matRowDefColumns",t.displayedColumns),m.Bb(1),m.lc("ngIf",2===t.viewModePurchaseOrder),m.Bb(19),m.Hc(" L. ",m.ic(117,28,t.purchaseOrderForm.get("SubTotal").value?t.purchaseOrderForm.get("SubTotal").value:0,"0.2-2")," "),m.Bb(4),m.Hc(" L. ",m.ic(121,31,t.purchaseOrderForm.get("Impuesto").value?t.purchaseOrderForm.get("Impuesto").value:0,"0.2-2")," "),m.Bb(4),m.Hc(" L. ",m.ic(125,34,t.purchaseOrderForm.get("Total").value?t.purchaseOrderForm.get("Total").value:0,"0.2-2")," "),m.Bb(3),m.lc("ngIf",2===t.viewModePurchaseOrder),m.Bb(1),m.lc("ngIf",2===t.viewModePurchaseOrder),m.Bb(1),m.lc("ngIf",1===t.viewModePurchaseOrder&&4!==t.IdestadoOrdenCompra&&5!==t.IdestadoOrdenCompra),m.Bb(1),m.lc("ngIf",1===t.viewModePurchaseOrder&&4!==t.IdestadoOrdenCompra&&5!==t.IdestadoOrdenCompra))},directives:[O.a,T.c,F.a,T.a,C.a,c.w,c.r,c.j,T.b,w.a,o.h,D.a,P.c,P.f,y.a,c.q,c.i,a.s,a.t,l.k,c.e,l.c,l.e,l.b,l.g,l.j,C.b,I.k,P.b,x.b,c.c,k.b,k.d,P.g,k.a,l.d,l.a,c.k,c.t,B.a,l.f,l.i,M.a,M.c],pipes:[a.l,a.f,a.g],styles:[".select-provider[_ngcontent-%COMP%]{width:100%;display:block}.select-provider[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.purchase-order-features[_ngcontent-%COMP%]{margin:1%}.purchase-order-features[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:12px;width:98%;padding:0 2%}.summary-body[_ngcontent-%COMP%]{margin:1%}.mat-column-Posicion[_ngcontent-%COMP%]{width:5%!important}.mat-column-IDProducto[_ngcontent-%COMP%], .mat-column-Posicion[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-IDProducto[_ngcontent-%COMP%]{width:27%!important}.mat-column-IDUnidadMedida[_ngcontent-%COMP%]{width:20%!important}.mat-column-Cantidad[_ngcontent-%COMP%], .mat-column-IDUnidadMedida[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Cantidad[_ngcontent-%COMP%]{width:6%!important}.mat-column-PrecioCompra[_ngcontent-%COMP%], .mat-column-TotalUnidadCompra[_ngcontent-%COMP%]{width:16%!important}.mat-column-Actions[_ngcontent-%COMP%], .mat-column-PrecioCompra[_ngcontent-%COMP%], .mat-column-TotalUnidadCompra[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.mat-column-Actions[_ngcontent-%COMP%]{width:10%!important}"]}),e})();var be=r("M9IT");function me(e,t){1&e&&(m.Tb(0,"th",30),m.Fc(1,"#"),m.Sb())}function pe(e,t){if(1&e&&(m.Tb(0,"td",31),m.Fc(1),m.Sb()),2&e){const e=t.index;m.Bb(1),m.Hc(" ",e+1," ")}}function he(e,t){1&e&&(m.Tb(0,"th",30),m.Fc(1," Fecha de entrega "),m.Sb())}function fe(e,t){if(1&e&&(m.Tb(0,"td",31),m.Fc(1),m.gc(2,"date"),m.Sb()),2&e){const e=t.$implicit;m.Bb(1),m.Hc(" ",m.ic(2,1,e.fechaEspectativa,"dd/MM/yyyy")," ")}}function ge(e,t){1&e&&(m.Tb(0,"th",30),m.Fc(1,"Proveedor"),m.Sb())}function Se(e,t){if(1&e&&(m.Tb(0,"td",31),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.Bb(1),m.Hc(" ",e.idProveedor," ")}}function ve(e,t){1&e&&(m.Tb(0,"th",30),m.Fc(1,"Forma de pago"),m.Sb())}function Oe(e,t){if(1&e&&(m.Tb(0,"td",31),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.Bb(1),m.Hc(" ",e.tipo," ")}}function Te(e,t){1&e&&(m.Tb(0,"th",30),m.Fc(1," Fecha de emisi\xf3n "),m.Sb())}function Fe(e,t){if(1&e&&(m.Tb(0,"td",31),m.Fc(1),m.gc(2,"date"),m.Sb()),2&e){const e=t.$implicit;m.Bb(1),m.Hc(" ",m.ic(2,1,e.fechaCreacion,"dd/MM/yyyy")," ")}}function Ce(e,t){1&e&&(m.Tb(0,"th",30),m.Fc(1,"Acciones"),m.Sb())}function we(e,t){if(1&e&&(m.Tb(0,"td",31),m.Tb(1,"button",32),m.Tb(2,"mat-icon"),m.Fc(3,"search"),m.Sb(),m.Sb(),m.Sb()),2&e){const e=t.$implicit;m.Bb(1),m.lc("routerLink",e.idOrdenCompra)}}function De(e,t){1&e&&(m.Tb(0,"tr",33),m.Tb(1,"td",34),m.Fc(2,"No se encontraron \xf3rdenes"),m.Sb(),m.Sb())}function Pe(e,t){1&e&&m.Ob(0,"tr",35)}function ye(e,t){1&e&&m.Ob(0,"tr",36)}function Ie(e,t){if(1&e&&(m.Tb(0,"mat-option",37),m.Fc(1),m.Sb()),2&e){const e=t.$implicit;m.lc("value",e.key),m.Bb(1),m.Hc(" ",e.value," ")}}const xe=function(){return[10,20]},ke=[{path:"",component:(()=>{class e{constructor(e){this.purchaseOrderService=e,this.displayedColumns=["posicion","fechaCreacion","fechaEspectativa","idProveedor","tipo","actions"],this.dataSource=new l.l([]),this.purchaseOrders=[],this.filterBy=new c.g("Compra"),this.status=b,this.unsubscribe$=new n.a}ngOnInit(){this.getPurchaseOrders(),this.onChangeStates()}getPurchaseOrders(){this.loading=!0,this.purchaseOrderService.getPurchaseOrders().pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e&&e.length>0&&(this.purchaseOrders=e,this.dataSource=new l.l(this.purchaseOrders),this.dataSource.paginator=this.paginator,this.dataSource.filter=this.filterBy.value),this.loading=!1},e=>this.loading=!1)}onChangeStates(){this.filterBy.valueChanges.pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e&&null!==e&&(this.dataSource.filter=e)})}}return e.\u0275fac=function(t){return new(t||e)(m.Nb(S))},e.\u0275cmp=m.Hb({type:e,selectors:[["app-purchase-order-list"]],viewQuery:function(e,t){var r;1&e&&m.Ic(be.a,!0),2&e&&m.pc(r=m.cc())&&(t.paginator=r.first)},decls:45,vars:13,consts:[[3,"isActive"],["fxLayout","column",1,"page-layout","simple","fullwidth"],[3,"icon","section","title"],["fxLayout","column",1,"mx-12","mt-32"],["fxLayout","row","fxLayoutAlign","end center"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-12","create-button"],["mat-fab","","routerLink","create",1,"accent"],["fxLayout","column",1,"mx-12"],["fxFlex","100",1,"mat-elevation-z8"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fechaEspectativa"],["matColumnDef","idProveedor"],["matColumnDef","tipo"],["matColumnDef","fechaCreacion"],["matColumnDef","actions"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"padding","0%"],["fxLayout","row","fxLayoutAlign","start","fxFlex","100",2,"background-color","white"],["fxLayout","row","fxFlex","","fxLayoutAlign","start center"],[1,"filter-by"],[2,"margin","0 10px"],["appearance",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxLayoutAlign","end center","showFirstLastButtons","",2,"width","100%",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"routerLink"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-header-row",""],["mat-row",""],[3,"value"]],template:function(e,t){1&e&&(m.Ob(0,"app-loading-overlay",0),m.Tb(1,"div",1),m.Ob(2,"app-title-header",2),m.Tb(3,"div",3),m.Tb(4,"div",4),m.Tb(5,"div",5),m.Tb(6,"button",6),m.Tb(7,"mat-icon"),m.Fc(8,"playlist_add"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(9,"div",7),m.Tb(10,"div",8),m.Tb(11,"table",9),m.Rb(12,10),m.Dc(13,me,2,0,"th",11),m.Dc(14,pe,2,1,"td",12),m.Qb(),m.Rb(15,13),m.Dc(16,he,2,0,"th",11),m.Dc(17,fe,3,4,"td",12),m.Qb(),m.Rb(18,14),m.Dc(19,ge,2,0,"th",11),m.Dc(20,Se,2,1,"td",12),m.Qb(),m.Rb(21,15),m.Dc(22,ve,2,0,"th",11),m.Dc(23,Oe,2,1,"td",12),m.Qb(),m.Rb(24,16),m.Dc(25,Te,2,0,"th",11),m.Dc(26,Fe,3,4,"td",12),m.Qb(),m.Rb(27,17),m.Dc(28,Ce,2,0,"th",11),m.Dc(29,we,4,1,"td",12),m.Qb(),m.Dc(30,De,3,0,"tr",18),m.Dc(31,Pe,1,0,"tr",19),m.Dc(32,ye,1,0,"tr",20),m.Sb(),m.Tb(33,"mat-toolbar"),m.Tb(34,"mat-toolbar-row",21),m.Tb(35,"div",22),m.Tb(36,"div",23),m.Tb(37,"div",24),m.Tb(38,"mat-label",25),m.Fc(39,"Filtrar por:"),m.Sb(),m.Tb(40,"mat-form-field",26),m.Tb(41,"mat-select",27),m.Dc(42,Ie,2,2,"mat-option",28),m.gc(43,"keyvalue"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(44,"mat-paginator",29),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&e&&(m.lc("isActive",t.loading),m.Bb(2),m.lc("icon","assistant")("section","\xd3rdenes de compra")("title","Listado"),m.Bb(9),m.lc("dataSource",t.dataSource),m.Bb(20),m.lc("matHeaderRowDef",t.displayedColumns),m.Bb(1),m.lc("matRowDefColumns",t.displayedColumns),m.Bb(9),m.lc("formControl",t.filterBy),m.Bb(1),m.lc("ngForOf",m.hc(43,10,t.status)),m.Bb(2),m.lc("pageSizeOptions",m.mc(12,xe)))},directives:[O.a,T.c,F.a,T.b,w.a,o.h,D.a,T.a,l.k,l.c,l.e,l.b,l.h,l.g,l.j,M.a,M.c,P.f,P.c,y.a,c.q,c.h,a.s,be.a,l.d,l.a,l.f,l.i,I.k],pipes:[a.l,a.f],styles:[""]}),e})()},{path:"create",component:le},{path:":id",component:le}];let Be=(()=>{class e{}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[o.k.forChild(ke)],o.k]}),e})();var Me=r("YUcS"),Le=r("PCNd");let Ae=(()=>{class e{}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},providers:[S],imports:[[a.c,Be,Le.a,Me.a,c.u,B.b,l.m,be.b,D.b,w.b,P.e,C.f,x.c,y.b,k.c,M.b]]}),e})()}}]);